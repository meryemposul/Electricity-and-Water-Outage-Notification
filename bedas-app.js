var uv=Object.defineProperty;var hv=(r,t,e)=>t in r?uv(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Pg=(r,t,e)=>hv(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class Di{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ts={PROPERTYCHANGE:"propertychange"};class gc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function cv(r,t,e){let n,i;e=e||Ai;let s=0,a=r.length,u=!1;for(;s<a;)n=s+(a-s>>1),i=+e(r[n],t),i<0?s=n+1:(a=n,u=!i);return u?s:~s}function Ai(r,t){return r>t?1:r<t?-1:0}function pc(r,t,e){if(r[0]<=t)return 0;const n=r.length;if(t<=r[n-1])return n-1;if(typeof e=="function"){for(let i=1;i<n;++i){const s=r[i];if(s===t)return i;if(s<t)return e(t,r[i-1],s)>0?i-1:i}return n-1}if(e>0){for(let i=1;i<n;++i)if(r[i]<t)return i-1;return n-1}if(e<0){for(let i=1;i<n;++i)if(r[i]<=t)return i;return n-1}for(let i=1;i<n;++i){if(r[i]==t)return i;if(r[i]<t)return r[i-1]-t<t-r[i]?i-1:i}return n-1}function dv(r,t,e){for(;t<e;){const n=r[t];r[t]=r[e],r[e]=n,++t,--e}}function ri(r,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let i=0;i<n;i++)r[r.length]=e[i]}function gr(r,t){const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}function fv(r,t,e){const n=t||Ai;return r.every(function(i,s){if(s===0)return!0;const a=n(r[s-1],i);return!(a>0||a===0)})}function Io(){return!0}function kl(){return!1}function As(){}function $0(r){let t=!1,e,n,i;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==i||!gr(s,n))&&(t=!0,i=this,n=s,e=r.apply(this,arguments)),e}}function gv(r){function t(){let e;try{e=r()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function Uo(r){for(const t in r)delete r[t]}function Nr(r){let t;for(t in r)return!1;return!t}class Fl extends gc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const s=e?new Di(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,u[n]=0),++a[n];let h;for(let d=0,f=i.length;d<f;++d)if("handleEvent"in i[d]?h=i[d].handleEvent(s):h=i[d].call(this,s),h===!1||s.propagationStopped){h=!1;break}if(--a[n]===0){let d=u[n];for(delete u[n];d--;)this.removeEventListener(n,As);delete a[n]}return h}disposeInternal(){this.listeners_&&Uo(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);i!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=As,++this.pendingRemovals_[t]):(n.splice(i,1),n.length===0&&delete this.listeners_[t]))}}const pt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Tt(r,t,e,n,i){if(n&&n!==r&&(e=e.bind(n)),i){const a=e;e=function(){r.removeEventListener(t,e),a.apply(this,arguments)}}const s={target:r,type:t,listener:e};return r.addEventListener(t,e),s}function al(r,t,e,n){return Tt(r,t,e,n,!0)}function Wt(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Uo(r))}class Yo extends Fl{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pt.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Tt(this,t[s],e);return i}return Tt(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let s=0;s<i;++s)n[s]=al(this,t[s],e)}else n=al(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)pv(n);else if(Array.isArray(t))for(let i=0,s=t.length;i<s;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}Yo.prototype.on;Yo.prototype.once;Yo.prototype.un;function pv(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)Wt(r[t]);else Wt(r)}function at(){throw new Error("Unimplemented abstract method.")}let _v=0;function Ft(r){return r.ol_uid||(r.ol_uid=String(++_v))}class Dg extends Di{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class Xn extends Yo{constructor(t){super(),this.on,this.once,this.un,Ft(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Dg(n,t,e)),n=Ts.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Dg(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const s=i[t];i[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Nr(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Je={ADD:"add",REMOVE:"remove"},Bg={LENGTH:"length"};class Ya extends Di{constructor(t,e,n){super(t),this.element=e,this.index=n}}class ti extends Xn{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Bg.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ya(Je.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ya(Je.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ya(Je.REMOVE,i,t)),this.dispatchEvent(new Ya(Je.ADD,e,t))}updateLength_(){this.set(Bg.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}const Dt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function bt(r,t){if(!r)throw new Error(t)}function re(r,t,e){return Math.min(Math.max(r,t),e)}function mv(r,t,e,n,i,s){const a=i-e,u=s-n;if(a!==0||u!==0){const h=((r-e)*a+(t-n)*u)/(a*a+u*u);h>1?(e=i,n=s):h>0&&(e+=a*h,n+=u*h)}return Br(r,t,e,n)}function Br(r,t,e,n){const i=e-r,s=n-t;return i*i+s*s}function yv(r){const t=r.length;for(let n=0;n<t;n++){let i=n,s=Math.abs(r[n][n]);for(let u=n+1;u<t;u++){const h=Math.abs(r[u][n]);h>s&&(s=h,i=u)}if(s===0)return null;const a=r[i];r[i]=r[n],r[n]=a;for(let u=n+1;u<t;u++){const h=-r[u][n]/r[n][n];for(let d=n;d<t+1;d++)n==d?r[u][d]=0:r[u][d]+=h*r[n][d]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=r[n][t]/r[n][n];for(let i=n-1;i>=0;i--)r[i][t]-=r[i][n]*e[n]}return e}function il(r){return r*Math.PI/180}function Ss(r,t){const e=r%t;return e*t<0?e+t:e}function gn(r,t,e){return r+e*(t-r)}function _c(r,t){const e=Math.pow(10,t);return Math.round(r*e)/e}function Xa(r,t){return Math.floor(_c(r,t))}function Za(r,t){return Math.ceil(_c(r,t))}class J0 extends Xn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Dt.OPACITY]=t.opacity!==void 0?t.opacity:1,bt(typeof e[Dt.OPACITY]=="number","Layer opacity must be a number"),e[Dt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Dt.Z_INDEX]=t.zIndex,e[Dt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Dt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Dt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Dt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=re(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return at()}getLayerStatesArray(t){return at()}getExtent(){return this.get(Dt.EXTENT)}getMaxResolution(){return this.get(Dt.MAX_RESOLUTION)}getMinResolution(){return this.get(Dt.MIN_RESOLUTION)}getMinZoom(){return this.get(Dt.MIN_ZOOM)}getMaxZoom(){return this.get(Dt.MAX_ZOOM)}getOpacity(){return this.get(Dt.OPACITY)}getSourceState(){return at()}getVisible(){return this.get(Dt.VISIBLE)}getZIndex(){return this.get(Dt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Dt.EXTENT,t)}setMaxResolution(t){this.set(Dt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Dt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Dt.MAX_ZOOM,t)}setMinZoom(t){this.set(Dt.MIN_ZOOM,t)}setOpacity(t){bt(typeof t=="number","Layer opacity must be a number"),this.set(Dt.OPACITY,t)}setVisible(t){this.set(Dt.VISIBLE,t)}setZIndex(t){this.set(Dt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const bn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ae={ANIMATING:0,INTERACTING:1},Vn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Cv=42,mc=256,yc={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Q0{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||yc[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Xo=6378137,vs=Math.PI*Xo,vv=[-vs,-vs,vs,vs],Ev=[-180,-85,180,85],Ka=Xo*Math.log(Math.tan(Math.PI/2));class hs extends Q0{constructor(t){super({code:t,units:"m",extent:vv,global:!0,worldExtent:Ev,getPointResolution:function(e,n){return e/Math.cosh(n[1]/Xo)}})}}const Ng=[new hs("EPSG:3857"),new hs("EPSG:102100"),new hs("EPSG:102113"),new hs("EPSG:900913"),new hs("http://www.opengis.net/def/crs/EPSG/0/3857"),new hs("http://www.opengis.net/gml/srs/epsg.xml#3857")];function xv(r,t,e){const n=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(n));for(let i=0;i<n;i+=e){t[i]=vs*r[i]/180;let s=Xo*Math.log(Math.tan(Math.PI*(+r[i+1]+90)/360));s>Ka?s=Ka:s<-Ka&&(s=-Ka),t[i+1]=s}return t}function wv(r,t,e){const n=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(n));for(let i=0;i<n;i+=e)t[i]=180*r[i]/vs,t[i+1]=360*Math.atan(Math.exp(r[i+1]/Xo))/Math.PI-90;return t}const Sv=6378137,Gg=[-180,-90,180,90],Iv=Math.PI*Sv/180;class Tr extends Q0{constructor(t,e){super({code:t,units:"degrees",extent:Gg,axisOrientation:e,global:!0,metersPerUnit:Iv,worldExtent:Gg})}}const Vg=[new Tr("CRS:84"),new Tr("EPSG:4326","neu"),new Tr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Tr("urn:ogc:def:crs:OGC:2:84"),new Tr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Tr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Tr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Bh={};function Rv(r){return Bh[r]||Bh[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Tv(r,t){Bh[r]=t}let Is={};function ll(r,t,e){const n=r.getCode(),i=t.getCode();n in Is||(Is[n]={}),Is[n][i]=e}function Av(r,t){let e;return r in Is&&t in Is[r]&&(e=Is[r][t]),e}const ce={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function zg(r){const t=kn();for(let e=0,n=r.length;e<n;++e)xo(t,r[e]);return t}function bv(r,t,e){const n=Math.min.apply(null,r),i=Math.min.apply(null,t),s=Math.max.apply(null,r),a=Math.max.apply(null,t);return ki(n,i,s,a,e)}function Cc(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function t1(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function Gr(r,t,e){let n,i;return t<r[0]?n=r[0]-t:r[2]<t?n=t-r[2]:n=0,e<r[1]?i=r[1]-e:r[3]<e?i=e-r[3]:i=0,n*n+i*i}function bs(r,t){return vc(r,t[0],t[1])}function Mr(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function vc(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function Nh(r,t){const e=r[0],n=r[1],i=r[2],s=r[3],a=t[0],u=t[1];let h=ce.UNKNOWN;return a<e?h=h|ce.LEFT:a>i&&(h=h|ce.RIGHT),u<n?h=h|ce.BELOW:u>s&&(h=h|ce.ABOVE),h===ce.UNKNOWN&&(h=ce.INTERSECTING),h}function kn(){return[1/0,1/0,-1/0,-1/0]}function ki(r,t,e,n,i){return i?(i[0]=r,i[1]=t,i[2]=e,i[3]=n,i):[r,t,e,n]}function Ds(r){return ki(1/0,1/0,-1/0,-1/0,r)}function e1(r,t){const e=r[0],n=r[1];return ki(e,n,e,n,t)}function Ec(r,t,e,n,i){const s=Ds(i);return i1(s,r,t,e,n)}function Ro(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function n1(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function xo(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function i1(r,t,e,n,i){for(;e<n;e+=i)Lv(r,t[e],t[e+1]);return r}function Lv(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function r1(r,t){let e;return e=t(Ol(r)),e||(e=t(Pl(r)),e)||(e=t(Dl(r)),e)||(e=t(Vr(r)),e)?e:!1}function Gh(r){let t=0;return Zo(r)||(t=Ot(r)*be(r)),t}function Ol(r){return[r[0],r[1]]}function Pl(r){return[r[2],r[1]]}function Un(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Mv(r,t){let e;if(t==="bottom-left")e=Ol(r);else if(t==="bottom-right")e=Pl(r);else if(t==="top-left")e=Vr(r);else if(t==="top-right")e=Dl(r);else throw new Error("Invalid corner");return e}function Vh(r,t,e,n,i){const[s,a,u,h,d,f,g,_]=zh(r,t,e,n);return ki(Math.min(s,u,d,g),Math.min(a,h,f,_),Math.max(s,u,d,g),Math.max(a,h,f,_),i)}function zh(r,t,e,n){const i=t*n[0]/2,s=t*n[1]/2,a=Math.cos(e),u=Math.sin(e),h=i*a,d=i*u,f=s*a,g=s*u,_=r[0],m=r[1];return[_-h+g,m-d-f,_-h-g,m-d+f,_+h-g,m+d+f,_+h+g,m+d-f,_-h+g,m-d-f]}function be(r){return r[3]-r[1]}function wo(r,t,e){const n=e||kn();return tn(r,t)?(r[0]>t[0]?n[0]=r[0]:n[0]=t[0],r[1]>t[1]?n[1]=r[1]:n[1]=t[1],r[2]<t[2]?n[2]=r[2]:n[2]=t[2],r[3]<t[3]?n[3]=r[3]:n[3]=t[3]):Ds(n),n}function Vr(r){return[r[0],r[3]]}function Dl(r){return[r[2],r[3]]}function Ot(r){return r[2]-r[0]}function tn(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function Zo(r){return r[2]<r[0]||r[3]<r[1]}function kv(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function Fv(r,t,e){let n=!1;const i=Nh(r,t),s=Nh(r,e);if(i===ce.INTERSECTING||s===ce.INTERSECTING)n=!0;else{const a=r[0],u=r[1],h=r[2],d=r[3],f=t[0],g=t[1],_=e[0],m=e[1],v=(m-g)/(_-f);let x,w;s&ce.ABOVE&&!(i&ce.ABOVE)&&(x=_-(m-d)/v,n=x>=a&&x<=h),!n&&s&ce.RIGHT&&!(i&ce.RIGHT)&&(w=m-(_-h)*v,n=w>=u&&w<=d),!n&&s&ce.BELOW&&!(i&ce.BELOW)&&(x=_-(m-u)/v,n=x>=a&&x<=h),!n&&s&ce.LEFT&&!(i&ce.LEFT)&&(w=m-(_-a)*v,n=w>=u&&w<=d)}return n}function Ov(r,t,e,n){if(Zo(r))return Ds(e);let i=[];i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],t(i,i,2);const s=[],a=[];for(let u=0,h=i.length;u<h;u+=2)s.push(i[u]),a.push(i[u+1]);return bv(s,a,e)}function s1(r,t){const e=t.getExtent(),n=Un(r);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const i=Ot(e),a=Math.floor((n[0]-e[0])/i)*i;r[0]-=a,r[2]-=a}return r}function o1(r,t,e){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];s1(r,t);const i=Ot(n);if(Ot(r)>i&&!e)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+i,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-i,r[3]]]}return[r]}function Pv(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function ul(r,t){let e=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=t[n]){e=!1;break}return e}function xc(r,t){const e=Math.cos(t),n=Math.sin(t),i=r[0]*e-r[1]*n,s=r[1]*e+r[0]*n;return r[0]=i,r[1]=s,r}function Dv(r,t){return r[0]*=t,r[1]*=t,r}function a1(r,t){if(t.canWrapX()){const e=Ot(t.getExtent()),n=Bv(r,t,e);n&&(r[0]-=n*e)}return r}function Bv(r,t,e){const n=t.getExtent();let i=0;return t.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(e=e||Ot(n),i=Math.floor((r[0]-n[0])/e)),i}const Nv=63710088e-1;function Wg(r,t,e){e=e||Nv;const n=il(r[1]),i=il(t[1]),s=(i-n)/2,a=il(t[0]-r[0])/2,u=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(i);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function l1(...r){console.warn(...r)}let Wh=!0;function u1(r){Wh=!1}function wc(r,t){if(t!==void 0){for(let e=0,n=r.length;e<n;++e)t[e]=r[e];t=t}else t=r.slice();return t}function h1(r,t){if(t!==void 0&&r!==t){for(let e=0,n=r.length;e<n;++e)t[e]=r[e];r=t}return r}function Gv(r){Tv(r.getCode(),r),ll(r,r,wc)}function Vv(r){r.forEach(Gv)}function se(r){return typeof r=="string"?Rv(r):r||null}function Ug(r,t,e,n){r=se(r);let i;const s=r.getPointResolutionFunc();if(s)i=s(t,e);else{const a=r.getUnits();if(a=="degrees"&&!n||n=="degrees")i=t;else{const u=Ic(r,se("EPSG:4326"));if(u===h1&&a!=="degrees")i=t*r.getMetersPerUnit();else{let d=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];d=u(d,d,2);const f=Wg(d.slice(0,2),d.slice(2,4)),g=Wg(d.slice(4,6),d.slice(6,8));i=(f+g)/2}const h=r.getMetersPerUnit();h!==void 0&&(i/=h)}}return i}function Yg(r){Vv(r),r.forEach(function(t){r.forEach(function(e){t!==e&&ll(t,e,wc)})})}function zv(r,t,e,n){r.forEach(function(i){t.forEach(function(s){ll(i,s,e),ll(s,i,n)})})}function Sc(r,t){return r?typeof r=="string"?se(r):r:se(t)}function c1(r,t){return u1(),d1(r,"EPSG:4326","EPSG:3857")}function Lr(r,t){if(r===t)return!0;const e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||Ic(r,t)===wc)&&e}function Ic(r,t){const e=r.getCode(),n=t.getCode();let i=Av(e,n);return i||(i=h1),i}function Ls(r,t){const e=se(r),n=se(t);return Ic(e,n)}function d1(r,t,e){return Ls(t,e)(r,void 0,r.length)}function Uh(r,t,e,n){const i=Ls(t,e);return Ov(r,i,void 0)}function Yh(r,t){return r}function Ei(r,t){return Wh&&!ul(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Wh=!1,l1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function f1(r,t){return r}function kr(r,t){return r}function Wv(){Yg(Ng),Yg(Vg),zv(Vg,Ng,xv,wv)}Wv();function Xg(r,t,e){return function(n,i,s,a,u){if(!n)return;if(!i&&!t)return n;const h=t?0:s[0]*i,d=t?0:s[1]*i,f=u?u[0]:0,g=u?u[1]:0;let _=r[0]+h/2+f,m=r[2]-h/2+f,v=r[1]+d/2+g,x=r[3]-d/2+g;_>m&&(_=(m+_)/2,m=_),v>x&&(v=(x+v)/2,x=v);let w=re(n[0],_,m),S=re(n[1],v,x);if(a&&e&&i){const R=30*i;w+=-R*Math.log(1+Math.max(0,_-n[0])/R)+R*Math.log(1+Math.max(0,n[0]-m)/R),S+=-R*Math.log(1+Math.max(0,v-n[1])/R)+R*Math.log(1+Math.max(0,n[1]-x)/R)}return[w,S]}}function Uv(r){return r}function Rc(r,t,e,n){const i=Ot(t)/e[0],s=be(t)/e[1];return n?Math.min(r,Math.max(i,s)):Math.min(r,Math.min(i,s))}function Tc(r,t,e){let n=Math.min(r,t);const i=50;return n*=Math.log(1+i*Math.max(0,r/t-1))/i+1,e&&(n=Math.max(n,e),n/=Math.log(1+i*Math.max(0,e/r-1))/i+1),re(n,e/2,t*2)}function Yv(r,t,e,n){return t=t!==void 0?t:!0,function(i,s,a,u){if(i!==void 0){const h=r[0],d=r[r.length-1],f=e?Rc(h,e,a,n):h;if(u)return t?Tc(i,f,d):re(i,d,f);const g=Math.min(f,i),_=Math.floor(pc(r,g,s));return r[_]>f&&_<r.length-1?r[_+1]:r[_]}}}function Xv(r,t,e,n,i,s){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(a,u,h,d){if(a!==void 0){const f=i?Rc(t,i,h,s):t;if(d)return n?Tc(a,f,e):re(a,e,f);const g=1e-9,_=Math.ceil(Math.log(t/f)/Math.log(r)-g),m=-u*(.5-g)+.5,v=Math.min(f,a),x=Math.floor(Math.log(t/v)/Math.log(r)+m),w=Math.max(_,x),S=t/Math.pow(r,w);return re(S,e,f)}}}function Zg(r,t,e,n,i){return e=e!==void 0?e:!0,function(s,a,u,h){if(s!==void 0){const d=n?Rc(r,n,u,i):r;return!e||!h?re(s,t,d):Tc(s,d,t)}}}function Ac(r){if(r!==void 0)return 0}function Kg(r){if(r!==void 0)return r}function Zv(r){const t=2*Math.PI/r;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Kv(r){const t=il(5);return function(e,n){return n||e===void 0?e:Math.abs(e)<=t?0:e}}function g1(r){return Math.pow(r,3)}function Bs(r){return 1-g1(1-r)}function Hv(r){return 3*r*r-2*r*r*r}function jv(r){return r}new Array(6);function Wn(){return[1,0,0,1,0,0]}function qv(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Ce(r,t){const e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function Fi(r,t,e,n,i,s,a,u){const h=Math.sin(s),d=Math.cos(s);return r[0]=n*d,r[1]=i*h,r[2]=-n*h,r[3]=i*d,r[4]=a*n*d-u*n*h+t,r[5]=a*i*h+u*i*d+e,r}function p1(r,t){const e=$v(t);bt(e!==0,"Transformation matrix cannot be inverted");const n=t[0],i=t[1],s=t[2],a=t[3],u=t[4],h=t[5];return r[0]=a/e,r[1]=-i/e,r[2]=-s/e,r[3]=n/e,r[4]=(s*h-a*u)/e,r[5]=-(n*h-i*u)/e,r}function $v(r){return r[0]*r[3]-r[1]*r[2]}const Hg=[1e6,1e6,1e6,1e6,2,2];function Jv(r){return"matrix("+r.map((e,n)=>Math.round(e*Hg[n])/Hg[n]).join(", ")+")"}function lr(r,t,e,n,i,s){s=s||[];let a=0;for(let u=t;u<e;u+=n){const h=r[u],d=r[u+1];s[a++]=i[0]*h+i[2]*d+i[4],s[a++]=i[1]*h+i[3]*d+i[5]}return s&&s.length!=a&&(s.length=a),s}function _1(r,t,e,n,i,s,a){a=a||[];const u=Math.cos(i),h=Math.sin(i),d=s[0],f=s[1];let g=0;for(let _=t;_<e;_+=n){const m=r[_]-d,v=r[_+1]-f;a[g++]=d+m*u-v*h,a[g++]=f+m*h+v*u;for(let x=_+2;x<_+n;++x)a[g++]=r[x]}return a&&a.length!=g&&(a.length=g),a}function Qv(r,t,e,n,i,s,a,u){u=u||[];const h=a[0],d=a[1];let f=0;for(let g=t;g<e;g+=n){const _=r[g]-h,m=r[g+1]-d;u[f++]=h+i*_,u[f++]=d+s*m;for(let v=g+2;v<g+n;++v)u[f++]=r[v]}return u&&u.length!=f&&(u.length=f),u}function t4(r,t,e,n,i,s,a){a=a||[];let u=0;for(let h=t;h<e;h+=n){a[u++]=r[h]+i,a[u++]=r[h+1]+s;for(let d=h+2;d<h+n;++d)a[u++]=r[d]}return a&&a.length!=u&&(a.length=u),a}const jg=Wn();class m1 extends Xn{constructor(){super(),this.extent_=kn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=$0((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return at()}closestPointXY(t,e,n,i){return at()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return at()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Ds(e),this.extentRevision_=this.getRevision()}return kv(this.extent_,t)}rotate(t,e){at()}scale(t,e,n){at()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return at()}getType(){return at()}applyTransform(t){at()}intersectsExtent(t){return at()}translate(t,e){at()}transform(t,e){const n=se(t),i=n.getUnits()=="tile-pixels"?function(s,a,u){const h=n.getExtent(),d=n.getWorldExtent(),f=be(d)/be(h);return Fi(jg,d[0],d[3],f,-f,0,0,0),lr(s,0,s.length,u,jg,a),Ls(n,e)(s,a,u)}:Ls(n,e);return this.applyTransform(i),this}}class zr extends m1{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return Ec(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return at()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=qg(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){at()}setLayout(t,e,n){let i;if(t)i=qg(t);else{for(let s=0;s<n;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}i=e.length,t=Wr(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();_1(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=Un(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();Qv(i,0,i.length,s,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();t4(n,0,n.length,i,t,e,n),this.changed()}}}function Wr(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function qg(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function e4(r,t,e){const n=r.getFlatCoordinates();if(!n)return null;const i=r.getStride();return lr(n,0,n.length,i,t,e)}function $g(r,t,e,n,i,s,a){const u=r[t],h=r[t+1],d=r[e]-u,f=r[e+1]-h;let g;if(d===0&&f===0)g=t;else{const _=((i-u)*d+(s-h)*f)/(d*d+f*f);if(_>1)g=e;else if(_>0){for(let m=0;m<n;++m)a[m]=gn(r[t+m],r[e+m],_);a.length=n;return}else g=t}for(let _=0;_<n;++_)a[_]=r[g+_];a.length=n}function bc(r,t,e,n,i){let s=r[t],a=r[t+1];for(t+=n;t<e;t+=n){const u=r[t],h=r[t+1],d=Br(s,a,u,h);d>i&&(i=d),s=u,a=h}return i}function Lc(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s){const u=e[s];i=bc(r,t,u,n,i),t=u}return i}function n4(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s){const u=e[s];i=Lc(r,t,u,n,i),t=u[u.length-1]}return i}function Mc(r,t,e,n,i,s,a,u,h,d,f){if(t==e)return d;let g,_;if(i===0){if(_=Br(a,u,r[t],r[t+1]),_<d){for(g=0;g<n;++g)h[g]=r[t+g];return h.length=n,_}return d}f=f||[NaN,NaN];let m=t+n;for(;m<e;)if($g(r,m-n,m,n,a,u,f),_=Br(a,u,f[0],f[1]),_<d){for(d=_,g=0;g<n;++g)h[g]=f[g];h.length=n,m+=n}else m+=n*Math.max((Math.sqrt(_)-Math.sqrt(d))/i|0,1);if(s&&($g(r,e-n,t,n,a,u,f),_=Br(a,u,f[0],f[1]),_<d)){for(d=_,g=0;g<n;++g)h[g]=f[g];h.length=n}return d}function kc(r,t,e,n,i,s,a,u,h,d,f){f=f||[NaN,NaN];for(let g=0,_=e.length;g<_;++g){const m=e[g];d=Mc(r,t,m,n,i,s,a,u,h,d,f),t=m}return d}function i4(r,t,e,n,i,s,a,u,h,d,f){f=f||[NaN,NaN];for(let g=0,_=e.length;g<_;++g){const m=e[g];d=kc(r,t,m,n,i,s,a,u,h,d,f),t=m[m.length-1]}return d}function r4(r,t,e,n){for(let i=0,s=e.length;i<s;++i)r[t++]=e[i];return t}function Bl(r,t,e,n){for(let i=0,s=e.length;i<s;++i){const a=e[i];for(let u=0;u<n;++u)r[t++]=a[u]}return t}function Ko(r,t,e,n,i){i=i||[];let s=0;for(let a=0,u=e.length;a<u;++a){const h=Bl(r,t,e[a],n);i[s++]=h,t=h}return i.length=s,i}function y1(r,t,e,n,i){i=i||[];let s=0;for(let a=0,u=e.length;a<u;++a){const h=Ko(r,t,e[a],n,i[s]);h.length===0&&(h[0]=t),i[s++]=h,t=h[h.length-1]}return i.length=s,i}function Nl(r,t,e,n,i,s,a){const u=(e-t)/n;if(u<3){for(;t<e;t+=n)s[a++]=r[t],s[a++]=r[t+1];return a}const h=new Array(u);h[0]=1,h[u-1]=1;const d=[t,e-n];let f=0;for(;d.length>0;){const g=d.pop(),_=d.pop();let m=0;const v=r[_],x=r[_+1],w=r[g],S=r[g+1];for(let R=_+n;R<g;R+=n){const k=r[R],M=r[R+1],b=mv(k,M,v,x,w,S);b>m&&(f=R,m=b)}m>i&&(h[(f-t)/n]=1,_+n<f&&d.push(_,f),f+n<g&&d.push(f,g))}for(let g=0;g<u;++g)h[g]&&(s[a++]=r[t+g*n],s[a++]=r[t+g*n+1]);return a}function C1(r,t,e,n,i,s,a,u){for(let h=0,d=e.length;h<d;++h){const f=e[h];a=Nl(r,t,f,n,i,s,a),u.push(a),t=f}return a}function br(r,t){return t*Math.round(r/t)}function s4(r,t,e,n,i,s,a){if(t==e)return a;let u=br(r[t],i),h=br(r[t+1],i);t+=n,s[a++]=u,s[a++]=h;let d,f;do if(d=br(r[t],i),f=br(r[t+1],i),t+=n,t==e)return s[a++]=d,s[a++]=f,a;while(d==u&&f==h);for(;t<e;){const g=br(r[t],i),_=br(r[t+1],i);if(t+=n,g==d&&_==f)continue;const m=d-u,v=f-h,x=g-u,w=_-h;if(m*w==v*x&&(m<0&&x<m||m==x||m>0&&x>m)&&(v<0&&w<v||v==w||v>0&&w>v)){d=g,f=_;continue}s[a++]=d,s[a++]=f,u=d,h=f,d=g,f=_}return s[a++]=d,s[a++]=f,a}function Fc(r,t,e,n,i,s,a,u){for(let h=0,d=e.length;h<d;++h){const f=e[h];a=s4(r,t,f,n,i,s,a),u.push(a),t=f}return a}function o4(r,t,e,n,i,s,a,u){for(let h=0,d=e.length;h<d;++h){const f=e[h],g=[];a=Fc(r,t,f,n,i,s,a,g),u.push(g),t=f[f.length-1]}return a}function rr(r,t,e,n,i){i=i!==void 0?i:[];let s=0;for(let a=t;a<e;a+=n)i[s++]=r.slice(a,a+n);return i.length=s,i}function To(r,t,e,n,i){i=i!==void 0?i:[];let s=0;for(let a=0,u=e.length;a<u;++a){const h=e[a];i[s++]=rr(r,t,h,n,i[s]),t=h}return i.length=s,i}function Xh(r,t,e,n,i){i=i!==void 0?i:[];let s=0;for(let a=0,u=e.length;a<u;++a){const h=e[a];i[s++]=h.length===1&&h[0]===t?[]:To(r,t,h,n,i[s]),t=h[h.length-1]}return i.length=s,i}function v1(r,t,e,n){let i=0,s=r[e-n],a=r[e-n+1];for(;t<e;t+=n){const u=r[t],h=r[t+1];i+=a*u-s*h,s=u,a=h}return i/2}function E1(r,t,e,n){let i=0;for(let s=0,a=e.length;s<a;++s){const u=e[s];i+=v1(r,t,u,n),t=u}return i}function a4(r,t,e,n){let i=0;for(let s=0,a=e.length;s<a;++s){const u=e[s];i+=E1(r,t,u,n),t=u[u.length-1]}return i}class Ao extends zr{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Ao(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<Gr(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return v1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Nl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ao(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bl(this.flatCoordinates,0,t,this.stride),this.changed()}}class Oi extends zr{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Oi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const s=this.flatCoordinates,a=Br(t,e,s[0],s[1]);if(a<i){const u=this.stride;for(let h=0;h<u;++h)n[h]=s[h];return n.length=u,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return e1(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return vc(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=r4(this.flatCoordinates,0,t,this.stride),this.changed()}}function l4(r,t,e,n,i){return!r1(i,function(a){return!Fr(r,t,e,n,a[0],a[1])})}function Fr(r,t,e,n,i,s){let a=0,u=r[e-n],h=r[e-n+1];for(;t<e;t+=n){const d=r[t],f=r[t+1];h<=s?f>s&&(d-u)*(s-h)-(i-u)*(f-h)>0&&a++:f<=s&&(d-u)*(s-h)-(i-u)*(f-h)<0&&a--,u=d,h=f}return a!==0}function Oc(r,t,e,n,i,s){if(e.length===0||!Fr(r,t,e[0],n,i,s))return!1;for(let a=1,u=e.length;a<u;++a)if(Fr(r,e[a-1],e[a],n,i,s))return!1;return!0}function u4(r,t,e,n,i,s){if(e.length===0)return!1;for(let a=0,u=e.length;a<u;++a){const h=e[a];if(Oc(r,t,h,n,i,s))return!0;t=h[h.length-1]}return!1}function Pc(r,t,e,n,i,s,a){let u,h,d,f,g,_,m;const v=i[s+1],x=[];for(let R=0,k=e.length;R<k;++R){const M=e[R];for(f=r[M-n],_=r[M-n+1],u=t;u<M;u+=n)g=r[u],m=r[u+1],(v<=_&&m<=v||_<=v&&v<=m)&&(d=(v-_)/(m-_)*(g-f)+f,x.push(d)),f=g,_=m}let w=NaN,S=-1/0;for(x.sort(Ai),f=x[0],u=1,h=x.length;u<h;++u){g=x[u];const R=Math.abs(g-f);R>S&&(d=(f+g)/2,Oc(r,t,e,n,d,v)&&(w=d,S=R)),f=g}return isNaN(w)&&(w=i[s]),a?(a.push(w,v,S),a):[w,v,S]}function x1(r,t,e,n,i){let s=[];for(let a=0,u=e.length;a<u;++a){const h=e[a];s=Pc(r,t,h,n,i,2*a,s),t=h[h.length-1]}return s}function w1(r,t,e,n,i){let s;for(t+=n;t<e;t+=n)if(s=i(r.slice(t-n,t),r.slice(t,t+n)),s)return s;return!1}function Gl(r,t,e,n,i){const s=i1(kn(),r,t,e,n);return tn(i,s)?Mr(i,s)||s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:w1(r,t,e,n,function(a,u){return Fv(i,a,u)}):!1}function h4(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s){if(Gl(r,t,e[s],n,i))return!0;t=e[s]}return!1}function S1(r,t,e,n,i){return!!(Gl(r,t,e,n,i)||Fr(r,t,e,n,i[0],i[1])||Fr(r,t,e,n,i[0],i[3])||Fr(r,t,e,n,i[2],i[1])||Fr(r,t,e,n,i[2],i[3]))}function I1(r,t,e,n,i){if(!S1(r,t,e[0],n,i))return!1;if(e.length===1)return!0;for(let s=1,a=e.length;s<a;++s)if(l4(r,e[s-1],e[s],n,i)&&!Gl(r,e[s-1],e[s],n,i))return!1;return!0}function c4(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s){const u=e[s];if(I1(r,t,u,n,i))return!0;t=u[u.length-1]}return!1}function d4(r,t,e,n){for(;t<e-n;){for(let i=0;i<n;++i){const s=r[t+i];r[t+i]=r[e-n+i],r[e-n+i]=s}t+=n,e-=n}}function Dc(r,t,e,n){let i=0,s=r[e-n],a=r[e-n+1];for(;t<e;t+=n){const u=r[t],h=r[t+1];i+=(u-s)*(h+a),s=u,a=h}return i===0?void 0:i>0}function Bc(r,t,e,n,i){i=i!==void 0?i:!1;for(let s=0,a=e.length;s<a;++s){const u=e[s],h=Dc(r,t,u,n);if(s===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;t=u}return!0}function R1(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s){const u=e[s];if(!Bc(r,t,u,n,i))return!1;u.length&&(t=u[u.length-1])}return!0}function hl(r,t,e,n,i){i=i!==void 0?i:!1;for(let s=0,a=e.length;s<a;++s){const u=e[s],h=Dc(r,t,u,n);(s===0?i&&h||!i&&!h:i&&!h||!i&&h)&&d4(r,t,u,n),t=u}return t}function Zh(r,t,e,n,i){for(let s=0,a=e.length;s<a;++s)t=hl(r,t,e[s],n,i);return t}function f4(r,t){const e=[];let n=0,i=0,s;for(let a=0,u=t.length;a<u;++a){const h=t[a],d=Dc(r,n,h,2);if(s===void 0&&(s=d),d===s)e.push(t.slice(i,a+1));else{if(e.length===0)continue;e[e.length-1].push(t[i])}i=a+1,n=h}return e}class cr extends zr{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ri(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new cr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Gr(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Oc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return E1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),hl(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,To(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Un(this.getExtent());this.flatInteriorPoint_=Pc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Oi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ao(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let s=0;for(let a=0,u=n.length;a<u;++a){const h=n[a],d=new Ao(e.slice(s,h),t);i.push(d),s=h}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Bc(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=hl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Fc(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new cr(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return I1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ko(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Jg(r){if(Zo(r))throw new Error("Cannot create polygon from empty extent");const t=r[0],e=r[1],n=r[2],i=r[3],s=[t,e,t,i,n,i,n,e,t,e];return new cr(s,"XY",[s.length])}const ph=0;class Jn extends Xn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Sc(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&u1(),t.center&&(t.center=Ei(t.center,this.projection_)),t.extent&&(t.extent=kr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const u in Vn)delete e[u];this.setProperties(e,!0);const n=p4(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=g4(t),s=n.constraint,a=_4(t);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-e[3]+e[1]-i[1]),u=s/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+a,n[1]-u])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=Ei(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Ei(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let i=0;for(;i<e&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===e){n&&Ha(n,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_;const d=[];for(;i<e;++i){const f=arguments[i],g={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||Hv,callback:n};if(f.center&&(g.sourceCenter=a,g.targetCenter=f.center.slice(),a=g.targetCenter),f.zoom!==void 0?(g.sourceResolution=u,g.targetResolution=this.getResolutionForZoom(f.zoom),u=g.targetResolution):f.resolution&&(g.sourceResolution=u,g.targetResolution=f.resolution,u=g.targetResolution),f.rotation!==void 0){g.sourceRotation=h;const _=Ss(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=h+_,h=g.targetRotation}m4(g)?g.complete=!0:s+=g.duration,d.push(g)}this.animations_.push(d),this.setHint(Ae.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ae.ANIMATING]>0}getInteracting(){return this.hints_[Ae.INTERACTING]>0}cancelAnimations(){this.setHint(Ae.ANIMATING,-this.hints_[Ae.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const i=this.animations_[e];if(i[0].callback&&Ha(i[0].callback,!1),!t)for(let s=0,a=i.length;s<a;++s){const u=i[s];if(!u.complete){t=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let a=0,u=i.length;a<u;++a){const h=i[a];if(h.complete)continue;const d=t-h.start;let f=h.duration>0?d/h.duration:1;f>=1?(h.complete=!0,f=1):s=!1;const g=h.easing(f);if(h.sourceCenter){const _=h.sourceCenter[0],m=h.sourceCenter[1],v=h.targetCenter[0],x=h.targetCenter[1];this.nextCenter_=h.targetCenter;const w=_+g*(v-_),S=m+g*(x-m);this.targetCenter_=[w,S]}if(h.sourceResolution&&h.targetResolution){const _=g===1?h.targetResolution:h.sourceResolution+g*(h.targetResolution-h.sourceResolution);if(h.anchor){const m=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(_,0,m,!0);this.targetCenter_=this.calculateCenterZoom(v,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const _=g===1?Ss(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+g*(h.targetRotation-h.sourceRotation);if(h.anchor){const m=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(m,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),e=!0,!h.complete)break}if(s){this.animations_[n]=null,this.setHint(Ae.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&Ha(a,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-e[0],i[1]-e[1]],xc(n,t-this.getRotation()),Pv(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=e[0]-t*(e[0]-i[0])/s,u=e[1]-t*(e[1]-i[1])/s;n=[a,u]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Yh(t,this.getProjection())}getCenterInternal(){return this.get(Vn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return f1(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();bt(e,"The view center is not defined");const n=this.getResolution();bt(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return bt(i!==void 0,"The view rotation is not defined"),Vh(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Vn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(kr(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Ot(t)/e[0],i=be(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(s){return e/Math.pow(t,s*i)}}getRotation(){return this.get(Vn.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/e;return function(a){return Math.log(n/a)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=_h(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],e,n)}return{center:i.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,i;if(this.resolutions_){const s=pc(this.resolutions_,t,1);e=s,n=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=n/this.resolutions_[s+1]}else n=this.maxResolution_,i=this.zoomFactor_;return e+Math.log(n/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=re(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,re(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(bt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){bt(!Zo(t),"Cannot fit empty extent provided as `geometry`");const i=kr(t,this.getProjection());n=Jg(i)}else if(t.getType()==="Circle"){const i=kr(t.getExtent(),this.getProjection());n=Jg(i),n.rotate(this.getRotation(),Un(i))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),s=t.getFlatCoordinates(),a=t.getStride();let u=1/0,h=1/0,d=-1/0,f=-1/0;for(let g=0,_=s.length;g<_;g+=a){const m=s[g]*n-s[g+1]*i,v=s[g]*i+s[g+1]*n;u=Math.min(u,m),h=Math.min(h,v),d=Math.max(d,m),f=Math.max(f,v)}return[u,h,d,f]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const i=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let a;e.minResolution!==void 0?a=e.minResolution:e.maxZoom!==void 0?a=this.getResolutionForZoom(e.maxZoom):a=0;const u=this.rotatedExtentForGeometry(t);let h=this.getResolutionForExtentInternal(u,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);h=isNaN(h)?a:Math.max(h,a),h=this.getConstrainedResolution(h,s?0:1);const d=this.getRotation(),f=Math.sin(d),g=Math.cos(d),_=Un(u);_[0]+=(i[1]-i[3])/2*h,_[1]+=(i[0]-i[2])/2*h;const m=_[0]*g-_[1]*f,v=_[1]*g+_[0]*f,x=this.getConstrainedCenter([m,v],h),w=e.callback?e.callback:As;e.duration!==void 0?this.animateInternal({resolution:h,center:x,duration:e.duration,easing:e.easing},w):(this.targetResolution_=h,this.targetCenter_=x,this.applyTargetState_(!1,!0),Ha(w,!0))}centerOn(t,e,n){this.centerOnInternal(Ei(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(_h(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let s;const a=this.padding_;if(a&&t){const u=this.getViewportSizeMinusPadding_(-n),h=_h(t,i,[u[0]/2+a[3],u[1]/2+a[0]],e,n);s=[t[0]-h[0],t[1]-h[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Yh(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Ei(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Ei(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ei(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,n),u=this.constraints_.center(this.targetCenter_,a,s,n,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Vn.ROTATION)!==i&&this.set(Vn.ROTATION,i),this.get(Vn.RESOLUTION)!==a&&(this.set(Vn.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(Vn.CENTER)||!ul(this.get(Vn.CENTER),u))&&this.set(Vn.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const i=e||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,i,a),h=this.constraints_.center(this.targetCenter_,u,a,!1,this.calculateCenterShift(this.targetCenter_,u,s,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=s,this.targetCenter_=h,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==s||!this.getCenterInternal()||!ul(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:h,resolution:u,duration:t,easing:Bs,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ae.INTERACTING,1)}endInteraction(t,e,n){n=n&&Ei(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(Ae.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Ha(r,t){setTimeout(function(){r(t)},0)}function g4(r){if(r.extent!==void 0){const e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Xg(r.extent,r.constrainOnlyCenter,e)}const t=Sc(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Xg(e,!1,!1)}return Uv}function p4(r){let t,e,n,a=r.minZoom!==void 0?r.minZoom:ph,u=r.maxZoom!==void 0?r.maxZoom:28;const h=r.zoomFactor!==void 0?r.zoomFactor:2,d=r.multiWorld!==void 0?r.multiWorld:!1,f=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,g=r.showFullExtent!==void 0?r.showFullExtent:!1,_=Sc(r.projection,"EPSG:3857"),m=_.getExtent();let v=r.constrainOnlyCenter,x=r.extent;if(!d&&!x&&_.isGlobal()&&(v=!1,x=m),r.resolutions!==void 0){const w=r.resolutions;e=w[a],n=w[u]!==void 0?w[u]:w[w.length-1],r.constrainResolution?t=Yv(w,f,!v&&x,g):t=Zg(e,n,f,!v&&x,g)}else{const S=(m?Math.max(Ot(m),be(m)):360*yc.degrees/_.getMetersPerUnit())/mc/Math.pow(2,ph),R=S/Math.pow(2,28-ph);e=r.maxResolution,e!==void 0?a=0:e=S/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=e/Math.pow(h,u):n=S/Math.pow(h,u):n=R),u=a+Math.floor(Math.log(e/n)/Math.log(h)),n=e/Math.pow(h,u-a),r.constrainResolution?t=Xv(h,e,n,f,!v&&x,g):t=Zg(e,n,f,!v&&x,g)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:a,zoomFactor:h}}function _4(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const e=r.constrainRotation;return e===void 0||e===!0?Kv():e===!1?Kg:typeof e=="number"?Zv(e):Kg}return Ac}function m4(r){return!(r.sourceCenter&&r.targetCenter&&!ul(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function _h(r,t,e,n,i){const s=Math.cos(-i);let a=Math.sin(-i),u=r[0]*s-r[1]*a,h=r[1]*s+r[0]*a;u+=(t[0]/2-e[0])*n,h+=(e[1]-t[1]/2)*n,a=-a;const d=u*s-h*a,f=h*s+u*a;return[d,f]}class Vl extends J0{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Dt.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Dt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Wt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Tt(t,pt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof Jn?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;e.layerStatesArray?i=e.layerStatesArray.find(a=>a.layer===this):i=this.getLayerState();const s=this.getExtent();return Nc(i,e.viewState)&&(!s||tn(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const i=t instanceof Jn?t.getViewStateAndExtent():t;let s=e(i);return Array.isArray(s)||(s=[s]),s}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Dt.MAP,t)}getMapInternal(){return this.get(Dt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Wt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Wt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Tt(t,bn.PRECOMPOSE,function(e){const i=e.frameState.layerStatesArray,s=this.getLayerState(!1);bt(!i.some(function(a){return a.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(s)},this),this.mapRenderKey_=Tt(this,pt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Dt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Nc(r,t){if(!r.visible)return!1;const e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;const n=t.zoom;return n>r.minZoom&&n<=r.maxZoom}function y4(r,t,e,n,i){T1(r,t,e||0,n||r.length-1,i||C4)}function T1(r,t,e,n,i){for(;n>e;){if(n-e>600){var s=n-e+1,a=t-e+1,u=Math.log(s),h=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*h*(s-h)/s)*(a-s/2<0?-1:1),f=Math.max(e,Math.floor(t-a*h/s+d)),g=Math.min(n,Math.floor(t+(s-a)*h/s+d));T1(r,t,f,g,i)}var _=r[t],m=e,v=n;for(uo(r,e,t),i(r[n],_)>0&&uo(r,e,n);m<v;){for(uo(r,m,v),m++,v--;i(r[m],_)<0;)m++;for(;i(r[v],_)>0;)v--}i(r[e],_)===0?uo(r,e,v):(v++,uo(r,v,n)),v<=t&&(e=v+1),t<=v&&(n=v-1)}}function uo(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function C4(r,t){return r<t?-1:r>t?1:0}let A1=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!qa(t,e))return n;const i=this.toBBox,s=[];for(;e;){for(let a=0;a<e.children.length;a++){const u=e.children[a],h=e.leaf?i(u):u;qa(t,h)&&(e.leaf?n.push(u):yh(t,h)?this._all(u,n):s.push(u))}e=s.pop()}return n}collides(t){let e=this.data;if(!qa(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const s=e.children[i],a=e.leaf?this.toBBox(s):s;if(qa(t,a)){if(e.leaf||yh(t,a))return!0;n.push(s)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=_s([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),s=[],a=[];let u,h,d;for(;n||s.length;){if(n||(n=s.pop(),h=s[s.length-1],u=a.pop(),d=!0),n.leaf){const f=v4(t,n.children,e);if(f!==-1)return n.children.splice(f,1),s.push(n),this._condense(s),this}!d&&!n.leaf&&yh(n,i)?(s.push(n),a.push(u),u=0,h=n,n=n.children[0]):h?(u++,n=h.children[u],d=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const s=n-e+1;let a=this._maxEntries,u;if(s<=a)return u=_s(t.slice(e,n+1)),cs(u,this.toBBox),u;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),u=_s([]),u.leaf=!1,u.height=i;const h=Math.ceil(s/a),d=h*Math.ceil(Math.sqrt(a));Qg(t,e,n,d,this.compareMinX);for(let f=e;f<=n;f+=d){const g=Math.min(f+d-1,n);Qg(t,f,g,h,this.compareMinY);for(let _=f;_<=g;_+=h){const m=Math.min(_+h-1,g);u.children.push(this._build(t,_,m,i-1))}}return cs(u,this.toBBox),u}_chooseSubtree(t,e,n,i){for(;i.push(e),!(e.leaf||i.length-1===n);){let s=1/0,a=1/0,u;for(let h=0;h<e.children.length;h++){const d=e.children[h],f=mh(d),g=w4(t,d)-f;g<a?(a=g,s=f<s?f:s,u=d):g===a&&f<s&&(s=f,u=d)}e=u||e.children[0]}return e}_insert(t,e,n){const i=n?t:this.toBBox(t),s=[],a=this._chooseSubtree(i,this.data,e,s);for(a.children.push(t),yo(a,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)}_split(t,e){const n=t[e],i=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,i);const a=this._chooseSplitIndex(n,s,i),u=_s(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,cs(n,this.toBBox),cs(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(n,u)}_splitRoot(t,e){this.data=_s([t,e]),this.data.height=t.height+1,this.data.leaf=!1,cs(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,s=1/0,a=1/0;for(let u=e;u<=n-e;u++){const h=mo(t,0,u,this.toBBox),d=mo(t,u,n,this.toBBox),f=S4(h,d),g=mh(h)+mh(d);f<s?(s=f,i=u,a=g<a?g:a):f===s&&g<a&&(a=g,i=u)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:E4,s=t.leaf?this.compareMinY:x4,a=this._allDistMargin(t,e,n,i),u=this._allDistMargin(t,e,n,s);a<u&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const s=this.toBBox,a=mo(t,0,e,s),u=mo(t,n-e,n,s);let h=ja(a)+ja(u);for(let d=e;d<n-e;d++){const f=t.children[d];yo(a,t.leaf?s(f):f),h+=ja(a)}for(let d=n-e-1;d>=e;d--){const f=t.children[d];yo(u,t.leaf?s(f):f),h+=ja(u)}return h}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)yo(e[i],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():cs(t[e],this.toBBox)}};function v4(r,t,e){if(!e)return t.indexOf(r);for(let n=0;n<t.length;n++)if(e(r,t[n]))return n;return-1}function cs(r,t){mo(r,0,r.children.length,t,r)}function mo(r,t,e,n,i){i||(i=_s(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=t;s<e;s++){const a=r.children[s];yo(i,r.leaf?n(a):a)}return i}function yo(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function E4(r,t){return r.minX-t.minX}function x4(r,t){return r.minY-t.minY}function mh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function ja(r){return r.maxX-r.minX+(r.maxY-r.minY)}function w4(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function S4(r,t){const e=Math.max(r.minX,t.minX),n=Math.max(r.minY,t.minY),i=Math.min(r.maxX,t.maxX),s=Math.min(r.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,s-n)}function yh(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function qa(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function _s(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Qg(r,t,e,n,i){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=n)continue;const a=t+Math.ceil((e-t)/n/2)*n;y4(r,a,t,e,i),s.push(t,a,a,e)}}const xt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function t0(r){return r[0]>0&&r[1]>0}function I4(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function _n(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}class zl{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=_n(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new zl({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return at()}getImage(t){return at()}getHitDetectionImage(){return at()}getPixelRatio(t){return 1}getImageState(){return at()}getImageSize(){return at()}getOrigin(){return at()}getSize(){return at()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=_n(t)}listenImageChange(t){at()}load(){at()}unlistenImageChange(t){at()}ready(){return Promise.resolve()}}const bo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var ve={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};ve.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};ve.max=ve.whitepoint[2].D65;ve.rgb=function(r,t){t=t||ve.whitepoint[2].E;var e=r[0]/t[0],n=r[1]/t[1],i=r[2]/t[2],s,a,u;return s=e*3.240969941904521+n*-1.537383177570093+i*-.498610760293,a=e*-.96924363628087+n*1.87596750150772+i*.041555057407175,u=e*.055630079696993+n*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),u=Math.min(Math.max(0,u),1),[s*255,a*255,u*255]};bo.xyz=function(r,t){var e=r[0]/255,n=r[1]/255,i=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=e*.41239079926595+n*.35758433938387+i*.18048078840183,a=e*.21263900587151+n*.71516867876775+i*.072192315360733,u=e*.019330818715591+n*.11919477979462+i*.95053215224966;return t=t||ve.whitepoint[2].E,[s*t[0],a*t[1],u*t[2]]};const Gc={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,t,e){var n,i,s,a,u,h,d,f,g,_,m,v,x;if(s=r[0],a=r[1],u=r[2],s===0)return[0,0,0];var w=.0011070564598794539;return t=t||"D65",e=e||2,g=ve.whitepoint[e][t][0],_=ve.whitepoint[e][t][1],m=ve.whitepoint[e][t][2],v=4*g/(g+15*_+3*m),x=9*_/(g+15*_+3*m),n=a/(13*s)+v||0,i=u/(13*s)+x||0,d=s>8?_*Math.pow((s+16)/116,3):_*s*w,h=d*9*n/(4*i)||0,f=d*(12-3*n-20*i)/(4*i)||0,[h,d,f]}};ve.luv=function(r,t,e){var n,i,s,a,u,h,d,f,g,_,m,v,x,w=.008856451679035631,S=903.2962962962961;t=t||"D65",e=e||2,g=ve.whitepoint[e][t][0],_=ve.whitepoint[e][t][1],m=ve.whitepoint[e][t][2],v=4*g/(g+15*_+3*m),x=9*_/(g+15*_+3*m),h=r[0],d=r[1],f=r[2],n=4*h/(h+15*d+3*f)||0,i=9*d/(h+15*d+3*f)||0;var R=d/_;return s=R<=w?S*R:116*Math.pow(R,1/3)-16,a=13*s*(n-v),u=13*s*(i-x),[s,a,u]};var b1={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var t=r[0],e=r[1],n=r[2],i,s,a;return a=n/360*2*Math.PI,i=e*Math.cos(a),s=e*Math.sin(a),[t,i,s]},xyz:function(r){return Gc.xyz(b1.luv(r))}};Gc.lchuv=function(r){var t=r[0],e=r[1],n=r[2],i=Math.sqrt(e*e+n*n),s=Math.atan2(n,e),a=s*360/2/Math.PI;return a<0&&(a+=360),[t,i,a]};ve.lchuv=function(r){return Gc.lchuv(ve.luv(r))};const e0={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var n0={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function R4(r){var f,g;var t,e=[],n=1,i;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),e0[r])e=e0[r].slice(),i="rgb";else if(r==="transparent")n=0,i="rgb",e=[0,0,0];else if(r[0]==="#"){var s=r.slice(1),a=s.length,u=a<=4;n=1,u?(e=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(n=parseInt(s[3]+s[3],16)/255)):(e=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(n=parseInt(s[6]+s[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),i="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var h=t[1];i=h.replace(/a$/,"");var d=i==="cmyk"?4:i==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=e.shift()),e=e.map(function(_,m){if(_[_.length-1]==="%")return _=parseFloat(_)/100,m===3?_:i==="rgb"?_*255:i[0]==="h"||i[0]==="l"&&!m?_*100:i==="lab"?_*125:i==="lch"?m<2?_*150:_*360:i[0]==="o"&&!m?_:i==="oklab"?_*.4:i==="oklch"?m<2?_*.4:_*360:_;if(i[m]==="h"||m===2&&i[i.length-1]==="h"){if(n0[_]!==void 0)return n0[_];if(_.endsWith("deg"))return parseFloat(_);if(_.endsWith("turn"))return parseFloat(_)*360;if(_.endsWith("grad"))return parseFloat(_)*360/400;if(_.endsWith("rad"))return parseFloat(_)*180/Math.PI}return _==="none"?0:parseFloat(_)}),n=e.length>d?e.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(e=r.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),i=((g=(f=r.match(/([a-z])/ig))==null?void 0:f.join(""))==null?void 0:g.toLowerCase())||"rgb");return{space:i,values:e,alpha:n}}const Ch={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var t=r[0]/360,e=r[1]/100,n=r[2]/100,i,s,a,u,h,d=0;if(e===0)return h=n*255,[h,h,h];for(s=n<.5?n*(1+e):n+e-n*e,i=2*n-s,u=[0,0,0];d<3;)a=t+1/3*-(d-1),a<0?a++:a>1&&a--,h=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,u[d++]=h*255;return u}};bo.hsl=function(r){var t=r[0]/255,e=r[1]/255,n=r[2]/255,i=Math.min(t,e,n),s=Math.max(t,e,n),a=s-i,u,h,d;return s===i?u=0:t===s?u=(e-n)/a:e===s?u=2+(n-t)/a:n===s&&(u=4+(t-e)/a),u=Math.min(u*60,360),u<0&&(u+=360),d=(i+s)/2,s===i?h=0:d<=.5?h=a/(s+i):h=a/(2-s-i),[u,h*100,d*100]};function T4(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var t,e=R4(r);if(!e.space)return[];const n=e.space[0]==="h"?Ch.min:bo.min,i=e.space[0]==="h"?Ch.max:bo.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],n[0]),i[0]),t[1]=Math.min(Math.max(e.values[1],n[1]),i[1]),t[2]=Math.min(Math.max(e.values[2],n[2]),i[2]),e.space[0]==="h"&&(t=Ch.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}function A4(r){return typeof r=="string"?r:zc(r)}const b4=1024,ho={};let vh=0;function L4(r){if(r.length===4)return r;const t=r.slice();return t[3]=1,t}function i0(r){const t=ve.lchuv(bo.xyz(r));return t[3]=r[3],t}function M4(r){const t=ve.rgb(b1.xyz(r));return t[3]=r[3],t}function Vc(r){if(ho.hasOwnProperty(r))return ho[r];if(vh>=b4){let e=0;for(const n in ho)e++&3||(delete ho[n],--vh)}const t=T4(r);if(t.length!==4)throw new Error('Failed to parse "'+r+'" as color');for(const e of t)if(isNaN(e))throw new Error('Failed to parse "'+r+'" as color');return L1(t),ho[r]=t,++vh,t}function Lo(r){return Array.isArray(r)?r:Vc(r)}function L1(r){return r[0]=re(r[0]+.5|0,0,255),r[1]=re(r[1]+.5|0,0,255),r[2]=re(r[2]+.5|0,0,255),r[3]=re(r[3],0,1),r}function zc(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const i=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+t+","+e+","+n+","+i+")"}function k4(r){try{return Vc(r),!0}catch{return!1}}const dr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",F4=dr.includes("firefox"),O4=dr.includes("safari")&&!dr.includes("chrom");O4&&(dr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(dr));const P4=dr.includes("webkit")&&!dr.includes("edge"),M1=dr.includes("macintosh"),k1=typeof devicePixelRatio<"u"?devicePixelRatio:1,F1=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,O1=typeof Image<"u"&&Image.prototype.decode,P1=function(){let r=!1;try{const t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r}();function Ee(r,t,e,n){let i;return e&&e.length?i=e.shift():F1?i=new OffscreenCanvas(r||300,t||300):i=document.createElement("canvas"),r&&(i.width=r),t&&(i.height=t),i.getContext("2d",n)}let Eh;function cl(){return Eh||(Eh=Ee(1,1)),Eh}function Wl(r){const t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function D4(r){let t=r.offsetWidth;const e=getComputedStyle(r);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function B4(r){let t=r.offsetHeight;const e=getComputedStyle(r);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function r0(r,t){const e=t.parentNode;e&&e.replaceChild(r,t)}function dl(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function D1(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function N4(r,t){const e=r.childNodes;for(let n=0;;++n){const i=e[n],s=t[n];if(!i&&!s)break;if(i!==s){if(!i){r.appendChild(s);continue}if(!s){r.removeChild(i),--n;continue}r.insertBefore(s,i)}}}function G4(r,t,e){const n=r;let i=!0,s=!1,a=!1;const u=[al(n,pt.LOAD,function(){a=!0,s||t()})];return n.src&&O1?(s=!0,n.decode().then(function(){i&&t()}).catch(function(h){i&&(a?t():e())})):u.push(al(n,pt.ERROR,e)),function(){i=!1,u.forEach(Wt)}}function V4(r,t){return new Promise((e,n)=>{function i(){a(),e(r)}function s(){a(),n(new Error("Image load error"))}function a(){r.removeEventListener("load",i),r.removeEventListener("error",s)}r.addEventListener("load",i),r.addEventListener("error",s)})}function z4(r,t){return t&&(r.src=t),r.src&&O1?new Promise((e,n)=>r.decode().then(()=>e(r)).catch(i=>r.complete&&r.width?e(r):n(i))):V4(r)}class W4{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=xh(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=xh(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,i,s){const a=xh(t,e,n),u=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===xt.IDLE&&i.load(),i.getImageState()===xt.LOADING?i.ready().then(()=>{this.patternCache_[a]=cl().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=cl().createPattern(i.getImage(1),"repeat")),u||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function xh(r,t,e){const n=e?Lo(e):"null";return t+":"+r+":"+n}const ei=new W4;let co=null;class U4 extends Fl{constructor(t,e,n,i,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=i===void 0?xt.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===xt.LOADED){co||(co=Ee(1,1,void 0,{willReadFrequently:!0})),co.drawImage(this.image_,0,0);try{co.getImageData(0,0,1,1),this.tainted_=!1}catch{co=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pt.CHANGE)}handleImageError_(){this.imageState_=xt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=xt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Ee(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===xt.IDLE){this.image_||this.initializeImage_(),this.imageState_=xt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&z4(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==xt.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=A4(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{this.imageState_===xt.LOADED||this.imageState_===xt.ERROR?t():this.addEventListener(pt.CHANGE,function e(){(this.imageState_===xt.LOADED||this.imageState_===xt.ERROR)&&(this.removeEventListener(pt.CHANGE,e),t())})})),this.ready_}}function Wc(r,t,e,n,i,s){let a=t===void 0?void 0:ei.get(t,e,i);return a||(a=new U4(r,r&&"src"in r?r.src||void 0:t,e,n,i),ei.set(t,e,i,a,s)),s&&a&&!ei.getPattern(t,e,i)&&ei.set(t,e,i,a,s),a}function ni(r){return r?Array.isArray(r)?zc(r):typeof r=="object"&&"src"in r?Y4(r):r:null}function Y4(r){if(!r.offset||!r.size)return ei.getPattern(r.src,"anonymous",r.color);const t=r.src+":"+r.offset,e=ei.getPattern(t,void 0,r.color);if(e)return e;const n=ei.get(r.src,"anonymous",null);if(n.getImageState()!==xt.LOADED)return null;const i=Ee(r.size[0],r.size[1]);return i.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Wc(i.canvas,t,void 0,xt.LOADED,r.color,!0),ei.getPattern(t,void 0,r.color)}const $a="ol-hidden",X4="ol-selectable",Ul="ol-unselectable",Uc="ol-control",s0="ol-collapsed",Z4=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),o0=["style","variant","weight","size","lineHeight","family"],B1=function(r){const t=r.match(Z4);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,i=o0.length;n<i;++n){const s=t[n+1];s!==void 0&&(e[o0[n]]=s)}return e.families=e.family.split(/,\s?/),e},N1="10px sans-serif",Qe="#000",Ms="round",bi=[],Li=0,ks="round",Mo=10,ko="#000",Fo="center",fl="middle",Or=[0,0,0,0],Oo=1,xi=new Xn;let ms=null,Kh;const Hh={},K4=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function u(d,f,g){let _=!0;for(let m=0;m<n;++m){const v=e[m];if(a=gl(d+" "+f+" "+t+v,i),g!=v){const x=gl(d+" "+f+" "+t+g+","+v,i);_=_&&x!=a}}return!!_}function h(){let d=!0;const f=xi.getKeys();for(let g=0,_=f.length;g<_;++g){const m=f[g];xi.get(m)<100&&(u.apply(this,m.split(`
`))?(Uo(Hh),ms=null,Kh=void 0,xi.set(m,100)):(xi.set(m,xi.get(m)+1,!0),d=!1))}d&&(clearInterval(s),s=void 0)}return function(d){const f=B1(d);if(!f)return;const g=f.families;for(let _=0,m=g.length;_<m;++_){const v=g[_],x=f.style+`
`+f.weight+`
`+v;xi.get(x)===void 0&&(xi.set(x,100,!0),u(f.style,f.weight,v)||(xi.set(x,0,!0),s===void 0&&(s=setInterval(h,32))))}}}(),H4=function(){let r;return function(t){let e=Hh[t];if(e==null){if(F1){const n=B1(t),i=G1(t,"g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);Hh[t]=e}return e}}();function G1(r,t){return ms||(ms=Ee(1,1)),r!=Kh&&(ms.font=r,Kh=ms.font),ms.measureText(t)}function gl(r,t){return G1(r,t).width}function a0(r,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((i,s)=>Math.max(i,gl(r,s)),0);return e[t]=n,n}function j4(r,t){const e=[],n=[],i=[];let s=0,a=0,u=0,h=0;for(let d=0,f=t.length;d<=f;d+=2){const g=t[d];if(g===`
`||d===f){s=Math.max(s,a),i.push(a),a=0,u+=h,h=0;continue}const _=t[d+1]||r.font,m=gl(_,g);e.push(m),a+=m;const v=H4(_);n.push(v),h=Math.max(h,v)}return{width:s,height:u,widths:e,heights:n,lineWidths:i}}function q4(r,t,e,n,i,s,a,u,h,d,f){r.save(),e!==1&&(r.globalAlpha===void 0?r.globalAlpha=g=>g.globalAlpha*=e:r.globalAlpha*=e),t&&r.transform.apply(r,t),n.contextInstructions?(r.translate(h,d),r.scale(f[0],f[1]),$4(n,r)):f[0]<0||f[1]<0?(r.translate(h,d),r.scale(f[0],f[1]),r.drawImage(n,i,s,a,u,0,0,a,u)):r.drawImage(n,i,s,a,u,h,d,a*f[0],u*f[1]),r.restore()}function $4(r,t){const e=r.contextInstructions;for(let n=0,i=e.length;n<i;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class Yl extends zl{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?xt.LOADING:xt.LOADED,this.imageState_===xt.LOADING&&this.ready().then(()=>this.imageState_=xt.LOADED),this.render()}clone(){const t=this.getScale(),e=new Yl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=Ee(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let i=this.radius_,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const V=i;i=s,s=V}const a=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/a,h=s*Math.sin(u),d=Math.sqrt(s*s-h*h),f=i-d,g=Math.sqrt(h*h+f*f),_=g/h;if(t==="miter"&&_<=n)return _*e;const m=e/2/_,v=e/2*(f/g),w=Math.sqrt((i+m)*(i+m)+v*v)-i;if(this.radius2_===void 0||t==="bevel")return w*2;const S=i*Math.sin(u),R=Math.sqrt(i*i-S*S),k=s-R,b=Math.sqrt(S*S+k*k)/S;if(b<=n){const V=b*e/2-s-i;return 2*Math.max(w,V)}return w*2}createRenderOptions(){let t=Ms,e=ks,n=0,i=null,s=0,a,u=0;this.stroke_&&(a=ni(this.stroke_.getColor()??ko),u=this.stroke_.getWidth()??Oo,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??ks,t=this.stroke_.getLineCap()??Ms,n=this.stroke_.getMiterLimit()??Mo);const h=this.calculateLineJoinSize_(e,u,n),d=Math.max(this.radius_,this.radius2_||0),f=Math.ceil(2*d+h);return{strokeStyle:a,strokeWidth:u,size:f,lineCap:t,lineDash:i,lineDashOffset:s,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let i=this.fill_.getColor();i===null&&(i=Qe),e.fillStyle=ni(i),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=Lo(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(e=Ee(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let u=0;u<e;u++){const h=s+u*a,d=u%2===0?n:i;t.lineTo(d*Math.cos(h),d*Math.sin(h))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Qe,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Xl extends Yl{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Xl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}class Ur{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ur({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Wc(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===xt.IDLE&&e.load(),e.getImageState()===xt.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Fs{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Fs({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Mn{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=l0,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Mn({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=l0,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function J4(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(bt(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),t=function(){return e}}return t}let wh=null;function V1(r,t){if(!wh){const e=new Ur({color:"rgba(255,255,255,0.4)"}),n=new Fs({color:"#3399CC",width:1.25});wh=[new Mn({image:new Xl({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return wh}function l0(r){return r.getGeometry()}function u0(r,t,e,n){return e!==void 0&&n!==void 0?[e/r,n/t]:e!==void 0?e/r:n!==void 0?n/t:1}class Ns extends zl{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,i=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:i,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const a=t.img!==void 0?t.img:null;let u=t.src;bt(!(u!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&a&&(u=a.src||Ft(a)),bt(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),bt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(t.src!==void 0?h=xt.IDLE:a!==void 0&&("complete"in a?a.complete?h=a.src?xt.LOADED:xt.IDLE:h=xt.LOADING:h=xt.LOADED),this.color_=t.color!==void 0?Lo(t.color):null,this.iconImage_=Wc(a,u,this.crossOrigin_,h,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let d,f;if(t.size)[d,f]=t.size;else{const g=this.getImage(1);if(g.width&&g.height)d=g.width,f=g.height;else if(g instanceof HTMLImageElement){this.initialOptions_=t;const _=()=>{if(this.unlistenImageChange(_),!this.initialOptions_)return;const m=this.iconImage_.getSize();this.setScale(u0(m[0],m[1],t.width,t.height))};this.listenImageChange(_);return}}d!==void 0&&this.setScale(u0(d,f,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Ns({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=i[0]),this.anchorYUnits_=="fraction"&&(t[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(pt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(pt.CHANGE,t)}ready(){return this.iconImage_.ready()}}const Q4="#333";class Yc{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=_n(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ur({color:Q4}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Yc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=_n(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}let Yr=0;const Gs=0,$t=1<<Yr++,$=1<<Yr++,pn=1<<Yr++,de=1<<Yr++,si=1<<Yr++,So=1<<Yr++,Re=Math.pow(2,Yr)-1,z1={[$t]:"boolean",[$]:"number",[pn]:"string",[de]:"color",[si]:"number[]",[So]:"size"},tE=Object.keys(z1).map(Number).sort(Ai);function Me(r){const t=[];for(const e of tE)eE(r,e)&&t.push(z1[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function eE(r,t){return(r&t)===t}function oi(r,t){return!!(r&t)}function Zl(r,t){return r===t}class sr{constructor(t,e){this.type=t,this.value=e}}class nE{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function W1(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function iE(r){switch(r){case"string":return pn;case"color":return de;case"number":return $;case"boolean":return $t;case"number[]":return si;default:throw new Error(`Unrecognized type hint: ${r}`)}}function kt(r,t,e){switch(typeof r){case"boolean":return new sr($t,r);case"number":return new sr(e===So?So:$,r);case"string":{let i=pn;return k4(r)&&(i|=de),Zl(i&e,Gs)||(i&=e),new sr(i,r)}}if(!Array.isArray(r))throw new Error("Expression must be an array or a primitive value");if(r.length===0)throw new Error("Empty expression");if(typeof r[0]=="string")return pE(r,t,e);for(const i of r)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=si;return r.length===2?n|=So:(r.length===3||r.length===4)&&(n|=de),e&&(n&=e),new sr(n,r)}const D={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},rE={[D.Get]:ct(([r,t])=>t!==void 0?iE(t.value):Re,Ct(1,2),sE),[D.Var]:ct(([r])=>r.type,Ct(1,1),oE),[D.Id]:ct($|pn,fo,aE),[D.Concat]:ct(pn,Ct(2,1/0),At(Re)),[D.GeometryType]:ct(pn,fo,lE),[D.Resolution]:ct($,fo),[D.Zoom]:ct($,fo),[D.Time]:ct($,fo),[D.Any]:ct($t,Ct(2,1/0),At($t)),[D.All]:ct($t,Ct(2,1/0),At($t)),[D.Not]:ct($t,Ct(1,1),At($t)),[D.Equal]:ct($t,Ct(2,2),At(Re),ji),[D.NotEqual]:ct($t,Ct(2,2),At(Re),ji),[D.GreaterThan]:ct($t,Ct(2,2),At(Re),ji),[D.GreaterThanOrEqualTo]:ct($t,Ct(2,2),At(Re),ji),[D.LessThan]:ct($t,Ct(2,2),At(Re),ji),[D.LessThanOrEqualTo]:ct($t,Ct(2,2),At(Re),ji),[D.Multiply]:ct(r=>{let t=$|de;for(let e=0;e<r.length;e++)t&=r[e].type;return t},Ct(2,1/0),At($|de),ji),[D.Coalesce]:ct(r=>{let t=Re;for(let e=1;e<r.length;e+=2)t&=r[e].type;return t&=r[r.length-1].type,t},Ct(2,1/0),At(Re),ji),[D.Divide]:ct($,Ct(2,2),At($)),[D.Add]:ct($,Ct(2,1/0),At($)),[D.Subtract]:ct($,Ct(2,2),At($)),[D.Clamp]:ct($,Ct(3,3),At($)),[D.Mod]:ct($,Ct(2,2),At($)),[D.Pow]:ct($,Ct(2,2),At($)),[D.Abs]:ct($,Ct(1,1),At($)),[D.Floor]:ct($,Ct(1,1),At($)),[D.Ceil]:ct($,Ct(1,1),At($)),[D.Round]:ct($,Ct(1,1),At($)),[D.Sin]:ct($,Ct(1,1),At($)),[D.Cos]:ct($,Ct(1,1),At($)),[D.Atan]:ct($,Ct(1,2),At($)),[D.Sqrt]:ct($,Ct(1,1),At($)),[D.Match]:ct(r=>{let t=Re;for(let e=2;e<r.length;e+=2)t&=r[e].type;return t&=r[r.length-1].type,t},Ct(4,1/0),h0,hE),[D.Between]:ct($t,Ct(3,3),At($)),[D.Interpolate]:ct(r=>{let t=de|$;for(let e=3;e<r.length;e+=2)t&=r[e].type;return t},Ct(6,1/0),h0,cE),[D.Case]:ct(r=>{let t=Re;for(let e=1;e<r.length;e+=2)t&=r[e].type;return t&=r[r.length-1].type,t},Ct(3,1/0),uE,dE),[D.In]:ct($t,Ct(2,2),fE),[D.Number]:ct($,Ct(1,1/0),At(Re)),[D.String]:ct(pn,Ct(1,1/0),At(Re)),[D.Array]:ct(r=>r.length===2?si|So:r.length===3||r.length===4?si|de:si,Ct(1,1/0),At($)),[D.Color]:ct(de,Ct(1,4),At($)),[D.Band]:ct($,Ct(1,3),At($)),[D.Palette]:ct(de,Ct(2,2),gE),[D.ToString]:ct(pn,Ct(1,1),At($t|$|pn|de))};function sE(r,t){const e=kt(r[1],t);if(!(e instanceof sr))throw new Error("Expected a literal argument for get operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");if(t.properties.add(e.value),r.length===3){const n=kt(r[2],t);return[e,n]}return[e]}function oE(r,t,e,n){const i=r[1];if(typeof i!="string")throw new Error("Expected a string argument for var operation");if(t.variables.add(i),!("variables"in t.style)||t.style.variables[i]===void 0)return[new sr(Re,i)];const s=t.style.variables[i],a=kt(s,t);if(a.value=i,n&&!oi(n,a.type))throw new Error(`The variable ${i} has type ${Me(a.type)} but the following type was expected: ${Me(n)}`);return[a]}function aE(r,t){t.featureId=!0}function lE(r,t){t.geometryType=!0}function fo(r,t){const e=r[0];if(r.length!==1)throw new Error(`Expected no arguments for ${e} operation`);return[]}function Ct(r,t){return function(e,n){const i=e[0],s=e.length-1;if(r===t){if(s!==r){const a=r===1?"":"s";throw new Error(`Expected ${r} argument${a} for ${i}, got ${s}`)}}else if(s<r||s>t){const a=t===1/0?`${r} or more`:`${r} to ${t}`;throw new Error(`Expected ${a} arguments for ${i}, got ${s}`)}}}function At(r){return function(t,e){const n=t[0],i=t.length-1,s=new Array(i);for(let a=0;a<i;++a){const u=kt(t[a+1],e);if(!oi(r,u.type)){const h=Me(r),d=Me(u.type);throw new Error(`Unexpected type for argument ${a} of ${n} operation, got ${h} but expected ${d}`)}u.type&=r,s[a]=u}return s}}function ji(r,t,e){const n=r[0],i=r.length-1;let s=Re;for(let u=0;u<e.length;++u)s&=e[u].type;if(s===Gs)throw new Error(`No common type could be found for arguments of ${n} operation`);const a=new Array(i);for(let u=0;u<i;++u)a[u]=kt(r[u+1],t,s);return a}function uE(r,t){const e=r[0],n=r.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${e}, got ${JSON.stringify(n)} instead`)}function h0(r,t){const e=r[0],n=r.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${e}, got ${JSON.stringify(n)} instead`)}function hE(r,t,e,n){const i=r.length-1;let a=kt(r[1],t).type;const u=kt(r[r.length-1],t);let h=n!==void 0?n&u.type:u.type;const d=new Array(i-2);for(let g=0;g<i-2;g+=2){const _=kt(r[g+2],t),m=kt(r[g+3],t);a&=_.type,h&=m.type,d[g]=_,d[g+1]=m}const f=pn|$|$t;if(!oi(f,a))throw new Error(`Expected an input of type ${Me(f)} for the interpolate operation, got ${Me(a)} instead`);if(a&=f,Zl(h,Gs))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(r));for(let g=0;g<i-2;g+=2){const _=kt(r[g+2],t,a),m=kt(r[g+3],t,h);d[g]=_,d[g+1]=m}return[kt(r[1],t,a),...d,kt(r[r.length-1],t,h)]}function cE(r,t,e,n){const i=r[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":if(s=i[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(i)}`);s=kt(s,t);let a=kt(r[2],t);if(!oi($,a.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Me(a.type)} instead`);a=kt(r[2],t,$);const u=new Array(r.length-3);for(let h=0;h<u.length;h+=2){let d=kt(r[h+3],t);if(!oi($,d.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Me(d.type)} at position ${h+2} instead`);let f=kt(r[h+4],t);if(!oi($|de,f.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Me(f.type)} at position ${h+3} instead`);d=kt(r[h+3],t,$),f=kt(r[h+4],t,$|de),u[h]=d,u[h+1]=f}return[s,a,...u]}function dE(r,t,e,n){const i=kt(r[r.length-1],t,n);let s=n!==void 0?n&i.type:i.type;const a=new Array(r.length-1);for(let u=0;u<a.length-1;u+=2){const h=kt(r[u+1],t),d=kt(r[u+2],t,n);if(!oi($t,h.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Me(h.type)} at position ${u} instead`);s&=d.type,a[u]=h,a[u+1]=d}if(Zl(s,Gs))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(r));for(let u=0;u<a.length-1;u+=2)a[u+1]=kt(r[u+2],t,s);return a[a.length-1]=kt(r[r.length-1],t,s),a}function fE(r,t){let e=r[2];if(!Array.isArray(e))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof e[0]=="string"){if(e[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(e[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');e=e[1]}let n=pn|$;const i=new Array(e.length);for(let a=0;a<i.length;a++){const u=kt(e[a],t);n&=u.type,i[a]=u}if(Zl(n,Gs))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(r));return[kt(r[1],t,n),...i]}function gE(r,t){const e=kt(r[1],t,$);if(e.type!==$)throw new Error(`The first argument of palette must be an number, got ${Me(e.type)} instead`);const n=r[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const i=new Array(n.length);for(let s=0;s<i.length;s++){const a=kt(n[s],t,de);if(!(a instanceof sr))throw new Error(`The palette color at index ${s} must be a literal value`);if(!oi(a.type,de))throw new Error(`The palette color at index ${s} should be of type color, got ${Me(a.type)} instead`);i[s]=a}return[e,...i]}function ct(r,...t){return function(e,n,i){const s=e[0];let a=[];for(let h=0;h<t.length;h++)a=t[h](e,n,a,i)||a;let u=typeof r=="function"?r(a):r;if(i!==void 0){if(!oi(u,i))throw new Error(`The following expression was expected to return ${Me(i)}, but returns ${Me(u)} instead: ${JSON.stringify(e)}`);u&=i}if(u===Gs)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(e)}`);return new nE(u,s,...a)}}function pE(r,t,e){const n=r[0],i=rE[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(r,t,e)}function U1(r){if(!r)return"";const t=r.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return U1(r.getGeometries()[0]);default:return""}}function Y1(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Bi(r,t,e){const n=kt(r,e);if(!oi(t,n.type)){const i=Me(t),s=Me(n.type);throw new Error(`Expected expression to be of type ${i}, got ${s}`)}return Yn(n)}function Yn(r,t){if(r instanceof sr){if(r.type===de&&typeof r.value=="string"){const n=Vc(r.value);return function(){return n}}return function(){return r.value}}const e=r.operator;switch(e){case D.Number:case D.String:case D.Coalesce:return _E(r);case D.Get:case D.Var:return mE(r);case D.Id:return n=>n.featureId;case D.GeometryType:return n=>n.geometryType;case D.Concat:{const n=r.args.map(i=>Yn(i));return i=>"".concat(...n.map(s=>s(i).toString()))}case D.Resolution:return n=>n.resolution;case D.Any:case D.All:case D.Between:case D.In:case D.Not:return CE(r);case D.Equal:case D.NotEqual:case D.LessThan:case D.LessThanOrEqualTo:case D.GreaterThan:case D.GreaterThanOrEqualTo:return yE(r);case D.Multiply:case D.Divide:case D.Add:case D.Subtract:case D.Clamp:case D.Mod:case D.Pow:case D.Abs:case D.Floor:case D.Ceil:case D.Round:case D.Sin:case D.Cos:case D.Atan:case D.Sqrt:return vE(r);case D.Case:return EE(r);case D.Match:return xE(r);case D.Interpolate:return wE(r);case D.ToString:return SE(r);default:throw new Error(`Unsupported operator ${e}`)}}function _E(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Yn(r.args[s]);switch(e){case D.Coalesce:return s=>{for(let a=0;a<n;++a){const u=i[a](s);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case D.Number:case D.String:return s=>{for(let a=0;a<n;++a){const u=i[a](s);if(typeof u===e)return u}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function mE(r,t){const n=r.args[0].value;switch(r.operator){case D.Get:return i=>i.properties[n];case D.Var:return i=>i.variables[n];default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function yE(r,t){const e=r.operator,n=Yn(r.args[0]),i=Yn(r.args[1]);switch(e){case D.Equal:return s=>n(s)===i(s);case D.NotEqual:return s=>n(s)!==i(s);case D.LessThan:return s=>n(s)<i(s);case D.LessThanOrEqualTo:return s=>n(s)<=i(s);case D.GreaterThan:return s=>n(s)>i(s);case D.GreaterThanOrEqualTo:return s=>n(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function CE(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Yn(r.args[s]);switch(e){case D.Any:return s=>{for(let a=0;a<n;++a)if(i[a](s))return!0;return!1};case D.All:return s=>{for(let a=0;a<n;++a)if(!i[a](s))return!1;return!0};case D.Between:return s=>{const a=i[0](s),u=i[1](s),h=i[2](s);return a>=u&&a<=h};case D.In:return s=>{const a=i[0](s);for(let u=1;u<n;++u)if(a===i[u](s))return!0;return!1};case D.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function vE(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Yn(r.args[s]);switch(e){case D.Multiply:return s=>{let a=1;for(let u=0;u<n;++u)a*=i[u](s);return a};case D.Divide:return s=>i[0](s)/i[1](s);case D.Add:return s=>{let a=0;for(let u=0;u<n;++u)a+=i[u](s);return a};case D.Subtract:return s=>i[0](s)-i[1](s);case D.Clamp:return s=>{const a=i[0](s),u=i[1](s);if(a<u)return u;const h=i[2](s);return a>h?h:a};case D.Mod:return s=>i[0](s)%i[1](s);case D.Pow:return s=>Math.pow(i[0](s),i[1](s));case D.Abs:return s=>Math.abs(i[0](s));case D.Floor:return s=>Math.floor(i[0](s));case D.Ceil:return s=>Math.ceil(i[0](s));case D.Round:return s=>Math.round(i[0](s));case D.Sin:return s=>Math.sin(i[0](s));case D.Cos:return s=>Math.cos(i[0](s));case D.Atan:return n===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case D.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function EE(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=Yn(r.args[i]);return i=>{for(let s=0;s<e-1;s+=2)if(n[s](i))return n[s+1](i);return n[e-1](i)}}function xE(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=Yn(r.args[i]);return i=>{const s=n[0](i);for(let a=1;a<e;a+=2)if(s===n[a](i))return n[a+1](i);return n[e-1](i)}}function wE(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=Yn(r.args[i]);return i=>{const s=n[0](i),a=n[1](i);let u,h;for(let d=2;d<e;d+=2){const f=n[d](i);let g=n[d+1](i);const _=Array.isArray(g);if(_&&(g=L4(g)),f>=a)return d===2?g:_?IE(s,a,u,h,f,g):Co(s,a,u,h,f,g);u=f,h=g}return h}}function SE(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Yn(r.args[s]);switch(e){case D.ToString:return s=>{const a=i[0](s);return r.args[0].type===de?zc(a):a.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Co(r,t,e,n,i,s){const a=i-e;if(a===0)return n;const u=t-e,h=r===1?u/a:(Math.pow(r,u)-1)/(Math.pow(r,a)-1);return n+h*(s-n)}function IE(r,t,e,n,i,s){if(i-e===0)return n;const u=i0(n),h=i0(s);let d=h[2]-u[2];d>180?d-=360:d<-180&&(d+=360);const f=[Co(r,t,e,u[0],i,h[0]),Co(r,t,e,u[1],i,h[1]),u[2]+Co(r,t,e,0,i,d),Co(r,t,e,n[3],i,s[3])];return L1(M4(f))}function RE(r){return!0}function TE(r){const t=W1(),e=AE(r,t),n=Y1();return function(i,s){if(n.properties=i.getPropertiesInternal(),n.resolution=s,t.featureId){const a=i.getId();a!==void 0?n.featureId=a:n.featureId=null}return t.geometryType&&(n.geometryType=U1(i.getGeometry())),e(n)}}function c0(r){const t=W1(),e=r.length,n=new Array(e);for(let a=0;a<e;++a)n[a]=jh(r[a],t);const i=Y1(),s=new Array(e);return function(a,u){if(i.properties=a.getPropertiesInternal(),i.resolution=u,t.featureId){const d=a.getId();d!==void 0?i.featureId=d:i.featureId=null}let h=0;for(let d=0;d<e;++d){const f=n[d](i);f&&(s[h]=f,h+=1)}return s.length=h,s}}function AE(r,t){const e=r.length,n=new Array(e);for(let i=0;i<e;++i){const s=r[i],a="filter"in s?Bi(s.filter,$t,t):RE;let u;if(Array.isArray(s.style)){const h=s.style.length;u=new Array(h);for(let d=0;d<h;++d)u[d]=jh(s.style[d],t)}else u=[jh(s.style,t)];n[i]={filter:a,styles:u}}return function(i){const s=[];let a=!1;for(let u=0;u<e;++u){const h=n[u].filter;if(h(i)&&!(r[u].else&&a)){a=!0;for(const d of n[u].styles){const f=d(i);f&&s.push(f)}}}return s}}function jh(r,t){const e=Po(r,"",t),n=Do(r,"",t),i=bE(r,t),s=LE(r,t),a=en(r,"z-index",t);if(!e&&!n&&!i&&!s&&!Nr(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const u=new Mn;return function(h){let d=!0;if(e){const f=e(h);f&&(d=!1),u.setFill(f)}if(n){const f=n(h);f&&(d=!1),u.setStroke(f)}if(i){const f=i(h);f&&(d=!1),u.setText(f)}if(s){const f=s(h);f&&(d=!1),u.setImage(f)}return a&&u.setZIndex(a(h)),d?null:u}}function Po(r,t,e){let n;if(t+"fill-pattern-src"in r?n=OE(r,t+"fill-",e):n=Xc(r,t+"fill-color",e),!n)return null;const i=new Ur;return function(s){const a=n(s);return a==="none"?null:(i.setColor(a),i)}}function Do(r,t,e){const n=en(r,t+"stroke-width",e),i=Xc(r,t+"stroke-color",e);if(!n&&!i)return null;const s=Si(r,t+"stroke-line-cap",e),a=Si(r,t+"stroke-line-join",e),u=X1(r,t+"stroke-line-dash",e),h=en(r,t+"stroke-line-dash-offset",e),d=en(r,t+"stroke-miter-limit",e),f=new Fs;return function(g){if(i){const _=i(g);if(_==="none")return null;f.setColor(_)}if(n&&f.setWidth(n(g)),s){const _=s(g);if(_!=="butt"&&_!=="round"&&_!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(_)}if(a){const _=a(g);if(_!=="bevel"&&_!=="round"&&_!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(_)}return u&&f.setLineDash(u(g)),h&&f.setLineDashOffset(h(g)),d&&f.setMiterLimit(d(g)),f}}function bE(r,t){const e="text-",n=Si(r,e+"value",t);if(!n)return null;const i=Po(r,e,t),s=Po(r,e+"background-",t),a=Do(r,e,t),u=Do(r,e+"background-",t),h=Si(r,e+"font",t),d=en(r,e+"max-angle",t),f=en(r,e+"offset-x",t),g=en(r,e+"offset-y",t),_=Bo(r,e+"overflow",t),m=Si(r,e+"placement",t),v=en(r,e+"repeat",t),x=Kl(r,e+"scale",t),w=Bo(r,e+"rotate-with-view",t),S=en(r,e+"rotation",t),R=Si(r,e+"align",t),k=Si(r,e+"justify",t),M=Si(r,e+"baseline",t),b=X1(r,e+"padding",t),V=Hl(r,e+"declutter-mode"),B=new Yc({declutterMode:V});return function(P){if(B.setText(n(P)),i&&B.setFill(i(P)),s&&B.setBackgroundFill(s(P)),a&&B.setStroke(a(P)),u&&B.setBackgroundStroke(u(P)),h&&B.setFont(h(P)),d&&B.setMaxAngle(d(P)),f&&B.setOffsetX(f(P)),g&&B.setOffsetY(g(P)),_&&B.setOverflow(_(P)),m){const z=m(P);if(z!=="point"&&z!=="line")throw new Error("Expected point or line for text-placement");B.setPlacement(z)}if(v&&B.setRepeat(v(P)),x&&B.setScale(x(P)),w&&B.setRotateWithView(w(P)),S&&B.setRotation(S(P)),R){const z=R(P);if(z!=="left"&&z!=="center"&&z!=="right"&&z!=="end"&&z!=="start")throw new Error("Expected left, right, center, start, or end for text-align");B.setTextAlign(z)}if(k){const z=k(P);if(z!=="left"&&z!=="right"&&z!=="center")throw new Error("Expected left, right, or center for text-justify");B.setJustify(z)}if(M){const z=M(P);if(z!=="bottom"&&z!=="top"&&z!=="middle"&&z!=="alphabetic"&&z!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");B.setTextBaseline(z)}return b&&B.setPadding(b(P)),B}}function LE(r,t){return"icon-src"in r?ME(r,t):"shape-points"in r?kE(r,t):"circle-radius"in r?FE(r,t):null}function ME(r,t){const e="icon-",n=e+"src",i=Z1(r[n],n),s=pl(r,e+"anchor",t),a=Kl(r,e+"scale",t),u=en(r,e+"opacity",t),h=pl(r,e+"displacement",t),d=en(r,e+"rotation",t),f=Bo(r,e+"rotate-with-view",t),g=f0(r,e+"anchor-origin"),_=g0(r,e+"anchor-x-units"),m=g0(r,e+"anchor-y-units"),v=NE(r,e+"color"),x=DE(r,e+"cross-origin"),w=BE(r,e+"offset"),S=f0(r,e+"offset-origin"),R=_l(r,e+"width"),k=_l(r,e+"height"),M=PE(r,e+"size"),b=Hl(r,e+"declutter-mode"),V=new Ns({src:i,anchorOrigin:g,anchorXUnits:_,anchorYUnits:m,color:v,crossOrigin:x,offset:w,offsetOrigin:S,height:k,width:R,size:M,declutterMode:b});return function(B){return u&&V.setOpacity(u(B)),h&&V.setDisplacement(h(B)),d&&V.setRotation(d(B)),f&&V.setRotateWithView(f(B)),a&&V.setScale(a(B)),s&&V.setAnchor(s(B)),V}}function kE(r,t){const e="shape-",n=e+"points",i=e+"radius",s=qh(r[n],n),a=qh(r[i],i),u=Po(r,e,t),h=Do(r,e,t),d=Kl(r,e+"scale",t),f=pl(r,e+"displacement",t),g=en(r,e+"rotation",t),_=Bo(r,e+"rotate-with-view",t),m=_l(r,e+"radius2"),v=_l(r,e+"angle"),x=Hl(r,e+"declutter-mode"),w=new Yl({points:s,radius:a,radius2:m,angle:v,declutterMode:x});return function(S){return u&&w.setFill(u(S)),h&&w.setStroke(h(S)),f&&w.setDisplacement(f(S)),g&&w.setRotation(g(S)),_&&w.setRotateWithView(_(S)),d&&w.setScale(d(S)),w}}function FE(r,t){const e="circle-",n=Po(r,e,t),i=Do(r,e,t),s=en(r,e+"radius",t),a=Kl(r,e+"scale",t),u=pl(r,e+"displacement",t),h=en(r,e+"rotation",t),d=Bo(r,e+"rotate-with-view",t),f=Hl(r,e+"declutter-mode"),g=new Xl({radius:5,declutterMode:f});return function(_){return s&&g.setRadius(s(_)),n&&g.setFill(n(_)),i&&g.setStroke(i(_)),u&&g.setDisplacement(u(_)),h&&g.setRotation(h(_)),d&&g.setRotateWithView(d(_)),a&&g.setScale(a(_)),g}}function en(r,t,e){if(!(t in r))return;const n=Bi(r[t],$,e);return function(i){return qh(n(i),t)}}function Si(r,t,e){if(!(t in r))return null;const n=Bi(r[t],pn,e);return function(i){return Z1(n(i),t)}}function OE(r,t,e){const n=Si(r,t+"pattern-src",e),i=d0(r,t+"pattern-offset",e),s=d0(r,t+"pattern-size",e),a=Xc(r,t+"color",e);return function(u){return{src:n(u),offset:i&&i(u),size:s&&s(u),color:a&&a(u)}}}function Bo(r,t,e){if(!(t in r))return null;const n=Bi(r[t],$t,e);return function(i){const s=n(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function Xc(r,t,e){if(!(t in r))return null;const n=Bi(r[t],de|pn,e);return function(i){return K1(n(i),t)}}function X1(r,t,e){if(!(t in r))return null;const n=Bi(r[t],si,e);return function(i){return Ho(n(i),t)}}function pl(r,t,e){if(!(t in r))return null;const n=Bi(r[t],si,e);return function(i){const s=Ho(n(i),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function d0(r,t,e){if(!(t in r))return null;const n=Bi(r[t],si,e);return function(i){return H1(n(i),t)}}function Kl(r,t,e){if(!(t in r))return null;const n=Bi(r[t],si|$,e);return function(i){return GE(n(i),t)}}function _l(r,t){const e=r[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function PE(r,t){const e=r[t];if(e!==void 0){if(typeof e=="number")return _n(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function DE(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function f0(r,t){const e=r[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function g0(r,t){const e=r[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function BE(r,t){const e=r[t];if(e!==void 0)return Ho(e,t)}function Hl(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function NE(r,t){const e=r[t];if(e!==void 0)return K1(e,t)}function Ho(r,t){if(!Array.isArray(r))throw new Error(`Expected an array for ${t}`);const e=r.length;for(let n=0;n<e;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return r}function Z1(r,t){if(typeof r!="string")throw new Error(`Expected a string for ${t}`);return r}function qh(r,t){if(typeof r!="number")throw new Error(`Expected a number for ${t}`);return r}function K1(r,t){if(typeof r=="string")return r;const e=Ho(r,t),n=e.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function H1(r,t){const e=Ho(r,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function GE(r,t){return typeof r=="number"?r:H1(r,t)}const p0={RENDER_ORDER:"renderOrder"};class j1 extends Vl{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(p0.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new A1(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(p0.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?V1:t;const e=VE(t);this.styleFunction_=t===null?void 0:J4(e),this.changed()}}function VE(r){if(r===void 0)return V1;if(!r)return null;if(typeof r=="function"||r instanceof Mn)return r;if(!Array.isArray(r))return c0([r]);if(r.length===0)return[];const t=r.length,e=r[0];if(e instanceof Mn){const i=new Array(t);for(let s=0;s<t;++s){const a=r[s];if(!(a instanceof Mn))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in e){const i=new Array(t);for(let s=0;s<t;++s){const a=r[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return TE(i)}return c0(r)}class zE extends gc{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){at()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Fi(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),p1(i,n)}forEachFeatureAtCoordinate(t,e,n,i,s,a,u,h){let d;const f=e.viewState;function g(M,b,V,B){return s.call(a,b,M?V:null,B)}const _=f.projection,m=a1(t.slice(),_),v=[[0,0]];if(_.canWrapX()&&i){const M=_.getExtent(),b=Ot(M);v.push([-b,0],[b,0])}const x=e.layerStatesArray,w=x.length,S=[],R=[];for(let M=0;M<v.length;M++)for(let b=w-1;b>=0;--b){const V=x[b],B=V.layer;if(B.hasRenderer()&&Nc(V,f)&&u.call(h,B)){const P=B.getRenderer(),z=B.getSource();if(P&&z){const Z=z.getWrapX()?m:t,K=g.bind(null,V.managed);R[0]=Z[0]+v[M][0],R[1]=Z[1]+v[M][1],d=P.forEachFeatureAtCoordinate(R,e,n,K,S)}if(d)return d}}if(S.length===0)return;const k=1/S.length;return S.forEach((M,b)=>M.distanceSq+=b*k),S.sort((M,b)=>M.distanceSq-b.distanceSq),S.some(M=>d=M.callback(M.feature,M.layer,M.geometry)),d}hasFeatureAtCoordinate(t,e,n,i,s,a){return this.forEachFeatureAtCoordinate(t,e,n,i,Io,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(t){at()}scheduleExpireIconCache(t){ei.canExpireCache()&&t.postRenderFunctions.push(WE)}}function WE(r,t){ei.expire()}class q1 extends Di{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}class UE extends zE{constructor(t){super(t),this.fontChangeListenerKey_=Tt(xi,Ts.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ul+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new q1(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Wt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(bn.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(u,h){return u.zIndex-h.zIndex});e.some(u=>u.layer instanceof j1&&u.layer.getDeclutter())&&(t.declutter={});const i=t.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,h=e.length;u<h;++u){const d=e[u];t.layerIndex=u;const f=d.layer,g=f.getSourceState();if(!Nc(d,i)||g!="ready"&&g!="undefined"){f.unrender();continue}const _=f.render(t,a);_&&(_!==a&&(this.children_.push(_),a=_),s.push(d))}this.declutter(t,s),N4(this.element_,this.children_),this.dispatchRenderEvent(bn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const i=e[n],s=i.layer;s.getDeclutter()&&s.renderDeclutter(t,i)}e.forEach(n=>n.layer.renderDeferred(t))}}}class er extends Di{constructor(t,e){super(t),this.layer=e}}const Sh={LAYERS:"layers"};class Vs extends J0{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Sh.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new ti(n.slice(),{unique:!0}):bt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new ti(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Wt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Tt(t,Je.ADD,this.handleLayersAdd_,this),Tt(t,Je.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Wt);Uo(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const s=e[n];this.registerLayerListeners_(s),this.dispatchEvent(new er("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[Tt(t,Ts.PROPERTYCHANGE,this.handleLayerChange_,this),Tt(t,pt.CHANGE,this.handleLayerChange_,this)];t instanceof Vs&&e.push(Tt(t,"addlayer",this.handleLayerGroupAdd_,this),Tt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ft(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new er("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new er("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new er("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=Ft(e);this.listenerKeys_[n].forEach(Wt),delete this.listenerKeys_[n],this.dispatchEvent(new er("removelayer",e)),this.changed()}getLayers(){return this.get(Sh.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let i=0,s=n.length;i<s;++i)this.dispatchEvent(new er("removelayer",n[i]))}this.set(Sh.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(e)});const i=this.getLayerState();let s=i.zIndex;!t&&i.zIndex===void 0&&(s=0);for(let a=n,u=e.length;a<u;a++){const h=e[a];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=wo(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=s)}return e}getSourceState(){return"ready"}}class ys extends Di{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}class tr extends ys{constructor(t,e,n,i,s,a){super(t,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Jt={SINGLECLICK:"singleclick",CLICK:pt.CLICK,DBLCLICK:pt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$h={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class YE extends Fl{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Tt(n,$h.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Tt(n,$h.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_,P1?{passive:!1}:!1)}emulateClick_(t){let e=new tr(Jt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new tr(Jt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new tr(Jt.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==Jt.POINTERUP||e.type==Jt.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==e.target){delete this.trackedTouches_[i];break}}else(e.type==Jt.POINTERDOWN||e.type==Jt.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new tr(Jt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Wt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new tr(Jt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Tt(n,Jt.POINTERMOVE,this.handlePointerMove_,this),Tt(n,Jt.POINTERUP,this.handlePointerUp_,this),Tt(this.element_,Jt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Tt(this.element_.getRootNode(),Jt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new tr(Jt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new tr(Jt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Wt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Wt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Wt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const wi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Te={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ml=1/0;class XE{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Uo(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){bt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=ml?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,s=e[t],a=n[t],u=t;for(;t<i>>1;){const h=this.getLeftChildIndex_(t),d=this.getRightChildIndex_(t),f=d<i&&n[d]<n[h]?d:h;e[t]=e[f],n[t]=n[f],t=f}e[t]=s,n[t]=a,this.siftDown_(u,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,s=n[e],a=i[e];for(;e>t;){const u=this.getParentIndex_(e);if(i[u]>a)n[e]=n[u],i[e]=i[u],e=u;else break}n[e]=s,i[e]=a}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const s=e.length;let a,u,h;for(u=0;u<s;++u)a=e[u],h=t(a),h==ml?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=h,e[i++]=a);e.length=i,n.length=i,this.heapify_()}}const nt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ZE extends XE{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(pt.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===nt.LOADED||n===nt.ERROR||n===nt.EMPTY){n!==nt.ERROR&&e.removeEventListener(pt.CHANGE,this.boundHandleTileChange_);const i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,i,s,a;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)s=this.dequeue()[0],a=s.getKey(),i=s.getState(),i===nt.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++n,s.load())}}function KE(r,t,e,n,i){if(!r||!(e in r.wantedTiles)||!r.wantedTiles[e][t.getKey()])return ml;const s=r.viewState.center,a=n[0]-s[0],u=n[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+u*u)/i}class Zc extends Xn{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){dl(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&dl(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Wt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==As&&this.listenerKeys.push(Tt(t,wi.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class HE extends Zc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",i=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"",a=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const u=t.label!==void 0?t.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=i):this.label_=u;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const d=e+" "+Ul+" "+Uc+(this.collapsed_&&this.collapsible_?" "+s0:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=d,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(t)))),n=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(i=>gv(()=>i))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!gr(e,this.renderedAttributions_)){D1(this.ulElement_);for(let i=0,s=e.length;i<s;++i){const a=document.createElement("li");a.innerHTML=e[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(s0),this.collapsed_?r0(this.collapseLabel_,this.label_):r0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class jE extends Zc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",i=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const s=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+Ul+" "+Uc,h=this.element;h.className=u,h.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add($a)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Bs}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains($a);!s&&n===0?this.element.classList.add($a):s&&n!==0&&this.element.classList.remove($a)}this.label_.style.transform=i}this.rotation_=n}}class qE extends Zc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,i=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",u=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",h=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",d=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=h,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(pt.CLICK,this.handleClick_.bind(this,n),!1);const g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=d,g.appendChild(typeof u=="string"?document.createTextNode(u):u),g.addEventListener(pt.CLICK,this.handleClick_.bind(this,-n),!1);const _=e+" "+Ul+" "+Uc,m=this.element;m.className=_,m.appendChild(f),m.appendChild(g),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const s=n.getConstrainedZoom(i+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Bs})):n.setZoom(s)}}}function $E(r){r=r||{};const t=new ti;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new qE(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new jE(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new HE(r.attributionOptions)),t}const _0={ACTIVE:"active"};class jo extends Xn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(_0.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(_0.ACTIVE,t)}setMap(t){this.map_=t}}function JE(r,t,e){const n=r.getCenterInternal();if(n){const i=[n[0]+t[0],n[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:jv,center:r.getConstrainedCenter(i)})}}function Kc(r,t,e,n){const i=r.getZoom();if(i===void 0)return;const s=r.getConstrainedZoom(i+t),a=r.getResolutionForZoom(s);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:e,duration:n!==void 0?n:250,easing:Bs})}class QE extends jo{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Jt.DBLCLICK){const n=t.originalEvent,i=t.map,s=t.coordinate,a=n.shiftKey?-this.delta_:this.delta_,u=i.getView();Kc(u,a,s,this.duration_),n.preventDefault(),e=!0}return!e}}class qo extends jo{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Jt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Jt.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Jt.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Jt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Hc(r){const t=r.length;let e=0,n=0;for(let i=0;i<t;i++)e+=r[i].clientX,n+=r[i].clientY;return{clientX:e/t,clientY:n/t}}function Jh(r){const t=arguments;return function(e){let n=!0;for(let i=0,s=t.length;i<s&&(n=n&&t[i](e),!!n);++i);return n}}const t7=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},e7=function(r){const t=r.map.getTargetElement(),e=r.map.getOwnerDocument().activeElement;return t.contains(e)},$1=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?e7(r):!0},n7=Io,J1=function(r){const t=r.originalEvent;return t.button==0&&!(P4&&M1&&t.ctrlKey)},Q1=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},i7=function(r){const t=r.originalEvent;return M1?t.metaKey:t.ctrlKey},r7=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},tp=function(r){const t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Ih=function(r){const t=r.originalEvent;return bt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},s7=function(r){const t=r.originalEvent;return bt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class o7 extends qo{constructor(t){super({stopDown:kl}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Jh(Q1,s7);this.condition_=t.onFocusOnly?Jh($1,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Hc(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],u=t.map.getView();Dv(s,u.getResolution()),xc(s,u.getRotation()),u.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=e.getPixelFromCoordinateInternal(a),h=e.getCoordinateFromPixelInternal([u[0]-i*Math.cos(s),u[1]-i*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(h),duration:500,easing:Bs})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class a7 extends qo{constructor(t){t=t||{},super({stopDown:kl}),this.condition_=t.condition?t.condition:t7,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Ih(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===Ac)return;const i=e.getSize(),s=t.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const u=a-this.lastAngle_;n.adjustRotationInternal(-u)}this.lastAngle_=a}handleUpEvent(t){return Ih(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Ih(t)&&J1(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class l7 extends gc{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new cr([i])}getGeometry(){return this.geometry_}}const go={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ja extends Di{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class u7 extends qo{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new l7(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:J1,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],s=n[1]-e[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ja(go.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ja(e?go.BOXEND:go.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ja(go.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ja(go.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}}class h7 extends u7{constructor(t){t=t||{};const e=t.condition?t.condition:r7;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(i),a=n.getResolutionForExtentInternal(s),u=n.getResolution()/a;i=i.clone(),i.scale(u*u)}n.fitInternal(i,{duration:this.duration_,easing:Bs})}}const Ar={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class c7 extends jo{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Q1(e)&&tp(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==Ar.DOWN||i==Ar.LEFT||i==Ar.RIGHT||i==Ar.UP)){const a=t.map.getView(),u=a.getResolution()*this.pixelDelta_;let h=0,d=0;i==Ar.DOWN?d=-u:i==Ar.LEFT?h=-u:i==Ar.RIGHT?h=u:d=u;const f=[h,d];xc(f,a.getRotation()),JE(a,f,this.duration_),n.preventDefault(),e=!0}}return!e}}class d7 extends jo{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!i7(e)&&tp(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN||t.type==pt.KEYPRESS){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==="+"||i==="-")){const s=t.map,a=i==="+"?this.delta_:-this.delta_,u=s.getView();Kc(u,a,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}class f7{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const s=this.points_[e]-this.points_[n],a=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class g7 extends jo{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:n7;this.condition_=t.onFocusOnly?Jh($1,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==pt.WHEEL)return!0;const n=t.map,i=t.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==pt.WHEEL&&(s=i.deltaY,F4&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=k1),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const u=n.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=s;const h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),h),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-re(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Kc(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class p7 extends qo{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=kl),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=s-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=h}this.lastAngle_=s;const a=t.map,u=a.getView();u.getConstraints().rotation!==Ac&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Hc(this.targetPointers))),this.rotating_&&(a.render(),u.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class _7 extends qo{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=kl),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],s=n.clientX-i.clientX,a=n.clientY-i.clientY,u=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(e=this.lastDistance_/u),this.lastDistance_=u;const h=t.map,d=h.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(Hc(this.targetPointers))),h.render(),d.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function m7(r){r=r||{};const t=new ti,e=new f7(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new a7),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new QE({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new o7({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new p7),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new _7({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new c7),t.push(new d7({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new g7({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new h7({duration:r.zoomDuration})),t}function ep(r){if(r instanceof Vl){r.setMapInternal(null);return}r instanceof Vs&&r.getLayers().forEach(ep)}function np(r,t){if(r instanceof Vl){r.setMapInternal(t);return}if(r instanceof Vs){const e=r.getLayers().getArray();for(let n=0,i=e.length;n<i;++n)np(e[n],t)}}let y7=class extends Xn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=C7(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:k1,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Wn(),this.pixelToCoordinateTransform_=Wn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||$E(),this.interactions=e.interactions||m7({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ZE(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Te.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Te.VIEW,this.handleViewChanged_),this.addChangeListener(Te.SIZE,this.handleSizeChanged_),this.addChangeListener(Te.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof Jn)&&t.view.then(function(i){n.setView(new Jn(i))}),this.controls.addEventListener(Je.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Je.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Je.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Je.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Je.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Je.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){np(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:Io,u=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,u,e,null,a,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(i){n.push(i)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(i){i instanceof Vs?e(i.getLayers()):t.push(i)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const i=e.layerFilter!==void 0?e.layerFilter:Io,s=e.hitTolerance!==void 0?e.hitTolerance:0,a=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,a,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=n.width/i[0],a=n.height/i[1],u="changedTouches"in t?t.changedTouches[0]:t;return[(u.clientX-n.left)/s,(u.clientY-n.top)/a]}getTarget(){return this.get(Te.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Yh(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Ce(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Te.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ti){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const i=t[e];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Ei(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Ce(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Te.SIZE)}getView(){return this.get(Te.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return KE(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new tr(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===$h.POINTERDOWN||n===pt.WHEEL||n===pt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=e.target;if(this.overlayContainerStopEvent_.contains(a)||!(s===i?i.documentElement:s).contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,s=i;if(t){const a=t.viewHints;if(a[Ae.ANIMATING]||a[Ae.INTERACTING]){const u=Date.now()-t.time>8;i=u?0:8,s=u?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(bn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(bn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ys(wi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ys(wi.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let i=0,s=n.length;i<s;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Wt(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,dl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new UE(this)),this.mapBrowserEventHandler_=new YE(this,this.moveTolerance_);for(const s in Jt)this.mapBrowserEventHandler_.addEventListener(Jt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pt.WHEEL,this.boundHandleBrowserEvent_,P1?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Tt(n,pt.KEYDOWN,this.handleBrowserEvent,this),Tt(n,pt.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Wt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Wt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Tt(t,Ts.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Tt(t,pt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Wt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new er("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Tt(t,Ts.PROPERTYCHANGE,this.render,this),Tt(t,pt.CHANGE,this.render,this),Tt(t,"addlayer",this.handleLayerAdd_,this),Tt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){ep(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let s=null;if(e!==void 0&&t0(e)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Vh(u.center,u.resolution,u.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:a,wantedTiles:{},mapId:Ft(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const h=isNaN(u.nextRotation)?u.rotation:u.nextRotation;s.nextExtent=Vh(u.nextCenter,u.nextResolution,h,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Zo(this.previousExtent_)&&!Ro(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ys(wi.MOVESTART,this,i)),this.previousExtent_=Ds(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Ae.ANIMATING]&&!s.viewHints[Ae.INTERACTING]&&!Ro(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ys(wi.MOVEEND,this,s)),t1(s.extent,this.previousExtent_))),this.dispatchEvent(new ys(wi.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(wi.LOADSTART)||this.hasListener(wi.LOADEND)||this.hasListener(bn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new er("removelayer",e)),this.set(Te.LAYERGROUP,t)}setSize(t){this.set(Te.SIZE,t)}setTarget(t){this.set(Te.TARGET,t)}setView(t){if(!t||t instanceof Jn){this.set(Te.VIEW,t);return}this.set(Te.VIEW,new Jn);const e=this;t.then(function(n){e.setView(new Jn(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),s=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(e=[s,a],!t0(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&l1("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!gr(e,n))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function C7(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const e={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Vs({layers:r.layers});e[Te.LAYERGROUP]=n,e[Te.TARGET]=r.target,e[Te.VIEW]=r.view instanceof Jn?r.view:new Jn;let i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new ti(r.controls.slice()):(bt(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=r.controls));let s;r.interactions!==void 0&&(Array.isArray(r.interactions)?s=new ti(r.interactions.slice()):(bt(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=r.interactions));let a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new ti(r.overlays.slice()):(bt(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=r.overlays):a=new ti,{controls:i,interactions:s,keyboardEventTarget:t,overlays:a,values:e}}const Qa={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class v7 extends Vl{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Qa.PRELOAD)}setPreload(t){this.set(Qa.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Qa.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Qa.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class E7 extends Yo{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t}getFeatures(t){return at()}getData(t){return null}prepareFrame(t){return at()}renderFrame(t,e){return at()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,s)=>{const a=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,s,a)}}forEachFeatureAtCoordinate(t,e,n,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===xt.LOADED||e.getState()===xt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=xt.LOADED&&e!=xt.ERROR&&t.addEventListener(pt.CHANGE,this.boundHandleImageChange_),e==xt.IDLE&&(t.load(),e=t.getState()),e==xt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class ip{constructor(){Pg(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(cl(),{get:(t,e)=>{if(typeof cl()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,i=e.length;n<i;++n){const s=e[n];if(typeof s=="function"){s(t);continue}const a=e[++n];if(typeof t[s]=="function")t[s](...a);else{if(typeof a=="function"){t[s]=a(t);continue}t[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const m0=[];let Cs=null;function x7(){Cs=Ee(1,1,void 0,{willReadFrequently:!0})}class rp extends E7{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Wn(),this.pixelTransform=Wn(),this.inversePixelTransform=Wn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){Cs||x7(),Cs.clearRect(0,0,1,1);let i;try{Cs.drawImage(t,e,n,1,1,0,0,1,1),i=Cs.getImageData(0,0,1,1).data}catch{return Cs=null,null}return i}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let s,a;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&gr(Lo(t.style.backgroundColor),Lo(n)))){const u=t.firstElementChild;u instanceof HTMLCanvasElement&&(a=u.getContext("2d"))}if(a&&a.canvas.style.transform===e?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let u=s.style;u.position="absolute",u.width="100%",u.height="100%",a=Ee();const h=a.canvas;s.appendChild(h),u=h.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Vr(n),s=Dl(n),a=Pl(n),u=Ol(n);Ce(e.coordinateToPixelTransform,i),Ce(e.coordinateToPixelTransform,s),Ce(e.coordinateToPixelTransform,a),Ce(e.coordinateToPixelTransform,u);const h=this.inversePixelTransform;Ce(h,i),Ce(h,s),Ce(h,a),Ce(h,u),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()}prepareContainer(t,e){const n=t.extent,i=t.viewState.resolution,s=t.viewState.rotation,a=t.pixelRatio,u=Math.round(Ot(n)/i*a),h=Math.round(be(n)/i*a);Fi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,s,-u/2,-h/2),p1(this.inversePixelTransform,this.pixelTransform);const d=Jv(this.pixelTransform);if(this.useContainer(e,d,this.getBackground(t)),!this.containerReused){const f=this.context.canvas;f.width!=u||f.height!=h?(f.width=u,f.height=h):this.context.clearRect(0,0,u,h),d!==f.style.transform&&(f.style.transform=d)}}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const s=new q1(t,this.inversePixelTransform,n,e);i.dispatchEvent(s)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(bn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(bn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new ip),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(bn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(bn.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,i,s,a,u){const h=s/2,d=a/2,f=i/e,g=-f,_=-t[0]+u,m=-t[1];return Fi(this.tempTransform,h,d,f,g,-n,_,m)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class sp extends Fl{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(pt.CHANGE)}release(){this.state===nt.ERROR&&this.setState(nt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile;if(!t)return this;do{if(t.getState()==nt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){let t=this.interimTile;if(!t)return;let e=this;do{if(t.getState()==nt.LOADED){t.interimTile=null;break}t.getState()==nt.LOADING?e=t:t.getState()==nt.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==nt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){at()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const i=e-n+1e3/60;return i>=this.transition_?1:g1(i/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}class op extends sp{constructor(t,e,n,i,s,a){super(t,e,a),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=nt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=nt.ERROR,this.unlistenImage_(),this.image_=w7(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=nt.LOADED:this.state=nt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==nt.ERROR&&(this.state=nt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==nt.IDLE&&(this.state=nt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=G4(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function w7(){const r=Ee(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}const S7=.5,I7=10,y0=.25;class R7{constructor(t,e,n,i,s,a){this.sourceProj_=t,this.targetProj_=e;let u={};const h=Ls(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){const k=R[0]+"/"+R[1];return u[k]||(u[k]=h(R)),u[k]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ot(i)>=Ot(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ot(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ot(this.targetProj_.getExtent()):null;const d=Vr(n),f=Dl(n),g=Pl(n),_=Ol(n),m=this.transformInv_(d),v=this.transformInv_(f),x=this.transformInv_(g),w=this.transformInv_(_),S=I7+(a?Math.max(0,Math.ceil(Math.log2(Gh(n)/(a*a*256*256)))):0);if(this.addQuad_(d,f,g,_,m,v,x,w,S),this.wrapsXInSource_){let R=1/0;this.triangles_.forEach(function(k,M,b){R=Math.min(R,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-R>this.sourceWorldWidth_/2){const M=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];M[0][0]-R>this.sourceWorldWidth_/2&&(M[0][0]-=this.sourceWorldWidth_),M[1][0]-R>this.sourceWorldWidth_/2&&(M[1][0]-=this.sourceWorldWidth_),M[2][0]-R>this.sourceWorldWidth_/2&&(M[2][0]-=this.sourceWorldWidth_);const b=Math.min(M[0][0],M[1][0],M[2][0]);Math.max(M[0][0],M[1][0],M[2][0])-b<this.sourceWorldWidth_/2&&(k.source=M)}})}u={}}addTriangle_(t,e,n,i,s,a){this.triangles_.push({source:[i,s,a],target:[t,e,n]})}addQuad_(t,e,n,i,s,a,u,h,d){const f=zg([s,a,u,h]),g=this.sourceWorldWidth_?Ot(f)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&g>.5&&g<1;let v=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=zg([t,e,n,i]);v=Ot(w)/this.targetWorldWidth_>y0||v}!m&&this.sourceProj_.isGlobal()&&g&&(v=g>y0||v)}if(!v&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!tn(f,this.maxSourceExtent_))return;let x=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(h[0])||!isFinite(h[1]))){if(d>0)v=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(d>0){if(!v){const w=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.transformInv_(w);let R;m?R=(Ss(s[0],_)+Ss(u[0],_))/2-Ss(S[0],_):R=(s[0]+u[0])/2-S[0];const k=(s[1]+u[1])/2-S[1];v=R*R+k*k>this.errorThresholdSquared_}if(v){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const w=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(w),R=[(i[0]+t[0])/2,(i[1]+t[1])/2],k=this.transformInv_(R);this.addQuad_(t,e,w,R,s,a,S,k,d-1),this.addQuad_(R,w,n,i,k,S,u,h,d-1)}else{const w=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(w),R=[(n[0]+i[0])/2,(n[1]+i[1])/2],k=this.transformInv_(R);this.addQuad_(t,w,R,i,s,S,k,h,d-1),this.addQuad_(w,e,n,R,S,a,u,k,d-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}x&11||this.addTriangle_(t,n,i,s,u,h),x&14||this.addTriangle_(t,n,e,s,u,a),x&&(x&13||this.addTriangle_(e,i,t,a,h,s),x&7||this.addTriangle_(e,i,n,a,h,u))}calculateSourceExtent(){const t=kn();return this.triangles_.forEach(function(e,n,i){const s=e.source;xo(t,s[0]),xo(t,s[1]),xo(t,s[2])}),t}getTriangles(){return this.triangles_}}let Rh;const Rs=[];function C0(r,t,e,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,n)+1,Math.max(e,i)),r.restore()}function Th(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function T7(){if(Rh===void 0){const r=Ee(6,6,Rs);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",C0(r,4,5,4,0),C0(r,4,5,0,5);const t=r.getImageData(0,0,3,3).data;Rh=Th(t,0)||Th(t,4)||Th(t,8),Wl(r),Rs.push(r.canvas)}return Rh}function v0(r,t,e,n){const i=d1(e,t,r);let s=Ug(t,n,e);const a=t.getMetersPerUnit();a!==void 0&&(s*=a);const u=r.getMetersPerUnit();u!==void 0&&(s/=u);const h=r.getExtent();if(!h||bs(h,i)){const d=Ug(r,s,i)/s;isFinite(d)&&d>0&&(s/=d)}return s}function A7(r,t,e,n){const i=Un(e);let s=v0(r,t,i,n);return(!isFinite(s)||s<=0)&&r1(e,function(a){return s=v0(r,t,a,n),isFinite(s)&&s>0}),s}function b7(r,t,e,n,i,s,a,u,h,d,f,g,_,m){const v=Ee(Math.round(e*r),Math.round(e*t),Rs);if(g||(v.imageSmoothingEnabled=!1),h.length===0)return v.canvas;v.scale(e,e);function x(b){return Math.round(b*e)/e}v.globalCompositeOperation="lighter";const w=kn();h.forEach(function(b,V,B){n1(w,b.extent)});let S;const R=e/n,k=(g?1:1+Math.pow(2,-24))/R;{if(S=Ee(Math.round(Ot(w)*R),Math.round(be(w)*R),Rs),g||(S.imageSmoothingEnabled=!1),i&&m){const b=(i[0]-w[0])*R,V=-(i[3]-w[3])*R,B=Ot(i)*R,P=be(i)*R;S.rect(b,V,B,P),S.clip()}h.forEach(function(b,V,B){if(b.image.width>0&&b.image.height>0){if(b.clipExtent){S.save();const j=(b.clipExtent[0]-w[0])*R,Q=-(b.clipExtent[3]-w[3])*R,tt=Ot(b.clipExtent)*R,lt=be(b.clipExtent)*R;S.rect(g?j:Math.round(j),g?Q:Math.round(Q),g?tt:Math.round(j+tt)-Math.round(j),g?lt:Math.round(Q+lt)-Math.round(Q)),S.clip()}const P=(b.extent[0]-w[0])*R,z=-(b.extent[3]-w[3])*R,Z=Ot(b.extent)*R,K=be(b.extent)*R;S.drawImage(b.image,d,d,b.image.width-2*d,b.image.height-2*d,g?P:Math.round(P),g?z:Math.round(z),g?Z:Math.round(P+Z)-Math.round(P),g?K:Math.round(z+K)-Math.round(z)),b.clipExtent&&S.restore()}})}const M=Vr(a);return u.getTriangles().forEach(function(b,V,B){const P=b.source,z=b.target;let Z=P[0][0],K=P[0][1],j=P[1][0],Q=P[1][1],tt=P[2][0],lt=P[2][1];const Y=x((z[0][0]-M[0])/s),_t=x(-(z[0][1]-M[1])/s),ot=x((z[1][0]-M[0])/s),Gt=x(-(z[1][1]-M[1])/s),dt=x((z[2][0]-M[0])/s),ht=x(-(z[2][1]-M[1])/s),wt=Z,Bt=K;Z=0,K=0,j-=wt,Q-=Bt,tt-=wt,lt-=Bt;const U=[[j,Q,0,0,ot-Y],[tt,lt,0,0,dt-Y],[0,0,j,Q,Gt-_t],[0,0,tt,lt,ht-_t]],Ht=yv(U);if(!Ht)return;if(v.save(),v.beginPath(),T7()||!g){v.moveTo(ot,Gt);const jt=4,fe=Y-ot,nn=_t-Gt;for(let ge=0;ge<jt;ge++)v.lineTo(ot+x((ge+1)*fe/jt),Gt+x(ge*nn/(jt-1))),ge!=jt-1&&v.lineTo(ot+x((ge+1)*fe/jt),Gt+x((ge+1)*nn/(jt-1)));v.lineTo(dt,ht)}else v.moveTo(ot,Gt),v.lineTo(Y,_t),v.lineTo(dt,ht);v.clip(),v.transform(Ht[0],Ht[2],Ht[1],Ht[3],Y,_t),v.translate(w[0]-wt,w[3]-Bt);let Qt;if(S)Qt=S.canvas,v.scale(k,-k);else{const jt=h[0],fe=jt.extent;Qt=jt.image,v.scale(Ot(fe)/Qt.width,-be(fe)/Qt.height)}v.drawImage(Qt,0,0),v.restore()}),S&&(Wl(S),Rs.push(S.canvas)),f&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach(function(b,V,B){const P=b.target,z=(P[0][0]-M[0])/s,Z=-(P[0][1]-M[1])/s,K=(P[1][0]-M[0])/s,j=-(P[1][1]-M[1])/s,Q=(P[2][0]-M[0])/s,tt=-(P[2][1]-M[1])/s;v.beginPath(),v.moveTo(K,j),v.lineTo(z,Z),v.lineTo(Q,tt),v.closePath(),v.stroke()}),v.restore()),v.canvas}class Qh extends sp{constructor(t,e,n,i,s,a,u,h,d,f,g,_){super(s,nt.IDLE,_),this.renderEdges_=g!==void 0?g:!1,this.pixelRatio_=u,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const m=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const w=v?wo(m,v):m;if(Gh(w)===0){this.state=nt.EMPTY;return}const S=t.getExtent();S&&(x?x=wo(x,S):x=S);const R=i.getResolution(this.wrappedTileCoord_[0]),k=A7(t,n,w,R);if(!isFinite(k)||k<=0){this.state=nt.EMPTY;return}const M=f!==void 0?f:S7;if(this.triangulation_=new R7(t,n,w,x,k*M,R),this.triangulation_.getTriangles().length===0){this.state=nt.EMPTY;return}this.sourceZ_=e.getZForResolution(k);let b=this.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(b[1]=re(b[1],x[1],x[3]),b[3]=re(b[3],x[1],x[3])):b=wo(b,x)),!Gh(b))this.state=nt.EMPTY;else{let V=0,B=0;t.canWrapX()&&(V=Ot(S),B=Math.floor((b[0]-S[0])/V)),o1(b.slice(),t,!0).forEach(z=>{const Z=e.getTileRangeForExtentAndZ(z,this.sourceZ_);for(let K=Z.minX;K<=Z.maxX;K++)for(let j=Z.minY;j<=Z.maxY;j++){const Q=d(this.sourceZ_,K,j,u);if(Q){const tt=B*V;this.sourceTiles_.push({tile:Q,offset:tt})}}++B}),this.sourceTiles_.length===0&&(this.state=nt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var i;const n=e.tile;if(n&&n.getState()==nt.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);s[0]+=e.offset,s[2]+=e.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=e.offset,a[2]+=e.offset),t.push({extent:s,clipExtent:a,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=nt.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(e),u=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=b7(i,s,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=nt.LOADED}this.changed()}load(){if(this.state==nt.IDLE){this.state=nt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const n=e.getState();if(n==nt.IDLE||n==nt.LOADING){t++;const i=Tt(e,pt.CHANGE,function(s){const a=e.getState();(a==nt.LOADED||a==nt.ERROR||a==nt.EMPTY)&&(Wt(i),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},n,i){e.getState()==nt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Wt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Wl(this.canvas_.getContext("2d")),Rs.push(this.canvas_),this.canvas_=null),super.release()}}class jc{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function ds(r,t,e,n,i){return i!==void 0?(i.minX=r,i.maxX=t,i.minY=e,i.maxY=n,i):new jc(r,t,e,n)}class L7 extends rp{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=kn(),this.tmpTileRange_=new jc(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==nt.LOADED||n==nt.EMPTY||n==nt.ERROR&&!i}getTile(t,e,n,i){const s=i.pixelRatio,a=i.viewState.projection,u=this.getLayer();let d=u.getSource().getTile(t,e,n,s,a);return d.getState()==nt.ERROR&&u.getUseInterimTilesOnError()&&u.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(d)||(d=d.getInterimTile()),d}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Ce(e.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!bs(s,i))return null;const a=e.pixelRatio,u=e.viewState.projection,h=e.viewState,d=n.getRenderSource(),f=d.getTileGridForProjection(h.projection),g=d.getTilePixelRatio(e.pixelRatio);for(let _=f.getZForResolution(h.resolution);_>=f.getMinZoom();--_){const m=f.getTileCoordForCoordAndZ(i,_),v=d.getTile(_,m[1],m[2],a,u);if(!(v instanceof op||v instanceof Qh)||v instanceof Qh&&v.getState()===nt.EMPTY)return null;if(v.getState()!==nt.LOADED)continue;const x=f.getOrigin(_),w=_n(f.getTileSize(_)),S=f.getResolution(_),R=Math.floor(g*((i[0]-x[0])/S-m[1]*w[0])),k=Math.floor(g*((x[1]-i[1])/S-m[2]*w[1])),M=Math.round(g*d.getGutterForProjection(h.projection));return this.getImageData(v.getImage(),R+M,k+M)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,s=i.projection,a=i.resolution,u=i.center,h=i.rotation,d=t.pixelRatio,f=this.getLayer(),g=f.getSource(),_=g.getRevision(),m=g.getTileGridForProjection(s),v=m.getZForResolution(a,g.zDirection),x=m.getResolution(v);let w=t.extent;const S=t.viewState.resolution,R=g.getTilePixelRatio(d);this.prepareContainer(t,e);const k=this.context.canvas.width,M=this.context.canvas.height,b=n.extent&&kr(n.extent);b&&(w=wo(w,kr(n.extent)));const V=x*k/2/R,B=x*M/2/R,P=[u[0]-V,u[1]-B,u[0]+V,u[1]+B],z=m.getTileRangeForExtentAndZ(w,v),Z={};Z[v]={};const K=this.createLoadedTileFinder(g,s,Z),j=this.tmpExtent,Q=this.tmpTileRange_;this.newTiles_=!1;const tt=h?zh(i.center,S,h,t.size):void 0;for(let ht=z.minX;ht<=z.maxX;++ht)for(let wt=z.minY;wt<=z.maxY;++wt){if(h&&!m.tileCoordIntersectsViewport([v,ht,wt],tt))continue;const Bt=this.getTile(v,ht,wt,t);if(this.isDrawableTile(Bt)){const Qt=Ft(this);if(Bt.getState()==nt.LOADED){Z[v][Bt.tileCoord.toString()]=Bt;let jt=Bt.inTransition(Qt);jt&&n.opacity!==1&&(Bt.endTransition(Qt),jt=!1),!this.newTiles_&&(jt||!this.renderedTiles.includes(Bt))&&(this.newTiles_=!0)}if(Bt.getAlpha(Qt,t.time)===1)continue}const U=m.getTileCoordChildTileRange(Bt.tileCoord,Q,j);let Ht=!1;U&&(Ht=K(v+1,U)),Ht||m.forEachTileCoordParentTileRange(Bt.tileCoord,K,Q,j)}const lt=x/a*d/R,Y=this.getRenderContext(t);Fi(this.tempTransform,k/2,M/2,lt,lt,0,-k/2,-M/2),b&&this.clipUnrotated(Y,t,b),g.getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,t),this.renderedTiles.length=0;let _t=Object.keys(Z).map(Number);_t.sort(Ai);let ot,Gt,dt;n.opacity===1&&(!this.containerReused||g.getOpaque(t.viewState.projection))?_t=_t.reverse():(ot=[],Gt=[]);for(let ht=_t.length-1;ht>=0;--ht){const wt=_t[ht],Bt=g.getTilePixelSize(wt,d,s),Ht=m.getResolution(wt)/x,Qt=Bt[0]*Ht*lt,jt=Bt[1]*Ht*lt,fe=m.getTileCoordForCoordAndZ(Vr(P),wt),nn=m.getTileCoordExtent(fe),ge=Ce(this.tempTransform,[R*(nn[0]-P[0])/x,R*(P[3]-nn[3])/x]),ai=R*g.getGutterForProjection(s),Zn=Z[wt];for(const Xr in Zn){const ie=Zn[Xr],Fn=ie.tileCoord,Kn=fe[1]-Fn[1],Oe=Math.round(ge[0]-(Kn-1)*Qt),pr=fe[2]-Fn[2],Ws=Math.round(ge[1]-(pr-1)*jt),pe=Math.round(ge[0]-Kn*Qt),Yt=Math.round(ge[1]-pr*jt),Pe=Oe-pe,mn=Ws-Yt,li=v===wt,We=li&&ie.getAlpha(Ft(this),t.time)!==1;let ui=!1;if(!We)if(ot){dt=[pe,Yt,pe+Pe,Yt,pe+Pe,Yt+mn,pe,Yt+mn];for(let Ue=0,rn=ot.length;Ue<rn;++Ue)if(v!==wt&&wt<Gt[Ue]){const te=ot[Ue];tn([pe,Yt,pe+Pe,Yt+mn],[te[0],te[3],te[4],te[7]])&&(ui||(Y.save(),ui=!0),Y.beginPath(),Y.moveTo(dt[0],dt[1]),Y.lineTo(dt[2],dt[3]),Y.lineTo(dt[4],dt[5]),Y.lineTo(dt[6],dt[7]),Y.moveTo(te[6],te[7]),Y.lineTo(te[4],te[5]),Y.lineTo(te[2],te[3]),Y.lineTo(te[0],te[1]),Y.clip())}ot.push(dt),Gt.push(wt)}else Y.clearRect(pe,Yt,Pe,mn);this.drawTileImage(ie,t,pe,Yt,Pe,mn,ai,li),ot&&!We?(ui&&Y.restore(),this.renderedTiles.unshift(ie)):this.renderedTiles.push(ie),this.updateUsedTiles(t.usedTiles,g,ie)}}return this.renderedRevision=_,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!Ro(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=d,this.renderedProjection=s,this.manageTilePyramid(t,g,m,d,s,w,v,f.getPreload()),this.scheduleExpireCache(t,g),this.postRender(this.context,t),n.extent&&Y.restore(),Y.imageSmoothingEnabled=!0,this.container}drawTileImage(t,e,n,i,s,a,u,h){const d=this.getTileImage(t);if(!d)return;const f=this.getRenderContext(e),g=Ft(this),_=e.layerStatesArray[e.layerIndex],m=_.opacity*(h?t.getAlpha(g,e.time):1),v=m!==f.globalAlpha;v&&(f.save(),f.globalAlpha=m),f.drawImage(d,u,u,d.width-2*u,d.height-2*u,n,i,s,a),v&&f.restore(),m!==_.opacity?e.animate=!0:h&&t.endTransition(g)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=(function(i,s,a){const u=Ft(i);u in a.usedTiles&&i.expireCache(a.viewState.projection,a.usedTiles[u])}).bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=Ft(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,s,a,u,h,d){const f=Ft(e);f in t.wantedTiles||(t.wantedTiles[f]={});const g=t.wantedTiles[f],_=t.tileQueue,m=n.getMinZoom(),v=t.viewState.rotation,x=v?zh(t.viewState.center,t.viewState.resolution,v,t.size):void 0;let w=0,S,R,k,M,b,V;for(V=m;V<=u;++V)for(R=n.getTileRangeForExtentAndZ(a,V,R),k=n.getResolution(V),M=R.minX;M<=R.maxX;++M)for(b=R.minY;b<=R.maxY;++b)v&&!n.tileCoordIntersectsViewport([V,M,b],x)||(u-V<=h?(++w,S=e.getTile(V,M,b,i,s),S.getState()==nt.IDLE&&(g[S.getKey()]=!0,_.isKeyQueued(S.getKey())||_.enqueue([S,f,n.getTileCoordCenter(S.tileCoord),k])),d!==void 0&&d(S)):e.useTile(V,M,b,s));e.updateCacheSize(w,s)}}class M7 extends v7{constructor(t){super(t)}createRenderer(){return new L7(this)}}var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */yl.exports;(function(r,t){(function(){var e,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",g=1,_=2,m=4,v=1,x=2,w=1,S=2,R=4,k=8,M=16,b=32,V=64,B=128,P=256,z=512,Z=30,K="...",j=800,Q=16,tt=1,lt=2,Y=3,_t=1/0,ot=9007199254740991,Gt=17976931348623157e292,dt=NaN,ht=4294967295,wt=ht-1,Bt=ht>>>1,U=[["ary",B],["bind",w],["bindKey",S],["curry",k],["curryRight",M],["flip",z],["partial",b],["partialRight",V],["rearg",P]],Ht="[object Arguments]",Qt="[object Array]",jt="[object AsyncFunction]",fe="[object Boolean]",nn="[object Date]",ge="[object DOMException]",ai="[object Error]",Zn="[object Function]",Xr="[object GeneratorFunction]",ie="[object Map]",Fn="[object Number]",Kn="[object Null]",Oe="[object Object]",pr="[object Promise]",Ws="[object Proxy]",pe="[object RegExp]",Yt="[object Set]",Pe="[object String]",mn="[object Symbol]",li="[object Undefined]",We="[object WeakMap]",ui="[object WeakSet]",Ue="[object ArrayBuffer]",rn="[object DataView]",te="[object Float32Array]",Us="[object Float64Array]",Zr="[object Int8Array]",Kr="[object Int16Array]",_r="[object Int32Array]",Ys="[object Uint8Array]",Xs="[object Uint8ClampedArray]",Hr="[object Uint16Array]",jr="[object Uint32Array]",Zs=/\b__p \+= '';/g,Qo=/\b(__p \+=) '' \+/g,Ks=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ni=/&(?:amp|lt|gt|quot|#39);/g,Gi=/[&<>"']/g,mr=RegExp(Ni.source),ta=RegExp(Gi.source),ea=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,Hn=/<%=([\s\S]+?)%>/g,Xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yn=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sn=/[\\^$.*+?()[\]{}|]/g,On=RegExp(sn.source),Vt=/^\s+/,_e=/\s/,Pn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ru=/\{\n\/\* \[wrapped with (.+)\] \*/,Yp=/,? & /,Xp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zp=/[()=,{}\[\]\/\s]/,Kp=/\\(\\)?/g,Hp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ld=/\w*$/,jp=/^[-+]0x[0-9a-f]+$/i,qp=/^0b[01]+$/i,$p=/^\[object .+?Constructor\]$/,Jp=/^0o[0-7]+$/i,Qp=/^(?:0|[1-9]\d*)$/,t2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,na=/($^)/,e2=/['\n\r\u2028\u2029\\]/g,ia="\\ud800-\\udfff",n2="\\u0300-\\u036f",i2="\\ufe20-\\ufe2f",r2="\\u20d0-\\u20ff",ud=n2+i2+r2,hd="\\u2700-\\u27bf",cd="a-z\\xdf-\\xf6\\xf8-\\xff",s2="\\xac\\xb1\\xd7\\xf7",o2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",a2="\\u2000-\\u206f",l2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dd="A-Z\\xc0-\\xd6\\xd8-\\xde",fd="\\ufe0e\\ufe0f",gd=s2+o2+a2+l2,su="[']",u2="["+ia+"]",pd="["+gd+"]",ra="["+ud+"]",_d="\\d+",h2="["+hd+"]",md="["+cd+"]",yd="[^"+ia+gd+_d+hd+cd+dd+"]",ou="\\ud83c[\\udffb-\\udfff]",c2="(?:"+ra+"|"+ou+")",Cd="[^"+ia+"]",au="(?:\\ud83c[\\udde6-\\uddff]){2}",lu="[\\ud800-\\udbff][\\udc00-\\udfff]",qr="["+dd+"]",vd="\\u200d",Ed="(?:"+md+"|"+yd+")",d2="(?:"+qr+"|"+yd+")",xd="(?:"+su+"(?:d|ll|m|re|s|t|ve))?",wd="(?:"+su+"(?:D|LL|M|RE|S|T|VE))?",Sd=c2+"?",Id="["+fd+"]?",f2="(?:"+vd+"(?:"+[Cd,au,lu].join("|")+")"+Id+Sd+")*",g2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rd=Id+Sd+f2,_2="(?:"+[h2,au,lu].join("|")+")"+Rd,m2="(?:"+[Cd+ra+"?",ra,au,lu,u2].join("|")+")",y2=RegExp(su,"g"),C2=RegExp(ra,"g"),uu=RegExp(ou+"(?="+ou+")|"+m2+Rd,"g"),v2=RegExp([qr+"?"+md+"+"+xd+"(?="+[pd,qr,"$"].join("|")+")",d2+"+"+wd+"(?="+[pd,qr+Ed,"$"].join("|")+")",qr+"?"+Ed+"+"+xd,qr+"+"+wd,p2,g2,_d,_2].join("|"),"g"),E2=RegExp("["+vd+ia+ud+fd+"]"),x2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,w2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],S2=-1,Ut={};Ut[te]=Ut[Us]=Ut[Zr]=Ut[Kr]=Ut[_r]=Ut[Ys]=Ut[Xs]=Ut[Hr]=Ut[jr]=!0,Ut[Ht]=Ut[Qt]=Ut[Ue]=Ut[fe]=Ut[rn]=Ut[nn]=Ut[ai]=Ut[Zn]=Ut[ie]=Ut[Fn]=Ut[Oe]=Ut[pe]=Ut[Yt]=Ut[Pe]=Ut[We]=!1;var zt={};zt[Ht]=zt[Qt]=zt[Ue]=zt[rn]=zt[fe]=zt[nn]=zt[te]=zt[Us]=zt[Zr]=zt[Kr]=zt[_r]=zt[ie]=zt[Fn]=zt[Oe]=zt[pe]=zt[Yt]=zt[Pe]=zt[mn]=zt[Ys]=zt[Xs]=zt[Hr]=zt[jr]=!0,zt[ai]=zt[Zn]=zt[We]=!1;var I2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},R2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},A2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},b2=parseFloat,L2=parseInt,Td=typeof po=="object"&&po&&po.Object===Object&&po,M2=typeof self=="object"&&self&&self.Object===Object&&self,me=Td||M2||Function("return this")(),hu=t&&!t.nodeType&&t,yr=hu&&!0&&r&&!r.nodeType&&r,Ad=yr&&yr.exports===hu,cu=Ad&&Td.process,Cn=function(){try{var A=yr&&yr.require&&yr.require("util").types;return A||cu&&cu.binding&&cu.binding("util")}catch{}}(),bd=Cn&&Cn.isArrayBuffer,Ld=Cn&&Cn.isDate,Md=Cn&&Cn.isMap,kd=Cn&&Cn.isRegExp,Fd=Cn&&Cn.isSet,Od=Cn&&Cn.isTypedArray;function on(A,O,F){switch(F.length){case 0:return A.call(O);case 1:return A.call(O,F[0]);case 2:return A.call(O,F[0],F[1]);case 3:return A.call(O,F[0],F[1],F[2])}return A.apply(O,F)}function k2(A,O,F,H){for(var ft=-1,Lt=A==null?0:A.length;++ft<Lt;){var ae=A[ft];O(H,ae,F(ae),A)}return H}function vn(A,O){for(var F=-1,H=A==null?0:A.length;++F<H&&O(A[F],F,A)!==!1;);return A}function F2(A,O){for(var F=A==null?0:A.length;F--&&O(A[F],F,A)!==!1;);return A}function Pd(A,O){for(var F=-1,H=A==null?0:A.length;++F<H;)if(!O(A[F],F,A))return!1;return!0}function Vi(A,O){for(var F=-1,H=A==null?0:A.length,ft=0,Lt=[];++F<H;){var ae=A[F];O(ae,F,A)&&(Lt[ft++]=ae)}return Lt}function sa(A,O){var F=A==null?0:A.length;return!!F&&$r(A,O,0)>-1}function du(A,O,F){for(var H=-1,ft=A==null?0:A.length;++H<ft;)if(F(O,A[H]))return!0;return!1}function Xt(A,O){for(var F=-1,H=A==null?0:A.length,ft=Array(H);++F<H;)ft[F]=O(A[F],F,A);return ft}function zi(A,O){for(var F=-1,H=O.length,ft=A.length;++F<H;)A[ft+F]=O[F];return A}function fu(A,O,F,H){var ft=-1,Lt=A==null?0:A.length;for(H&&Lt&&(F=A[++ft]);++ft<Lt;)F=O(F,A[ft],ft,A);return F}function O2(A,O,F,H){var ft=A==null?0:A.length;for(H&&ft&&(F=A[--ft]);ft--;)F=O(F,A[ft],ft,A);return F}function gu(A,O){for(var F=-1,H=A==null?0:A.length;++F<H;)if(O(A[F],F,A))return!0;return!1}var P2=pu("length");function D2(A){return A.split("")}function B2(A){return A.match(Xp)||[]}function Dd(A,O,F){var H;return F(A,function(ft,Lt,ae){if(O(ft,Lt,ae))return H=Lt,!1}),H}function oa(A,O,F,H){for(var ft=A.length,Lt=F+(H?1:-1);H?Lt--:++Lt<ft;)if(O(A[Lt],Lt,A))return Lt;return-1}function $r(A,O,F){return O===O?j2(A,O,F):oa(A,Bd,F)}function N2(A,O,F,H){for(var ft=F-1,Lt=A.length;++ft<Lt;)if(H(A[ft],O))return ft;return-1}function Bd(A){return A!==A}function Nd(A,O){var F=A==null?0:A.length;return F?mu(A,O)/F:dt}function pu(A){return function(O){return O==null?e:O[A]}}function _u(A){return function(O){return A==null?e:A[O]}}function Gd(A,O,F,H,ft){return ft(A,function(Lt,ae,Nt){F=H?(H=!1,Lt):O(F,Lt,ae,Nt)}),F}function G2(A,O){var F=A.length;for(A.sort(O);F--;)A[F]=A[F].value;return A}function mu(A,O){for(var F,H=-1,ft=A.length;++H<ft;){var Lt=O(A[H]);Lt!==e&&(F=F===e?Lt:F+Lt)}return F}function yu(A,O){for(var F=-1,H=Array(A);++F<A;)H[F]=O(F);return H}function V2(A,O){return Xt(O,function(F){return[F,A[F]]})}function Vd(A){return A&&A.slice(0,Yd(A)+1).replace(Vt,"")}function an(A){return function(O){return A(O)}}function Cu(A,O){return Xt(O,function(F){return A[F]})}function Hs(A,O){return A.has(O)}function zd(A,O){for(var F=-1,H=A.length;++F<H&&$r(O,A[F],0)>-1;);return F}function Wd(A,O){for(var F=A.length;F--&&$r(O,A[F],0)>-1;);return F}function z2(A,O){for(var F=A.length,H=0;F--;)A[F]===O&&++H;return H}var W2=_u(I2),U2=_u(R2);function Y2(A){return"\\"+A2[A]}function X2(A,O){return A==null?e:A[O]}function Jr(A){return E2.test(A)}function Z2(A){return x2.test(A)}function K2(A){for(var O,F=[];!(O=A.next()).done;)F.push(O.value);return F}function vu(A){var O=-1,F=Array(A.size);return A.forEach(function(H,ft){F[++O]=[ft,H]}),F}function Ud(A,O){return function(F){return A(O(F))}}function Wi(A,O){for(var F=-1,H=A.length,ft=0,Lt=[];++F<H;){var ae=A[F];(ae===O||ae===f)&&(A[F]=f,Lt[ft++]=F)}return Lt}function aa(A){var O=-1,F=Array(A.size);return A.forEach(function(H){F[++O]=H}),F}function H2(A){var O=-1,F=Array(A.size);return A.forEach(function(H){F[++O]=[H,H]}),F}function j2(A,O,F){for(var H=F-1,ft=A.length;++H<ft;)if(A[H]===O)return H;return-1}function q2(A,O,F){for(var H=F+1;H--;)if(A[H]===O)return H;return H}function Qr(A){return Jr(A)?J2(A):P2(A)}function Dn(A){return Jr(A)?Q2(A):D2(A)}function Yd(A){for(var O=A.length;O--&&_e.test(A.charAt(O)););return O}var $2=_u(T2);function J2(A){for(var O=uu.lastIndex=0;uu.test(A);)++O;return O}function Q2(A){return A.match(uu)||[]}function t_(A){return A.match(v2)||[]}var e_=function A(O){O=O==null?me:ts.defaults(me.Object(),O,ts.pick(me,w2));var F=O.Array,H=O.Date,ft=O.Error,Lt=O.Function,ae=O.Math,Nt=O.Object,Eu=O.RegExp,n_=O.String,En=O.TypeError,la=F.prototype,i_=Lt.prototype,es=Nt.prototype,ua=O["__core-js_shared__"],ha=i_.toString,Pt=es.hasOwnProperty,r_=0,Xd=function(){var o=/[^.]+$/.exec(ua&&ua.keys&&ua.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),ca=es.toString,s_=ha.call(Nt),o_=me._,a_=Eu("^"+ha.call(Pt).replace(sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),da=Ad?O.Buffer:e,Ui=O.Symbol,fa=O.Uint8Array,Zd=da?da.allocUnsafe:e,ga=Ud(Nt.getPrototypeOf,Nt),Kd=Nt.create,Hd=es.propertyIsEnumerable,pa=la.splice,jd=Ui?Ui.isConcatSpreadable:e,js=Ui?Ui.iterator:e,Cr=Ui?Ui.toStringTag:e,_a=function(){try{var o=Sr(Nt,"defineProperty");return o({},"",{}),o}catch{}}(),l_=O.clearTimeout!==me.clearTimeout&&O.clearTimeout,u_=H&&H.now!==me.Date.now&&H.now,h_=O.setTimeout!==me.setTimeout&&O.setTimeout,ma=ae.ceil,ya=ae.floor,xu=Nt.getOwnPropertySymbols,c_=da?da.isBuffer:e,qd=O.isFinite,d_=la.join,f_=Ud(Nt.keys,Nt),le=ae.max,xe=ae.min,g_=H.now,p_=O.parseInt,$d=ae.random,__=la.reverse,wu=Sr(O,"DataView"),qs=Sr(O,"Map"),Su=Sr(O,"Promise"),ns=Sr(O,"Set"),$s=Sr(O,"WeakMap"),Js=Sr(Nt,"create"),Ca=$s&&new $s,is={},m_=Ir(wu),y_=Ir(qs),C_=Ir(Su),v_=Ir(ns),E_=Ir($s),va=Ui?Ui.prototype:e,Qs=va?va.valueOf:e,Jd=va?va.toString:e;function C(o){if(qt(o)&&!gt(o)&&!(o instanceof It)){if(o instanceof xn)return o;if(Pt.call(o,"__wrapped__"))return tg(o)}return new xn(o)}var rs=function(){function o(){}return function(l){if(!Kt(l))return{};if(Kd)return Kd(l);o.prototype=l;var c=new o;return o.prototype=e,c}}();function Ea(){}function xn(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=e}C.templateSettings={escape:ea,evaluate:Ye,interpolate:Hn,variable:"",imports:{_:C}},C.prototype=Ea.prototype,C.prototype.constructor=C,xn.prototype=rs(Ea.prototype),xn.prototype.constructor=xn;function It(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ht,this.__views__=[]}function x_(){var o=new It(this.__wrapped__);return o.__actions__=Ke(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Ke(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Ke(this.__views__),o}function w_(){if(this.__filtered__){var o=new It(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function S_(){var o=this.__wrapped__.value(),l=this.__dir__,c=gt(o),p=l<0,y=c?o.length:0,E=Dm(0,y,this.__views__),I=E.start,T=E.end,L=T-I,N=p?T:I-1,G=this.__iteratees__,W=G.length,X=0,q=xe(L,this.__takeCount__);if(!c||!p&&y==L&&q==L)return wf(o,this.__actions__);var rt=[];t:for(;L--&&X<q;){N+=l;for(var yt=-1,st=o[N];++yt<W;){var St=G[yt],Rt=St.iteratee,hn=St.type,Ne=Rt(st);if(hn==lt)st=Ne;else if(!Ne){if(hn==tt)continue t;break t}}rt[X++]=st}return rt}It.prototype=rs(Ea.prototype),It.prototype.constructor=It;function vr(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var p=o[l];this.set(p[0],p[1])}}function I_(){this.__data__=Js?Js(null):{},this.size=0}function R_(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function T_(o){var l=this.__data__;if(Js){var c=l[o];return c===h?e:c}return Pt.call(l,o)?l[o]:e}function A_(o){var l=this.__data__;return Js?l[o]!==e:Pt.call(l,o)}function b_(o,l){var c=this.__data__;return this.size+=this.has(o)?0:1,c[o]=Js&&l===e?h:l,this}vr.prototype.clear=I_,vr.prototype.delete=R_,vr.prototype.get=T_,vr.prototype.has=A_,vr.prototype.set=b_;function hi(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var p=o[l];this.set(p[0],p[1])}}function L_(){this.__data__=[],this.size=0}function M_(o){var l=this.__data__,c=xa(l,o);if(c<0)return!1;var p=l.length-1;return c==p?l.pop():pa.call(l,c,1),--this.size,!0}function k_(o){var l=this.__data__,c=xa(l,o);return c<0?e:l[c][1]}function F_(o){return xa(this.__data__,o)>-1}function O_(o,l){var c=this.__data__,p=xa(c,o);return p<0?(++this.size,c.push([o,l])):c[p][1]=l,this}hi.prototype.clear=L_,hi.prototype.delete=M_,hi.prototype.get=k_,hi.prototype.has=F_,hi.prototype.set=O_;function ci(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var p=o[l];this.set(p[0],p[1])}}function P_(){this.size=0,this.__data__={hash:new vr,map:new(qs||hi),string:new vr}}function D_(o){var l=Oa(this,o).delete(o);return this.size-=l?1:0,l}function B_(o){return Oa(this,o).get(o)}function N_(o){return Oa(this,o).has(o)}function G_(o,l){var c=Oa(this,o),p=c.size;return c.set(o,l),this.size+=c.size==p?0:1,this}ci.prototype.clear=P_,ci.prototype.delete=D_,ci.prototype.get=B_,ci.prototype.has=N_,ci.prototype.set=G_;function Er(o){var l=-1,c=o==null?0:o.length;for(this.__data__=new ci;++l<c;)this.add(o[l])}function V_(o){return this.__data__.set(o,h),this}function z_(o){return this.__data__.has(o)}Er.prototype.add=Er.prototype.push=V_,Er.prototype.has=z_;function Bn(o){var l=this.__data__=new hi(o);this.size=l.size}function W_(){this.__data__=new hi,this.size=0}function U_(o){var l=this.__data__,c=l.delete(o);return this.size=l.size,c}function Y_(o){return this.__data__.get(o)}function X_(o){return this.__data__.has(o)}function Z_(o,l){var c=this.__data__;if(c instanceof hi){var p=c.__data__;if(!qs||p.length<i-1)return p.push([o,l]),this.size=++c.size,this;c=this.__data__=new ci(p)}return c.set(o,l),this.size=c.size,this}Bn.prototype.clear=W_,Bn.prototype.delete=U_,Bn.prototype.get=Y_,Bn.prototype.has=X_,Bn.prototype.set=Z_;function Qd(o,l){var c=gt(o),p=!c&&Rr(o),y=!c&&!p&&Hi(o),E=!c&&!p&&!y&&ls(o),I=c||p||y||E,T=I?yu(o.length,n_):[],L=T.length;for(var N in o)(l||Pt.call(o,N))&&!(I&&(N=="length"||y&&(N=="offset"||N=="parent")||E&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||pi(N,L)))&&T.push(N);return T}function tf(o){var l=o.length;return l?o[Pu(0,l-1)]:e}function K_(o,l){return Pa(Ke(o),xr(l,0,o.length))}function H_(o){return Pa(Ke(o))}function Iu(o,l,c){(c!==e&&!Nn(o[l],c)||c===e&&!(l in o))&&di(o,l,c)}function to(o,l,c){var p=o[l];(!(Pt.call(o,l)&&Nn(p,c))||c===e&&!(l in o))&&di(o,l,c)}function xa(o,l){for(var c=o.length;c--;)if(Nn(o[c][0],l))return c;return-1}function j_(o,l,c,p){return Yi(o,function(y,E,I){l(p,y,c(y),I)}),p}function ef(o,l){return o&&qn(l,he(l),o)}function q_(o,l){return o&&qn(l,je(l),o)}function di(o,l,c){l=="__proto__"&&_a?_a(o,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):o[l]=c}function Ru(o,l){for(var c=-1,p=l.length,y=F(p),E=o==null;++c<p;)y[c]=E?e:oh(o,l[c]);return y}function xr(o,l,c){return o===o&&(c!==e&&(o=o<=c?o:c),l!==e&&(o=o>=l?o:l)),o}function wn(o,l,c,p,y,E){var I,T=l&g,L=l&_,N=l&m;if(c&&(I=y?c(o,p,y,E):c(o)),I!==e)return I;if(!Kt(o))return o;var G=gt(o);if(G){if(I=Nm(o),!T)return Ke(o,I)}else{var W=we(o),X=W==Zn||W==Xr;if(Hi(o))return Rf(o,T);if(W==Oe||W==Ht||X&&!y){if(I=L||X?{}:Xf(o),!T)return L?Tm(o,q_(I,o)):Rm(o,ef(I,o))}else{if(!zt[W])return y?o:{};I=Gm(o,W,T)}}E||(E=new Bn);var q=E.get(o);if(q)return q;E.set(o,I),vg(o)?o.forEach(function(st){I.add(wn(st,l,c,st,o,E))}):yg(o)&&o.forEach(function(st,St){I.set(St,wn(st,l,c,St,o,E))});var rt=N?L?Zu:Xu:L?je:he,yt=G?e:rt(o);return vn(yt||o,function(st,St){yt&&(St=st,st=o[St]),to(I,St,wn(st,l,c,St,o,E))}),I}function $_(o){var l=he(o);return function(c){return nf(c,o,l)}}function nf(o,l,c){var p=c.length;if(o==null)return!p;for(o=Nt(o);p--;){var y=c[p],E=l[y],I=o[y];if(I===e&&!(y in o)||!E(I))return!1}return!0}function rf(o,l,c){if(typeof o!="function")throw new En(a);return ao(function(){o.apply(e,c)},l)}function eo(o,l,c,p){var y=-1,E=sa,I=!0,T=o.length,L=[],N=l.length;if(!T)return L;c&&(l=Xt(l,an(c))),p?(E=du,I=!1):l.length>=i&&(E=Hs,I=!1,l=new Er(l));t:for(;++y<T;){var G=o[y],W=c==null?G:c(G);if(G=p||G!==0?G:0,I&&W===W){for(var X=N;X--;)if(l[X]===W)continue t;L.push(G)}else E(l,W,p)||L.push(G)}return L}var Yi=Mf(jn),sf=Mf(Au,!0);function J_(o,l){var c=!0;return Yi(o,function(p,y,E){return c=!!l(p,y,E),c}),c}function wa(o,l,c){for(var p=-1,y=o.length;++p<y;){var E=o[p],I=l(E);if(I!=null&&(T===e?I===I&&!un(I):c(I,T)))var T=I,L=E}return L}function Q_(o,l,c,p){var y=o.length;for(c=mt(c),c<0&&(c=-c>y?0:y+c),p=p===e||p>y?y:mt(p),p<0&&(p+=y),p=c>p?0:xg(p);c<p;)o[c++]=l;return o}function of(o,l){var c=[];return Yi(o,function(p,y,E){l(p,y,E)&&c.push(p)}),c}function ye(o,l,c,p,y){var E=-1,I=o.length;for(c||(c=zm),y||(y=[]);++E<I;){var T=o[E];l>0&&c(T)?l>1?ye(T,l-1,c,p,y):zi(y,T):p||(y[y.length]=T)}return y}var Tu=kf(),af=kf(!0);function jn(o,l){return o&&Tu(o,l,he)}function Au(o,l){return o&&af(o,l,he)}function Sa(o,l){return Vi(l,function(c){return _i(o[c])})}function wr(o,l){l=Zi(l,o);for(var c=0,p=l.length;o!=null&&c<p;)o=o[$n(l[c++])];return c&&c==p?o:e}function lf(o,l,c){var p=l(o);return gt(o)?p:zi(p,c(o))}function De(o){return o==null?o===e?li:Kn:Cr&&Cr in Nt(o)?Pm(o):Hm(o)}function bu(o,l){return o>l}function tm(o,l){return o!=null&&Pt.call(o,l)}function em(o,l){return o!=null&&l in Nt(o)}function nm(o,l,c){return o>=xe(l,c)&&o<le(l,c)}function Lu(o,l,c){for(var p=c?du:sa,y=o[0].length,E=o.length,I=E,T=F(E),L=1/0,N=[];I--;){var G=o[I];I&&l&&(G=Xt(G,an(l))),L=xe(G.length,L),T[I]=!c&&(l||y>=120&&G.length>=120)?new Er(I&&G):e}G=o[0];var W=-1,X=T[0];t:for(;++W<y&&N.length<L;){var q=G[W],rt=l?l(q):q;if(q=c||q!==0?q:0,!(X?Hs(X,rt):p(N,rt,c))){for(I=E;--I;){var yt=T[I];if(!(yt?Hs(yt,rt):p(o[I],rt,c)))continue t}X&&X.push(rt),N.push(q)}}return N}function im(o,l,c,p){return jn(o,function(y,E,I){l(p,c(y),E,I)}),p}function no(o,l,c){l=Zi(l,o),o=jf(o,l);var p=o==null?o:o[$n(In(l))];return p==null?e:on(p,o,c)}function uf(o){return qt(o)&&De(o)==Ht}function rm(o){return qt(o)&&De(o)==Ue}function sm(o){return qt(o)&&De(o)==nn}function io(o,l,c,p,y){return o===l?!0:o==null||l==null||!qt(o)&&!qt(l)?o!==o&&l!==l:om(o,l,c,p,io,y)}function om(o,l,c,p,y,E){var I=gt(o),T=gt(l),L=I?Qt:we(o),N=T?Qt:we(l);L=L==Ht?Oe:L,N=N==Ht?Oe:N;var G=L==Oe,W=N==Oe,X=L==N;if(X&&Hi(o)){if(!Hi(l))return!1;I=!0,G=!1}if(X&&!G)return E||(E=new Bn),I||ls(o)?Wf(o,l,c,p,y,E):Fm(o,l,L,c,p,y,E);if(!(c&v)){var q=G&&Pt.call(o,"__wrapped__"),rt=W&&Pt.call(l,"__wrapped__");if(q||rt){var yt=q?o.value():o,st=rt?l.value():l;return E||(E=new Bn),y(yt,st,c,p,E)}}return X?(E||(E=new Bn),Om(o,l,c,p,y,E)):!1}function am(o){return qt(o)&&we(o)==ie}function Mu(o,l,c,p){var y=c.length,E=y,I=!p;if(o==null)return!E;for(o=Nt(o);y--;){var T=c[y];if(I&&T[2]?T[1]!==o[T[0]]:!(T[0]in o))return!1}for(;++y<E;){T=c[y];var L=T[0],N=o[L],G=T[1];if(I&&T[2]){if(N===e&&!(L in o))return!1}else{var W=new Bn;if(p)var X=p(N,G,L,o,l,W);if(!(X===e?io(G,N,v|x,p,W):X))return!1}}return!0}function hf(o){if(!Kt(o)||Um(o))return!1;var l=_i(o)?a_:$p;return l.test(Ir(o))}function lm(o){return qt(o)&&De(o)==pe}function um(o){return qt(o)&&we(o)==Yt}function hm(o){return qt(o)&&za(o.length)&&!!Ut[De(o)]}function cf(o){return typeof o=="function"?o:o==null?qe:typeof o=="object"?gt(o)?gf(o[0],o[1]):ff(o):Fg(o)}function ku(o){if(!oo(o))return f_(o);var l=[];for(var c in Nt(o))Pt.call(o,c)&&c!="constructor"&&l.push(c);return l}function cm(o){if(!Kt(o))return Km(o);var l=oo(o),c=[];for(var p in o)p=="constructor"&&(l||!Pt.call(o,p))||c.push(p);return c}function Fu(o,l){return o<l}function df(o,l){var c=-1,p=He(o)?F(o.length):[];return Yi(o,function(y,E,I){p[++c]=l(y,E,I)}),p}function ff(o){var l=Hu(o);return l.length==1&&l[0][2]?Kf(l[0][0],l[0][1]):function(c){return c===o||Mu(c,o,l)}}function gf(o,l){return qu(o)&&Zf(l)?Kf($n(o),l):function(c){var p=oh(c,o);return p===e&&p===l?ah(c,o):io(l,p,v|x)}}function Ia(o,l,c,p,y){o!==l&&Tu(l,function(E,I){if(y||(y=new Bn),Kt(E))dm(o,l,I,c,Ia,p,y);else{var T=p?p(Ju(o,I),E,I+"",o,l,y):e;T===e&&(T=E),Iu(o,I,T)}},je)}function dm(o,l,c,p,y,E,I){var T=Ju(o,c),L=Ju(l,c),N=I.get(L);if(N){Iu(o,c,N);return}var G=E?E(T,L,c+"",o,l,I):e,W=G===e;if(W){var X=gt(L),q=!X&&Hi(L),rt=!X&&!q&&ls(L);G=L,X||q||rt?gt(T)?G=T:ee(T)?G=Ke(T):q?(W=!1,G=Rf(L,!0)):rt?(W=!1,G=Tf(L,!0)):G=[]:lo(L)||Rr(L)?(G=T,Rr(T)?G=wg(T):(!Kt(T)||_i(T))&&(G=Xf(L))):W=!1}W&&(I.set(L,G),y(G,L,p,E,I),I.delete(L)),Iu(o,c,G)}function pf(o,l){var c=o.length;if(c)return l+=l<0?c:0,pi(l,c)?o[l]:e}function _f(o,l,c){l.length?l=Xt(l,function(E){return gt(E)?function(I){return wr(I,E.length===1?E[0]:E)}:E}):l=[qe];var p=-1;l=Xt(l,an(it()));var y=df(o,function(E,I,T){var L=Xt(l,function(N){return N(E)});return{criteria:L,index:++p,value:E}});return G2(y,function(E,I){return Im(E,I,c)})}function fm(o,l){return mf(o,l,function(c,p){return ah(o,p)})}function mf(o,l,c){for(var p=-1,y=l.length,E={};++p<y;){var I=l[p],T=wr(o,I);c(T,I)&&ro(E,Zi(I,o),T)}return E}function gm(o){return function(l){return wr(l,o)}}function Ou(o,l,c,p){var y=p?N2:$r,E=-1,I=l.length,T=o;for(o===l&&(l=Ke(l)),c&&(T=Xt(o,an(c)));++E<I;)for(var L=0,N=l[E],G=c?c(N):N;(L=y(T,G,L,p))>-1;)T!==o&&pa.call(T,L,1),pa.call(o,L,1);return o}function yf(o,l){for(var c=o?l.length:0,p=c-1;c--;){var y=l[c];if(c==p||y!==E){var E=y;pi(y)?pa.call(o,y,1):Nu(o,y)}}return o}function Pu(o,l){return o+ya($d()*(l-o+1))}function pm(o,l,c,p){for(var y=-1,E=le(ma((l-o)/(c||1)),0),I=F(E);E--;)I[p?E:++y]=o,o+=c;return I}function Du(o,l){var c="";if(!o||l<1||l>ot)return c;do l%2&&(c+=o),l=ya(l/2),l&&(o+=o);while(l);return c}function Et(o,l){return Qu(Hf(o,l,qe),o+"")}function _m(o){return tf(us(o))}function mm(o,l){var c=us(o);return Pa(c,xr(l,0,c.length))}function ro(o,l,c,p){if(!Kt(o))return o;l=Zi(l,o);for(var y=-1,E=l.length,I=E-1,T=o;T!=null&&++y<E;){var L=$n(l[y]),N=c;if(L==="__proto__"||L==="constructor"||L==="prototype")return o;if(y!=I){var G=T[L];N=p?p(G,L,T):e,N===e&&(N=Kt(G)?G:pi(l[y+1])?[]:{})}to(T,L,N),T=T[L]}return o}var Cf=Ca?function(o,l){return Ca.set(o,l),o}:qe,ym=_a?function(o,l){return _a(o,"toString",{configurable:!0,enumerable:!1,value:uh(l),writable:!0})}:qe;function Cm(o){return Pa(us(o))}function Sn(o,l,c){var p=-1,y=o.length;l<0&&(l=-l>y?0:y+l),c=c>y?y:c,c<0&&(c+=y),y=l>c?0:c-l>>>0,l>>>=0;for(var E=F(y);++p<y;)E[p]=o[p+l];return E}function vm(o,l){var c;return Yi(o,function(p,y,E){return c=l(p,y,E),!c}),!!c}function Ra(o,l,c){var p=0,y=o==null?p:o.length;if(typeof l=="number"&&l===l&&y<=Bt){for(;p<y;){var E=p+y>>>1,I=o[E];I!==null&&!un(I)&&(c?I<=l:I<l)?p=E+1:y=E}return y}return Bu(o,l,qe,c)}function Bu(o,l,c,p){var y=0,E=o==null?0:o.length;if(E===0)return 0;l=c(l);for(var I=l!==l,T=l===null,L=un(l),N=l===e;y<E;){var G=ya((y+E)/2),W=c(o[G]),X=W!==e,q=W===null,rt=W===W,yt=un(W);if(I)var st=p||rt;else N?st=rt&&(p||X):T?st=rt&&X&&(p||!q):L?st=rt&&X&&!q&&(p||!yt):q||yt?st=!1:st=p?W<=l:W<l;st?y=G+1:E=G}return xe(E,wt)}function vf(o,l){for(var c=-1,p=o.length,y=0,E=[];++c<p;){var I=o[c],T=l?l(I):I;if(!c||!Nn(T,L)){var L=T;E[y++]=I===0?0:I}}return E}function Ef(o){return typeof o=="number"?o:un(o)?dt:+o}function ln(o){if(typeof o=="string")return o;if(gt(o))return Xt(o,ln)+"";if(un(o))return Jd?Jd.call(o):"";var l=o+"";return l=="0"&&1/o==-_t?"-0":l}function Xi(o,l,c){var p=-1,y=sa,E=o.length,I=!0,T=[],L=T;if(c)I=!1,y=du;else if(E>=i){var N=l?null:Mm(o);if(N)return aa(N);I=!1,y=Hs,L=new Er}else L=l?[]:T;t:for(;++p<E;){var G=o[p],W=l?l(G):G;if(G=c||G!==0?G:0,I&&W===W){for(var X=L.length;X--;)if(L[X]===W)continue t;l&&L.push(W),T.push(G)}else y(L,W,c)||(L!==T&&L.push(W),T.push(G))}return T}function Nu(o,l){return l=Zi(l,o),o=jf(o,l),o==null||delete o[$n(In(l))]}function xf(o,l,c,p){return ro(o,l,c(wr(o,l)),p)}function Ta(o,l,c,p){for(var y=o.length,E=p?y:-1;(p?E--:++E<y)&&l(o[E],E,o););return c?Sn(o,p?0:E,p?E+1:y):Sn(o,p?E+1:0,p?y:E)}function wf(o,l){var c=o;return c instanceof It&&(c=c.value()),fu(l,function(p,y){return y.func.apply(y.thisArg,zi([p],y.args))},c)}function Gu(o,l,c){var p=o.length;if(p<2)return p?Xi(o[0]):[];for(var y=-1,E=F(p);++y<p;)for(var I=o[y],T=-1;++T<p;)T!=y&&(E[y]=eo(E[y]||I,o[T],l,c));return Xi(ye(E,1),l,c)}function Sf(o,l,c){for(var p=-1,y=o.length,E=l.length,I={};++p<y;){var T=p<E?l[p]:e;c(I,o[p],T)}return I}function Vu(o){return ee(o)?o:[]}function zu(o){return typeof o=="function"?o:qe}function Zi(o,l){return gt(o)?o:qu(o,l)?[o]:Qf(Mt(o))}var Em=Et;function Ki(o,l,c){var p=o.length;return c=c===e?p:c,!l&&c>=p?o:Sn(o,l,c)}var If=l_||function(o){return me.clearTimeout(o)};function Rf(o,l){if(l)return o.slice();var c=o.length,p=Zd?Zd(c):new o.constructor(c);return o.copy(p),p}function Wu(o){var l=new o.constructor(o.byteLength);return new fa(l).set(new fa(o)),l}function xm(o,l){var c=l?Wu(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.byteLength)}function wm(o){var l=new o.constructor(o.source,ld.exec(o));return l.lastIndex=o.lastIndex,l}function Sm(o){return Qs?Nt(Qs.call(o)):{}}function Tf(o,l){var c=l?Wu(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.length)}function Af(o,l){if(o!==l){var c=o!==e,p=o===null,y=o===o,E=un(o),I=l!==e,T=l===null,L=l===l,N=un(l);if(!T&&!N&&!E&&o>l||E&&I&&L&&!T&&!N||p&&I&&L||!c&&L||!y)return 1;if(!p&&!E&&!N&&o<l||N&&c&&y&&!p&&!E||T&&c&&y||!I&&y||!L)return-1}return 0}function Im(o,l,c){for(var p=-1,y=o.criteria,E=l.criteria,I=y.length,T=c.length;++p<I;){var L=Af(y[p],E[p]);if(L){if(p>=T)return L;var N=c[p];return L*(N=="desc"?-1:1)}}return o.index-l.index}function bf(o,l,c,p){for(var y=-1,E=o.length,I=c.length,T=-1,L=l.length,N=le(E-I,0),G=F(L+N),W=!p;++T<L;)G[T]=l[T];for(;++y<I;)(W||y<E)&&(G[c[y]]=o[y]);for(;N--;)G[T++]=o[y++];return G}function Lf(o,l,c,p){for(var y=-1,E=o.length,I=-1,T=c.length,L=-1,N=l.length,G=le(E-T,0),W=F(G+N),X=!p;++y<G;)W[y]=o[y];for(var q=y;++L<N;)W[q+L]=l[L];for(;++I<T;)(X||y<E)&&(W[q+c[I]]=o[y++]);return W}function Ke(o,l){var c=-1,p=o.length;for(l||(l=F(p));++c<p;)l[c]=o[c];return l}function qn(o,l,c,p){var y=!c;c||(c={});for(var E=-1,I=l.length;++E<I;){var T=l[E],L=p?p(c[T],o[T],T,c,o):e;L===e&&(L=o[T]),y?di(c,T,L):to(c,T,L)}return c}function Rm(o,l){return qn(o,ju(o),l)}function Tm(o,l){return qn(o,Uf(o),l)}function Aa(o,l){return function(c,p){var y=gt(c)?k2:j_,E=l?l():{};return y(c,o,it(p,2),E)}}function ss(o){return Et(function(l,c){var p=-1,y=c.length,E=y>1?c[y-1]:e,I=y>2?c[2]:e;for(E=o.length>3&&typeof E=="function"?(y--,E):e,I&&Be(c[0],c[1],I)&&(E=y<3?e:E,y=1),l=Nt(l);++p<y;){var T=c[p];T&&o(l,T,p,E)}return l})}function Mf(o,l){return function(c,p){if(c==null)return c;if(!He(c))return o(c,p);for(var y=c.length,E=l?y:-1,I=Nt(c);(l?E--:++E<y)&&p(I[E],E,I)!==!1;);return c}}function kf(o){return function(l,c,p){for(var y=-1,E=Nt(l),I=p(l),T=I.length;T--;){var L=I[o?T:++y];if(c(E[L],L,E)===!1)break}return l}}function Am(o,l,c){var p=l&w,y=so(o);function E(){var I=this&&this!==me&&this instanceof E?y:o;return I.apply(p?c:this,arguments)}return E}function Ff(o){return function(l){l=Mt(l);var c=Jr(l)?Dn(l):e,p=c?c[0]:l.charAt(0),y=c?Ki(c,1).join(""):l.slice(1);return p[o]()+y}}function os(o){return function(l){return fu(Mg(Lg(l).replace(y2,"")),o,"")}}function so(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var c=rs(o.prototype),p=o.apply(c,l);return Kt(p)?p:c}}function bm(o,l,c){var p=so(o);function y(){for(var E=arguments.length,I=F(E),T=E,L=as(y);T--;)I[T]=arguments[T];var N=E<3&&I[0]!==L&&I[E-1]!==L?[]:Wi(I,L);if(E-=N.length,E<c)return Nf(o,l,ba,y.placeholder,e,I,N,e,e,c-E);var G=this&&this!==me&&this instanceof y?p:o;return on(G,this,I)}return y}function Of(o){return function(l,c,p){var y=Nt(l);if(!He(l)){var E=it(c,3);l=he(l),c=function(T){return E(y[T],T,y)}}var I=o(l,c,p);return I>-1?y[E?l[I]:I]:e}}function Pf(o){return gi(function(l){var c=l.length,p=c,y=xn.prototype.thru;for(o&&l.reverse();p--;){var E=l[p];if(typeof E!="function")throw new En(a);if(y&&!I&&Fa(E)=="wrapper")var I=new xn([],!0)}for(p=I?p:c;++p<c;){E=l[p];var T=Fa(E),L=T=="wrapper"?Ku(E):e;L&&$u(L[0])&&L[1]==(B|k|b|P)&&!L[4].length&&L[9]==1?I=I[Fa(L[0])].apply(I,L[3]):I=E.length==1&&$u(E)?I[T]():I.thru(E)}return function(){var N=arguments,G=N[0];if(I&&N.length==1&&gt(G))return I.plant(G).value();for(var W=0,X=c?l[W].apply(this,N):G;++W<c;)X=l[W].call(this,X);return X}})}function ba(o,l,c,p,y,E,I,T,L,N){var G=l&B,W=l&w,X=l&S,q=l&(k|M),rt=l&z,yt=X?e:so(o);function st(){for(var St=arguments.length,Rt=F(St),hn=St;hn--;)Rt[hn]=arguments[hn];if(q)var Ne=as(st),cn=z2(Rt,Ne);if(p&&(Rt=bf(Rt,p,y,q)),E&&(Rt=Lf(Rt,E,I,q)),St-=cn,q&&St<N){var ne=Wi(Rt,Ne);return Nf(o,l,ba,st.placeholder,c,Rt,ne,T,L,N-St)}var Gn=W?c:this,yi=X?Gn[o]:o;return St=Rt.length,T?Rt=jm(Rt,T):rt&&St>1&&Rt.reverse(),G&&L<St&&(Rt.length=L),this&&this!==me&&this instanceof st&&(yi=yt||so(yi)),yi.apply(Gn,Rt)}return st}function Df(o,l){return function(c,p){return im(c,o,l(p),{})}}function La(o,l){return function(c,p){var y;if(c===e&&p===e)return l;if(c!==e&&(y=c),p!==e){if(y===e)return p;typeof c=="string"||typeof p=="string"?(c=ln(c),p=ln(p)):(c=Ef(c),p=Ef(p)),y=o(c,p)}return y}}function Uu(o){return gi(function(l){return l=Xt(l,an(it())),Et(function(c){var p=this;return o(l,function(y){return on(y,p,c)})})})}function Ma(o,l){l=l===e?" ":ln(l);var c=l.length;if(c<2)return c?Du(l,o):l;var p=Du(l,ma(o/Qr(l)));return Jr(l)?Ki(Dn(p),0,o).join(""):p.slice(0,o)}function Lm(o,l,c,p){var y=l&w,E=so(o);function I(){for(var T=-1,L=arguments.length,N=-1,G=p.length,W=F(G+L),X=this&&this!==me&&this instanceof I?E:o;++N<G;)W[N]=p[N];for(;L--;)W[N++]=arguments[++T];return on(X,y?c:this,W)}return I}function Bf(o){return function(l,c,p){return p&&typeof p!="number"&&Be(l,c,p)&&(c=p=e),l=mi(l),c===e?(c=l,l=0):c=mi(c),p=p===e?l<c?1:-1:mi(p),pm(l,c,p,o)}}function ka(o){return function(l,c){return typeof l=="string"&&typeof c=="string"||(l=Rn(l),c=Rn(c)),o(l,c)}}function Nf(o,l,c,p,y,E,I,T,L,N){var G=l&k,W=G?I:e,X=G?e:I,q=G?E:e,rt=G?e:E;l|=G?b:V,l&=~(G?V:b),l&R||(l&=~(w|S));var yt=[o,l,y,q,W,rt,X,T,L,N],st=c.apply(e,yt);return $u(o)&&qf(st,yt),st.placeholder=p,$f(st,o,l)}function Yu(o){var l=ae[o];return function(c,p){if(c=Rn(c),p=p==null?0:xe(mt(p),292),p&&qd(c)){var y=(Mt(c)+"e").split("e"),E=l(y[0]+"e"+(+y[1]+p));return y=(Mt(E)+"e").split("e"),+(y[0]+"e"+(+y[1]-p))}return l(c)}}var Mm=ns&&1/aa(new ns([,-0]))[1]==_t?function(o){return new ns(o)}:dh;function Gf(o){return function(l){var c=we(l);return c==ie?vu(l):c==Yt?H2(l):V2(l,o(l))}}function fi(o,l,c,p,y,E,I,T){var L=l&S;if(!L&&typeof o!="function")throw new En(a);var N=p?p.length:0;if(N||(l&=~(b|V),p=y=e),I=I===e?I:le(mt(I),0),T=T===e?T:mt(T),N-=y?y.length:0,l&V){var G=p,W=y;p=y=e}var X=L?e:Ku(o),q=[o,l,c,p,y,G,W,E,I,T];if(X&&Zm(q,X),o=q[0],l=q[1],c=q[2],p=q[3],y=q[4],T=q[9]=q[9]===e?L?0:o.length:le(q[9]-N,0),!T&&l&(k|M)&&(l&=~(k|M)),!l||l==w)var rt=Am(o,l,c);else l==k||l==M?rt=bm(o,l,T):(l==b||l==(w|b))&&!y.length?rt=Lm(o,l,c,p):rt=ba.apply(e,q);var yt=X?Cf:qf;return $f(yt(rt,q),o,l)}function Vf(o,l,c,p){return o===e||Nn(o,es[c])&&!Pt.call(p,c)?l:o}function zf(o,l,c,p,y,E){return Kt(o)&&Kt(l)&&(E.set(l,o),Ia(o,l,e,zf,E),E.delete(l)),o}function km(o){return lo(o)?e:o}function Wf(o,l,c,p,y,E){var I=c&v,T=o.length,L=l.length;if(T!=L&&!(I&&L>T))return!1;var N=E.get(o),G=E.get(l);if(N&&G)return N==l&&G==o;var W=-1,X=!0,q=c&x?new Er:e;for(E.set(o,l),E.set(l,o);++W<T;){var rt=o[W],yt=l[W];if(p)var st=I?p(yt,rt,W,l,o,E):p(rt,yt,W,o,l,E);if(st!==e){if(st)continue;X=!1;break}if(q){if(!gu(l,function(St,Rt){if(!Hs(q,Rt)&&(rt===St||y(rt,St,c,p,E)))return q.push(Rt)})){X=!1;break}}else if(!(rt===yt||y(rt,yt,c,p,E))){X=!1;break}}return E.delete(o),E.delete(l),X}function Fm(o,l,c,p,y,E,I){switch(c){case rn:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case Ue:return!(o.byteLength!=l.byteLength||!E(new fa(o),new fa(l)));case fe:case nn:case Fn:return Nn(+o,+l);case ai:return o.name==l.name&&o.message==l.message;case pe:case Pe:return o==l+"";case ie:var T=vu;case Yt:var L=p&v;if(T||(T=aa),o.size!=l.size&&!L)return!1;var N=I.get(o);if(N)return N==l;p|=x,I.set(o,l);var G=Wf(T(o),T(l),p,y,E,I);return I.delete(o),G;case mn:if(Qs)return Qs.call(o)==Qs.call(l)}return!1}function Om(o,l,c,p,y,E){var I=c&v,T=Xu(o),L=T.length,N=Xu(l),G=N.length;if(L!=G&&!I)return!1;for(var W=L;W--;){var X=T[W];if(!(I?X in l:Pt.call(l,X)))return!1}var q=E.get(o),rt=E.get(l);if(q&&rt)return q==l&&rt==o;var yt=!0;E.set(o,l),E.set(l,o);for(var st=I;++W<L;){X=T[W];var St=o[X],Rt=l[X];if(p)var hn=I?p(Rt,St,X,l,o,E):p(St,Rt,X,o,l,E);if(!(hn===e?St===Rt||y(St,Rt,c,p,E):hn)){yt=!1;break}st||(st=X=="constructor")}if(yt&&!st){var Ne=o.constructor,cn=l.constructor;Ne!=cn&&"constructor"in o&&"constructor"in l&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof cn=="function"&&cn instanceof cn)&&(yt=!1)}return E.delete(o),E.delete(l),yt}function gi(o){return Qu(Hf(o,e,ig),o+"")}function Xu(o){return lf(o,he,ju)}function Zu(o){return lf(o,je,Uf)}var Ku=Ca?function(o){return Ca.get(o)}:dh;function Fa(o){for(var l=o.name+"",c=is[l],p=Pt.call(is,l)?c.length:0;p--;){var y=c[p],E=y.func;if(E==null||E==o)return y.name}return l}function as(o){var l=Pt.call(C,"placeholder")?C:o;return l.placeholder}function it(){var o=C.iteratee||hh;return o=o===hh?cf:o,arguments.length?o(arguments[0],arguments[1]):o}function Oa(o,l){var c=o.__data__;return Wm(l)?c[typeof l=="string"?"string":"hash"]:c.map}function Hu(o){for(var l=he(o),c=l.length;c--;){var p=l[c],y=o[p];l[c]=[p,y,Zf(y)]}return l}function Sr(o,l){var c=X2(o,l);return hf(c)?c:e}function Pm(o){var l=Pt.call(o,Cr),c=o[Cr];try{o[Cr]=e;var p=!0}catch{}var y=ca.call(o);return p&&(l?o[Cr]=c:delete o[Cr]),y}var ju=xu?function(o){return o==null?[]:(o=Nt(o),Vi(xu(o),function(l){return Hd.call(o,l)}))}:fh,Uf=xu?function(o){for(var l=[];o;)zi(l,ju(o)),o=ga(o);return l}:fh,we=De;(wu&&we(new wu(new ArrayBuffer(1)))!=rn||qs&&we(new qs)!=ie||Su&&we(Su.resolve())!=pr||ns&&we(new ns)!=Yt||$s&&we(new $s)!=We)&&(we=function(o){var l=De(o),c=l==Oe?o.constructor:e,p=c?Ir(c):"";if(p)switch(p){case m_:return rn;case y_:return ie;case C_:return pr;case v_:return Yt;case E_:return We}return l});function Dm(o,l,c){for(var p=-1,y=c.length;++p<y;){var E=c[p],I=E.size;switch(E.type){case"drop":o+=I;break;case"dropRight":l-=I;break;case"take":l=xe(l,o+I);break;case"takeRight":o=le(o,l-I);break}}return{start:o,end:l}}function Bm(o){var l=o.match(ru);return l?l[1].split(Yp):[]}function Yf(o,l,c){l=Zi(l,o);for(var p=-1,y=l.length,E=!1;++p<y;){var I=$n(l[p]);if(!(E=o!=null&&c(o,I)))break;o=o[I]}return E||++p!=y?E:(y=o==null?0:o.length,!!y&&za(y)&&pi(I,y)&&(gt(o)||Rr(o)))}function Nm(o){var l=o.length,c=new o.constructor(l);return l&&typeof o[0]=="string"&&Pt.call(o,"index")&&(c.index=o.index,c.input=o.input),c}function Xf(o){return typeof o.constructor=="function"&&!oo(o)?rs(ga(o)):{}}function Gm(o,l,c){var p=o.constructor;switch(l){case Ue:return Wu(o);case fe:case nn:return new p(+o);case rn:return xm(o,c);case te:case Us:case Zr:case Kr:case _r:case Ys:case Xs:case Hr:case jr:return Tf(o,c);case ie:return new p;case Fn:case Pe:return new p(o);case pe:return wm(o);case Yt:return new p;case mn:return Sm(o)}}function Vm(o,l){var c=l.length;if(!c)return o;var p=c-1;return l[p]=(c>1?"& ":"")+l[p],l=l.join(c>2?", ":" "),o.replace(Pn,`{
/* [wrapped with `+l+`] */
`)}function zm(o){return gt(o)||Rr(o)||!!(jd&&o&&o[jd])}function pi(o,l){var c=typeof o;return l=l??ot,!!l&&(c=="number"||c!="symbol"&&Qp.test(o))&&o>-1&&o%1==0&&o<l}function Be(o,l,c){if(!Kt(c))return!1;var p=typeof l;return(p=="number"?He(c)&&pi(l,c.length):p=="string"&&l in c)?Nn(c[l],o):!1}function qu(o,l){if(gt(o))return!1;var c=typeof o;return c=="number"||c=="symbol"||c=="boolean"||o==null||un(o)?!0:yn.test(o)||!Xe.test(o)||l!=null&&o in Nt(l)}function Wm(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function $u(o){var l=Fa(o),c=C[l];if(typeof c!="function"||!(l in It.prototype))return!1;if(o===c)return!0;var p=Ku(c);return!!p&&o===p[0]}function Um(o){return!!Xd&&Xd in o}var Ym=ua?_i:gh;function oo(o){var l=o&&o.constructor,c=typeof l=="function"&&l.prototype||es;return o===c}function Zf(o){return o===o&&!Kt(o)}function Kf(o,l){return function(c){return c==null?!1:c[o]===l&&(l!==e||o in Nt(c))}}function Xm(o){var l=Ga(o,function(p){return c.size===d&&c.clear(),p}),c=l.cache;return l}function Zm(o,l){var c=o[1],p=l[1],y=c|p,E=y<(w|S|B),I=p==B&&c==k||p==B&&c==P&&o[7].length<=l[8]||p==(B|P)&&l[7].length<=l[8]&&c==k;if(!(E||I))return o;p&w&&(o[2]=l[2],y|=c&w?0:R);var T=l[3];if(T){var L=o[3];o[3]=L?bf(L,T,l[4]):T,o[4]=L?Wi(o[3],f):l[4]}return T=l[5],T&&(L=o[5],o[5]=L?Lf(L,T,l[6]):T,o[6]=L?Wi(o[5],f):l[6]),T=l[7],T&&(o[7]=T),p&B&&(o[8]=o[8]==null?l[8]:xe(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=y,o}function Km(o){var l=[];if(o!=null)for(var c in Nt(o))l.push(c);return l}function Hm(o){return ca.call(o)}function Hf(o,l,c){return l=le(l===e?o.length-1:l,0),function(){for(var p=arguments,y=-1,E=le(p.length-l,0),I=F(E);++y<E;)I[y]=p[l+y];y=-1;for(var T=F(l+1);++y<l;)T[y]=p[y];return T[l]=c(I),on(o,this,T)}}function jf(o,l){return l.length<2?o:wr(o,Sn(l,0,-1))}function jm(o,l){for(var c=o.length,p=xe(l.length,c),y=Ke(o);p--;){var E=l[p];o[p]=pi(E,c)?y[E]:e}return o}function Ju(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var qf=Jf(Cf),ao=h_||function(o,l){return me.setTimeout(o,l)},Qu=Jf(ym);function $f(o,l,c){var p=l+"";return Qu(o,Vm(p,qm(Bm(p),c)))}function Jf(o){var l=0,c=0;return function(){var p=g_(),y=Q-(p-c);if(c=p,y>0){if(++l>=j)return arguments[0]}else l=0;return o.apply(e,arguments)}}function Pa(o,l){var c=-1,p=o.length,y=p-1;for(l=l===e?p:l;++c<l;){var E=Pu(c,y),I=o[E];o[E]=o[c],o[c]=I}return o.length=l,o}var Qf=Xm(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(Ze,function(c,p,y,E){l.push(y?E.replace(Kp,"$1"):p||c)}),l});function $n(o){if(typeof o=="string"||un(o))return o;var l=o+"";return l=="0"&&1/o==-_t?"-0":l}function Ir(o){if(o!=null){try{return ha.call(o)}catch{}try{return o+""}catch{}}return""}function qm(o,l){return vn(U,function(c){var p="_."+c[0];l&c[1]&&!sa(o,p)&&o.push(p)}),o.sort()}function tg(o){if(o instanceof It)return o.clone();var l=new xn(o.__wrapped__,o.__chain__);return l.__actions__=Ke(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function $m(o,l,c){(c?Be(o,l,c):l===e)?l=1:l=le(mt(l),0);var p=o==null?0:o.length;if(!p||l<1)return[];for(var y=0,E=0,I=F(ma(p/l));y<p;)I[E++]=Sn(o,y,y+=l);return I}function Jm(o){for(var l=-1,c=o==null?0:o.length,p=0,y=[];++l<c;){var E=o[l];E&&(y[p++]=E)}return y}function Qm(){var o=arguments.length;if(!o)return[];for(var l=F(o-1),c=arguments[0],p=o;p--;)l[p-1]=arguments[p];return zi(gt(c)?Ke(c):[c],ye(l,1))}var t3=Et(function(o,l){return ee(o)?eo(o,ye(l,1,ee,!0)):[]}),e3=Et(function(o,l){var c=In(l);return ee(c)&&(c=e),ee(o)?eo(o,ye(l,1,ee,!0),it(c,2)):[]}),n3=Et(function(o,l){var c=In(l);return ee(c)&&(c=e),ee(o)?eo(o,ye(l,1,ee,!0),e,c):[]});function i3(o,l,c){var p=o==null?0:o.length;return p?(l=c||l===e?1:mt(l),Sn(o,l<0?0:l,p)):[]}function r3(o,l,c){var p=o==null?0:o.length;return p?(l=c||l===e?1:mt(l),l=p-l,Sn(o,0,l<0?0:l)):[]}function s3(o,l){return o&&o.length?Ta(o,it(l,3),!0,!0):[]}function o3(o,l){return o&&o.length?Ta(o,it(l,3),!0):[]}function a3(o,l,c,p){var y=o==null?0:o.length;return y?(c&&typeof c!="number"&&Be(o,l,c)&&(c=0,p=y),Q_(o,l,c,p)):[]}function eg(o,l,c){var p=o==null?0:o.length;if(!p)return-1;var y=c==null?0:mt(c);return y<0&&(y=le(p+y,0)),oa(o,it(l,3),y)}function ng(o,l,c){var p=o==null?0:o.length;if(!p)return-1;var y=p-1;return c!==e&&(y=mt(c),y=c<0?le(p+y,0):xe(y,p-1)),oa(o,it(l,3),y,!0)}function ig(o){var l=o==null?0:o.length;return l?ye(o,1):[]}function l3(o){var l=o==null?0:o.length;return l?ye(o,_t):[]}function u3(o,l){var c=o==null?0:o.length;return c?(l=l===e?1:mt(l),ye(o,l)):[]}function h3(o){for(var l=-1,c=o==null?0:o.length,p={};++l<c;){var y=o[l];p[y[0]]=y[1]}return p}function rg(o){return o&&o.length?o[0]:e}function c3(o,l,c){var p=o==null?0:o.length;if(!p)return-1;var y=c==null?0:mt(c);return y<0&&(y=le(p+y,0)),$r(o,l,y)}function d3(o){var l=o==null?0:o.length;return l?Sn(o,0,-1):[]}var f3=Et(function(o){var l=Xt(o,Vu);return l.length&&l[0]===o[0]?Lu(l):[]}),g3=Et(function(o){var l=In(o),c=Xt(o,Vu);return l===In(c)?l=e:c.pop(),c.length&&c[0]===o[0]?Lu(c,it(l,2)):[]}),p3=Et(function(o){var l=In(o),c=Xt(o,Vu);return l=typeof l=="function"?l:e,l&&c.pop(),c.length&&c[0]===o[0]?Lu(c,e,l):[]});function _3(o,l){return o==null?"":d_.call(o,l)}function In(o){var l=o==null?0:o.length;return l?o[l-1]:e}function m3(o,l,c){var p=o==null?0:o.length;if(!p)return-1;var y=p;return c!==e&&(y=mt(c),y=y<0?le(p+y,0):xe(y,p-1)),l===l?q2(o,l,y):oa(o,Bd,y,!0)}function y3(o,l){return o&&o.length?pf(o,mt(l)):e}var C3=Et(sg);function sg(o,l){return o&&o.length&&l&&l.length?Ou(o,l):o}function v3(o,l,c){return o&&o.length&&l&&l.length?Ou(o,l,it(c,2)):o}function E3(o,l,c){return o&&o.length&&l&&l.length?Ou(o,l,e,c):o}var x3=gi(function(o,l){var c=o==null?0:o.length,p=Ru(o,l);return yf(o,Xt(l,function(y){return pi(y,c)?+y:y}).sort(Af)),p});function w3(o,l){var c=[];if(!(o&&o.length))return c;var p=-1,y=[],E=o.length;for(l=it(l,3);++p<E;){var I=o[p];l(I,p,o)&&(c.push(I),y.push(p))}return yf(o,y),c}function th(o){return o==null?o:__.call(o)}function S3(o,l,c){var p=o==null?0:o.length;return p?(c&&typeof c!="number"&&Be(o,l,c)?(l=0,c=p):(l=l==null?0:mt(l),c=c===e?p:mt(c)),Sn(o,l,c)):[]}function I3(o,l){return Ra(o,l)}function R3(o,l,c){return Bu(o,l,it(c,2))}function T3(o,l){var c=o==null?0:o.length;if(c){var p=Ra(o,l);if(p<c&&Nn(o[p],l))return p}return-1}function A3(o,l){return Ra(o,l,!0)}function b3(o,l,c){return Bu(o,l,it(c,2),!0)}function L3(o,l){var c=o==null?0:o.length;if(c){var p=Ra(o,l,!0)-1;if(Nn(o[p],l))return p}return-1}function M3(o){return o&&o.length?vf(o):[]}function k3(o,l){return o&&o.length?vf(o,it(l,2)):[]}function F3(o){var l=o==null?0:o.length;return l?Sn(o,1,l):[]}function O3(o,l,c){return o&&o.length?(l=c||l===e?1:mt(l),Sn(o,0,l<0?0:l)):[]}function P3(o,l,c){var p=o==null?0:o.length;return p?(l=c||l===e?1:mt(l),l=p-l,Sn(o,l<0?0:l,p)):[]}function D3(o,l){return o&&o.length?Ta(o,it(l,3),!1,!0):[]}function B3(o,l){return o&&o.length?Ta(o,it(l,3)):[]}var N3=Et(function(o){return Xi(ye(o,1,ee,!0))}),G3=Et(function(o){var l=In(o);return ee(l)&&(l=e),Xi(ye(o,1,ee,!0),it(l,2))}),V3=Et(function(o){var l=In(o);return l=typeof l=="function"?l:e,Xi(ye(o,1,ee,!0),e,l)});function z3(o){return o&&o.length?Xi(o):[]}function W3(o,l){return o&&o.length?Xi(o,it(l,2)):[]}function U3(o,l){return l=typeof l=="function"?l:e,o&&o.length?Xi(o,e,l):[]}function eh(o){if(!(o&&o.length))return[];var l=0;return o=Vi(o,function(c){if(ee(c))return l=le(c.length,l),!0}),yu(l,function(c){return Xt(o,pu(c))})}function og(o,l){if(!(o&&o.length))return[];var c=eh(o);return l==null?c:Xt(c,function(p){return on(l,e,p)})}var Y3=Et(function(o,l){return ee(o)?eo(o,l):[]}),X3=Et(function(o){return Gu(Vi(o,ee))}),Z3=Et(function(o){var l=In(o);return ee(l)&&(l=e),Gu(Vi(o,ee),it(l,2))}),K3=Et(function(o){var l=In(o);return l=typeof l=="function"?l:e,Gu(Vi(o,ee),e,l)}),H3=Et(eh);function j3(o,l){return Sf(o||[],l||[],to)}function q3(o,l){return Sf(o||[],l||[],ro)}var $3=Et(function(o){var l=o.length,c=l>1?o[l-1]:e;return c=typeof c=="function"?(o.pop(),c):e,og(o,c)});function ag(o){var l=C(o);return l.__chain__=!0,l}function J3(o,l){return l(o),o}function Da(o,l){return l(o)}var Q3=gi(function(o){var l=o.length,c=l?o[0]:0,p=this.__wrapped__,y=function(E){return Ru(E,o)};return l>1||this.__actions__.length||!(p instanceof It)||!pi(c)?this.thru(y):(p=p.slice(c,+c+(l?1:0)),p.__actions__.push({func:Da,args:[y],thisArg:e}),new xn(p,this.__chain__).thru(function(E){return l&&!E.length&&E.push(e),E}))});function ty(){return ag(this)}function ey(){return new xn(this.value(),this.__chain__)}function ny(){this.__values__===e&&(this.__values__=Eg(this.value()));var o=this.__index__>=this.__values__.length,l=o?e:this.__values__[this.__index__++];return{done:o,value:l}}function iy(){return this}function ry(o){for(var l,c=this;c instanceof Ea;){var p=tg(c);p.__index__=0,p.__values__=e,l?y.__wrapped__=p:l=p;var y=p;c=c.__wrapped__}return y.__wrapped__=o,l}function sy(){var o=this.__wrapped__;if(o instanceof It){var l=o;return this.__actions__.length&&(l=new It(this)),l=l.reverse(),l.__actions__.push({func:Da,args:[th],thisArg:e}),new xn(l,this.__chain__)}return this.thru(th)}function oy(){return wf(this.__wrapped__,this.__actions__)}var ay=Aa(function(o,l,c){Pt.call(o,c)?++o[c]:di(o,c,1)});function ly(o,l,c){var p=gt(o)?Pd:J_;return c&&Be(o,l,c)&&(l=e),p(o,it(l,3))}function uy(o,l){var c=gt(o)?Vi:of;return c(o,it(l,3))}var hy=Of(eg),cy=Of(ng);function dy(o,l){return ye(Ba(o,l),1)}function fy(o,l){return ye(Ba(o,l),_t)}function gy(o,l,c){return c=c===e?1:mt(c),ye(Ba(o,l),c)}function lg(o,l){var c=gt(o)?vn:Yi;return c(o,it(l,3))}function ug(o,l){var c=gt(o)?F2:sf;return c(o,it(l,3))}var py=Aa(function(o,l,c){Pt.call(o,c)?o[c].push(l):di(o,c,[l])});function _y(o,l,c,p){o=He(o)?o:us(o),c=c&&!p?mt(c):0;var y=o.length;return c<0&&(c=le(y+c,0)),Wa(o)?c<=y&&o.indexOf(l,c)>-1:!!y&&$r(o,l,c)>-1}var my=Et(function(o,l,c){var p=-1,y=typeof l=="function",E=He(o)?F(o.length):[];return Yi(o,function(I){E[++p]=y?on(l,I,c):no(I,l,c)}),E}),yy=Aa(function(o,l,c){di(o,c,l)});function Ba(o,l){var c=gt(o)?Xt:df;return c(o,it(l,3))}function Cy(o,l,c,p){return o==null?[]:(gt(l)||(l=l==null?[]:[l]),c=p?e:c,gt(c)||(c=c==null?[]:[c]),_f(o,l,c))}var vy=Aa(function(o,l,c){o[c?0:1].push(l)},function(){return[[],[]]});function Ey(o,l,c){var p=gt(o)?fu:Gd,y=arguments.length<3;return p(o,it(l,4),c,y,Yi)}function xy(o,l,c){var p=gt(o)?O2:Gd,y=arguments.length<3;return p(o,it(l,4),c,y,sf)}function wy(o,l){var c=gt(o)?Vi:of;return c(o,Va(it(l,3)))}function Sy(o){var l=gt(o)?tf:_m;return l(o)}function Iy(o,l,c){(c?Be(o,l,c):l===e)?l=1:l=mt(l);var p=gt(o)?K_:mm;return p(o,l)}function Ry(o){var l=gt(o)?H_:Cm;return l(o)}function Ty(o){if(o==null)return 0;if(He(o))return Wa(o)?Qr(o):o.length;var l=we(o);return l==ie||l==Yt?o.size:ku(o).length}function Ay(o,l,c){var p=gt(o)?gu:vm;return c&&Be(o,l,c)&&(l=e),p(o,it(l,3))}var by=Et(function(o,l){if(o==null)return[];var c=l.length;return c>1&&Be(o,l[0],l[1])?l=[]:c>2&&Be(l[0],l[1],l[2])&&(l=[l[0]]),_f(o,ye(l,1),[])}),Na=u_||function(){return me.Date.now()};function Ly(o,l){if(typeof l!="function")throw new En(a);return o=mt(o),function(){if(--o<1)return l.apply(this,arguments)}}function hg(o,l,c){return l=c?e:l,l=o&&l==null?o.length:l,fi(o,B,e,e,e,e,l)}function cg(o,l){var c;if(typeof l!="function")throw new En(a);return o=mt(o),function(){return--o>0&&(c=l.apply(this,arguments)),o<=1&&(l=e),c}}var nh=Et(function(o,l,c){var p=w;if(c.length){var y=Wi(c,as(nh));p|=b}return fi(o,p,l,c,y)}),dg=Et(function(o,l,c){var p=w|S;if(c.length){var y=Wi(c,as(dg));p|=b}return fi(l,p,o,c,y)});function fg(o,l,c){l=c?e:l;var p=fi(o,k,e,e,e,e,e,l);return p.placeholder=fg.placeholder,p}function gg(o,l,c){l=c?e:l;var p=fi(o,M,e,e,e,e,e,l);return p.placeholder=gg.placeholder,p}function pg(o,l,c){var p,y,E,I,T,L,N=0,G=!1,W=!1,X=!0;if(typeof o!="function")throw new En(a);l=Rn(l)||0,Kt(c)&&(G=!!c.leading,W="maxWait"in c,E=W?le(Rn(c.maxWait)||0,l):E,X="trailing"in c?!!c.trailing:X);function q(ne){var Gn=p,yi=y;return p=y=e,N=ne,I=o.apply(yi,Gn),I}function rt(ne){return N=ne,T=ao(St,l),G?q(ne):I}function yt(ne){var Gn=ne-L,yi=ne-N,Og=l-Gn;return W?xe(Og,E-yi):Og}function st(ne){var Gn=ne-L,yi=ne-N;return L===e||Gn>=l||Gn<0||W&&yi>=E}function St(){var ne=Na();if(st(ne))return Rt(ne);T=ao(St,yt(ne))}function Rt(ne){return T=e,X&&p?q(ne):(p=y=e,I)}function hn(){T!==e&&If(T),N=0,p=L=y=T=e}function Ne(){return T===e?I:Rt(Na())}function cn(){var ne=Na(),Gn=st(ne);if(p=arguments,y=this,L=ne,Gn){if(T===e)return rt(L);if(W)return If(T),T=ao(St,l),q(L)}return T===e&&(T=ao(St,l)),I}return cn.cancel=hn,cn.flush=Ne,cn}var My=Et(function(o,l){return rf(o,1,l)}),ky=Et(function(o,l,c){return rf(o,Rn(l)||0,c)});function Fy(o){return fi(o,z)}function Ga(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new En(a);var c=function(){var p=arguments,y=l?l.apply(this,p):p[0],E=c.cache;if(E.has(y))return E.get(y);var I=o.apply(this,p);return c.cache=E.set(y,I)||E,I};return c.cache=new(Ga.Cache||ci),c}Ga.Cache=ci;function Va(o){if(typeof o!="function")throw new En(a);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function Oy(o){return cg(2,o)}var Py=Em(function(o,l){l=l.length==1&&gt(l[0])?Xt(l[0],an(it())):Xt(ye(l,1),an(it()));var c=l.length;return Et(function(p){for(var y=-1,E=xe(p.length,c);++y<E;)p[y]=l[y].call(this,p[y]);return on(o,this,p)})}),ih=Et(function(o,l){var c=Wi(l,as(ih));return fi(o,b,e,l,c)}),_g=Et(function(o,l){var c=Wi(l,as(_g));return fi(o,V,e,l,c)}),Dy=gi(function(o,l){return fi(o,P,e,e,e,l)});function By(o,l){if(typeof o!="function")throw new En(a);return l=l===e?l:mt(l),Et(o,l)}function Ny(o,l){if(typeof o!="function")throw new En(a);return l=l==null?0:le(mt(l),0),Et(function(c){var p=c[l],y=Ki(c,0,l);return p&&zi(y,p),on(o,this,y)})}function Gy(o,l,c){var p=!0,y=!0;if(typeof o!="function")throw new En(a);return Kt(c)&&(p="leading"in c?!!c.leading:p,y="trailing"in c?!!c.trailing:y),pg(o,l,{leading:p,maxWait:l,trailing:y})}function Vy(o){return hg(o,1)}function zy(o,l){return ih(zu(l),o)}function Wy(){if(!arguments.length)return[];var o=arguments[0];return gt(o)?o:[o]}function Uy(o){return wn(o,m)}function Yy(o,l){return l=typeof l=="function"?l:e,wn(o,m,l)}function Xy(o){return wn(o,g|m)}function Zy(o,l){return l=typeof l=="function"?l:e,wn(o,g|m,l)}function Ky(o,l){return l==null||nf(o,l,he(l))}function Nn(o,l){return o===l||o!==o&&l!==l}var Hy=ka(bu),jy=ka(function(o,l){return o>=l}),Rr=uf(function(){return arguments}())?uf:function(o){return qt(o)&&Pt.call(o,"callee")&&!Hd.call(o,"callee")},gt=F.isArray,qy=bd?an(bd):rm;function He(o){return o!=null&&za(o.length)&&!_i(o)}function ee(o){return qt(o)&&He(o)}function $y(o){return o===!0||o===!1||qt(o)&&De(o)==fe}var Hi=c_||gh,Jy=Ld?an(Ld):sm;function Qy(o){return qt(o)&&o.nodeType===1&&!lo(o)}function t5(o){if(o==null)return!0;if(He(o)&&(gt(o)||typeof o=="string"||typeof o.splice=="function"||Hi(o)||ls(o)||Rr(o)))return!o.length;var l=we(o);if(l==ie||l==Yt)return!o.size;if(oo(o))return!ku(o).length;for(var c in o)if(Pt.call(o,c))return!1;return!0}function e5(o,l){return io(o,l)}function n5(o,l,c){c=typeof c=="function"?c:e;var p=c?c(o,l):e;return p===e?io(o,l,e,c):!!p}function rh(o){if(!qt(o))return!1;var l=De(o);return l==ai||l==ge||typeof o.message=="string"&&typeof o.name=="string"&&!lo(o)}function i5(o){return typeof o=="number"&&qd(o)}function _i(o){if(!Kt(o))return!1;var l=De(o);return l==Zn||l==Xr||l==jt||l==Ws}function mg(o){return typeof o=="number"&&o==mt(o)}function za(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=ot}function Kt(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function qt(o){return o!=null&&typeof o=="object"}var yg=Md?an(Md):am;function r5(o,l){return o===l||Mu(o,l,Hu(l))}function s5(o,l,c){return c=typeof c=="function"?c:e,Mu(o,l,Hu(l),c)}function o5(o){return Cg(o)&&o!=+o}function a5(o){if(Ym(o))throw new ft(s);return hf(o)}function l5(o){return o===null}function u5(o){return o==null}function Cg(o){return typeof o=="number"||qt(o)&&De(o)==Fn}function lo(o){if(!qt(o)||De(o)!=Oe)return!1;var l=ga(o);if(l===null)return!0;var c=Pt.call(l,"constructor")&&l.constructor;return typeof c=="function"&&c instanceof c&&ha.call(c)==s_}var sh=kd?an(kd):lm;function h5(o){return mg(o)&&o>=-ot&&o<=ot}var vg=Fd?an(Fd):um;function Wa(o){return typeof o=="string"||!gt(o)&&qt(o)&&De(o)==Pe}function un(o){return typeof o=="symbol"||qt(o)&&De(o)==mn}var ls=Od?an(Od):hm;function c5(o){return o===e}function d5(o){return qt(o)&&we(o)==We}function f5(o){return qt(o)&&De(o)==ui}var g5=ka(Fu),p5=ka(function(o,l){return o<=l});function Eg(o){if(!o)return[];if(He(o))return Wa(o)?Dn(o):Ke(o);if(js&&o[js])return K2(o[js]());var l=we(o),c=l==ie?vu:l==Yt?aa:us;return c(o)}function mi(o){if(!o)return o===0?o:0;if(o=Rn(o),o===_t||o===-_t){var l=o<0?-1:1;return l*Gt}return o===o?o:0}function mt(o){var l=mi(o),c=l%1;return l===l?c?l-c:l:0}function xg(o){return o?xr(mt(o),0,ht):0}function Rn(o){if(typeof o=="number")return o;if(un(o))return dt;if(Kt(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Kt(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=Vd(o);var c=qp.test(o);return c||Jp.test(o)?L2(o.slice(2),c?2:8):jp.test(o)?dt:+o}function wg(o){return qn(o,je(o))}function _5(o){return o?xr(mt(o),-ot,ot):o===0?o:0}function Mt(o){return o==null?"":ln(o)}var m5=ss(function(o,l){if(oo(l)||He(l)){qn(l,he(l),o);return}for(var c in l)Pt.call(l,c)&&to(o,c,l[c])}),Sg=ss(function(o,l){qn(l,je(l),o)}),Ua=ss(function(o,l,c,p){qn(l,je(l),o,p)}),y5=ss(function(o,l,c,p){qn(l,he(l),o,p)}),C5=gi(Ru);function v5(o,l){var c=rs(o);return l==null?c:ef(c,l)}var E5=Et(function(o,l){o=Nt(o);var c=-1,p=l.length,y=p>2?l[2]:e;for(y&&Be(l[0],l[1],y)&&(p=1);++c<p;)for(var E=l[c],I=je(E),T=-1,L=I.length;++T<L;){var N=I[T],G=o[N];(G===e||Nn(G,es[N])&&!Pt.call(o,N))&&(o[N]=E[N])}return o}),x5=Et(function(o){return o.push(e,zf),on(Ig,e,o)});function w5(o,l){return Dd(o,it(l,3),jn)}function S5(o,l){return Dd(o,it(l,3),Au)}function I5(o,l){return o==null?o:Tu(o,it(l,3),je)}function R5(o,l){return o==null?o:af(o,it(l,3),je)}function T5(o,l){return o&&jn(o,it(l,3))}function A5(o,l){return o&&Au(o,it(l,3))}function b5(o){return o==null?[]:Sa(o,he(o))}function L5(o){return o==null?[]:Sa(o,je(o))}function oh(o,l,c){var p=o==null?e:wr(o,l);return p===e?c:p}function M5(o,l){return o!=null&&Yf(o,l,tm)}function ah(o,l){return o!=null&&Yf(o,l,em)}var k5=Df(function(o,l,c){l!=null&&typeof l.toString!="function"&&(l=ca.call(l)),o[l]=c},uh(qe)),F5=Df(function(o,l,c){l!=null&&typeof l.toString!="function"&&(l=ca.call(l)),Pt.call(o,l)?o[l].push(c):o[l]=[c]},it),O5=Et(no);function he(o){return He(o)?Qd(o):ku(o)}function je(o){return He(o)?Qd(o,!0):cm(o)}function P5(o,l){var c={};return l=it(l,3),jn(o,function(p,y,E){di(c,l(p,y,E),p)}),c}function D5(o,l){var c={};return l=it(l,3),jn(o,function(p,y,E){di(c,y,l(p,y,E))}),c}var B5=ss(function(o,l,c){Ia(o,l,c)}),Ig=ss(function(o,l,c,p){Ia(o,l,c,p)}),N5=gi(function(o,l){var c={};if(o==null)return c;var p=!1;l=Xt(l,function(E){return E=Zi(E,o),p||(p=E.length>1),E}),qn(o,Zu(o),c),p&&(c=wn(c,g|_|m,km));for(var y=l.length;y--;)Nu(c,l[y]);return c});function G5(o,l){return Rg(o,Va(it(l)))}var V5=gi(function(o,l){return o==null?{}:fm(o,l)});function Rg(o,l){if(o==null)return{};var c=Xt(Zu(o),function(p){return[p]});return l=it(l),mf(o,c,function(p,y){return l(p,y[0])})}function z5(o,l,c){l=Zi(l,o);var p=-1,y=l.length;for(y||(y=1,o=e);++p<y;){var E=o==null?e:o[$n(l[p])];E===e&&(p=y,E=c),o=_i(E)?E.call(o):E}return o}function W5(o,l,c){return o==null?o:ro(o,l,c)}function U5(o,l,c,p){return p=typeof p=="function"?p:e,o==null?o:ro(o,l,c,p)}var Tg=Gf(he),Ag=Gf(je);function Y5(o,l,c){var p=gt(o),y=p||Hi(o)||ls(o);if(l=it(l,4),c==null){var E=o&&o.constructor;y?c=p?new E:[]:Kt(o)?c=_i(E)?rs(ga(o)):{}:c={}}return(y?vn:jn)(o,function(I,T,L){return l(c,I,T,L)}),c}function X5(o,l){return o==null?!0:Nu(o,l)}function Z5(o,l,c){return o==null?o:xf(o,l,zu(c))}function K5(o,l,c,p){return p=typeof p=="function"?p:e,o==null?o:xf(o,l,zu(c),p)}function us(o){return o==null?[]:Cu(o,he(o))}function H5(o){return o==null?[]:Cu(o,je(o))}function j5(o,l,c){return c===e&&(c=l,l=e),c!==e&&(c=Rn(c),c=c===c?c:0),l!==e&&(l=Rn(l),l=l===l?l:0),xr(Rn(o),l,c)}function q5(o,l,c){return l=mi(l),c===e?(c=l,l=0):c=mi(c),o=Rn(o),nm(o,l,c)}function $5(o,l,c){if(c&&typeof c!="boolean"&&Be(o,l,c)&&(l=c=e),c===e&&(typeof l=="boolean"?(c=l,l=e):typeof o=="boolean"&&(c=o,o=e)),o===e&&l===e?(o=0,l=1):(o=mi(o),l===e?(l=o,o=0):l=mi(l)),o>l){var p=o;o=l,l=p}if(c||o%1||l%1){var y=$d();return xe(o+y*(l-o+b2("1e-"+((y+"").length-1))),l)}return Pu(o,l)}var J5=os(function(o,l,c){return l=l.toLowerCase(),o+(c?bg(l):l)});function bg(o){return lh(Mt(o).toLowerCase())}function Lg(o){return o=Mt(o),o&&o.replace(t2,W2).replace(C2,"")}function Q5(o,l,c){o=Mt(o),l=ln(l);var p=o.length;c=c===e?p:xr(mt(c),0,p);var y=c;return c-=l.length,c>=0&&o.slice(c,y)==l}function tC(o){return o=Mt(o),o&&ta.test(o)?o.replace(Gi,U2):o}function eC(o){return o=Mt(o),o&&On.test(o)?o.replace(sn,"\\$&"):o}var nC=os(function(o,l,c){return o+(c?"-":"")+l.toLowerCase()}),iC=os(function(o,l,c){return o+(c?" ":"")+l.toLowerCase()}),rC=Ff("toLowerCase");function sC(o,l,c){o=Mt(o),l=mt(l);var p=l?Qr(o):0;if(!l||p>=l)return o;var y=(l-p)/2;return Ma(ya(y),c)+o+Ma(ma(y),c)}function oC(o,l,c){o=Mt(o),l=mt(l);var p=l?Qr(o):0;return l&&p<l?o+Ma(l-p,c):o}function aC(o,l,c){o=Mt(o),l=mt(l);var p=l?Qr(o):0;return l&&p<l?Ma(l-p,c)+o:o}function lC(o,l,c){return c||l==null?l=0:l&&(l=+l),p_(Mt(o).replace(Vt,""),l||0)}function uC(o,l,c){return(c?Be(o,l,c):l===e)?l=1:l=mt(l),Du(Mt(o),l)}function hC(){var o=arguments,l=Mt(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var cC=os(function(o,l,c){return o+(c?"_":"")+l.toLowerCase()});function dC(o,l,c){return c&&typeof c!="number"&&Be(o,l,c)&&(l=c=e),c=c===e?ht:c>>>0,c?(o=Mt(o),o&&(typeof l=="string"||l!=null&&!sh(l))&&(l=ln(l),!l&&Jr(o))?Ki(Dn(o),0,c):o.split(l,c)):[]}var fC=os(function(o,l,c){return o+(c?" ":"")+lh(l)});function gC(o,l,c){return o=Mt(o),c=c==null?0:xr(mt(c),0,o.length),l=ln(l),o.slice(c,c+l.length)==l}function pC(o,l,c){var p=C.templateSettings;c&&Be(o,l,c)&&(l=e),o=Mt(o),l=Ua({},l,p,Vf);var y=Ua({},l.imports,p.imports,Vf),E=he(y),I=Cu(y,E),T,L,N=0,G=l.interpolate||na,W="__p += '",X=Eu((l.escape||na).source+"|"+G.source+"|"+(G===Hn?Hp:na).source+"|"+(l.evaluate||na).source+"|$","g"),q="//# sourceURL="+(Pt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++S2+"]")+`
`;o.replace(X,function(st,St,Rt,hn,Ne,cn){return Rt||(Rt=hn),W+=o.slice(N,cn).replace(e2,Y2),St&&(T=!0,W+=`' +
__e(`+St+`) +
'`),Ne&&(L=!0,W+=`';
`+Ne+`;
__p += '`),Rt&&(W+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),N=cn+st.length,st}),W+=`';
`;var rt=Pt.call(l,"variable")&&l.variable;if(!rt)W=`with (obj) {
`+W+`
}
`;else if(Zp.test(rt))throw new ft(u);W=(L?W.replace(Zs,""):W).replace(Qo,"$1").replace(Ks,"$1;"),W="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+W+`return __p
}`;var yt=kg(function(){return Lt(E,q+"return "+W).apply(e,I)});if(yt.source=W,rh(yt))throw yt;return yt}function _C(o){return Mt(o).toLowerCase()}function mC(o){return Mt(o).toUpperCase()}function yC(o,l,c){if(o=Mt(o),o&&(c||l===e))return Vd(o);if(!o||!(l=ln(l)))return o;var p=Dn(o),y=Dn(l),E=zd(p,y),I=Wd(p,y)+1;return Ki(p,E,I).join("")}function CC(o,l,c){if(o=Mt(o),o&&(c||l===e))return o.slice(0,Yd(o)+1);if(!o||!(l=ln(l)))return o;var p=Dn(o),y=Wd(p,Dn(l))+1;return Ki(p,0,y).join("")}function vC(o,l,c){if(o=Mt(o),o&&(c||l===e))return o.replace(Vt,"");if(!o||!(l=ln(l)))return o;var p=Dn(o),y=zd(p,Dn(l));return Ki(p,y).join("")}function EC(o,l){var c=Z,p=K;if(Kt(l)){var y="separator"in l?l.separator:y;c="length"in l?mt(l.length):c,p="omission"in l?ln(l.omission):p}o=Mt(o);var E=o.length;if(Jr(o)){var I=Dn(o);E=I.length}if(c>=E)return o;var T=c-Qr(p);if(T<1)return p;var L=I?Ki(I,0,T).join(""):o.slice(0,T);if(y===e)return L+p;if(I&&(T+=L.length-T),sh(y)){if(o.slice(T).search(y)){var N,G=L;for(y.global||(y=Eu(y.source,Mt(ld.exec(y))+"g")),y.lastIndex=0;N=y.exec(G);)var W=N.index;L=L.slice(0,W===e?T:W)}}else if(o.indexOf(ln(y),T)!=T){var X=L.lastIndexOf(y);X>-1&&(L=L.slice(0,X))}return L+p}function xC(o){return o=Mt(o),o&&mr.test(o)?o.replace(Ni,$2):o}var wC=os(function(o,l,c){return o+(c?" ":"")+l.toUpperCase()}),lh=Ff("toUpperCase");function Mg(o,l,c){return o=Mt(o),l=c?e:l,l===e?Z2(o)?t_(o):B2(o):o.match(l)||[]}var kg=Et(function(o,l){try{return on(o,e,l)}catch(c){return rh(c)?c:new ft(c)}}),SC=gi(function(o,l){return vn(l,function(c){c=$n(c),di(o,c,nh(o[c],o))}),o});function IC(o){var l=o==null?0:o.length,c=it();return o=l?Xt(o,function(p){if(typeof p[1]!="function")throw new En(a);return[c(p[0]),p[1]]}):[],Et(function(p){for(var y=-1;++y<l;){var E=o[y];if(on(E[0],this,p))return on(E[1],this,p)}})}function RC(o){return $_(wn(o,g))}function uh(o){return function(){return o}}function TC(o,l){return o==null||o!==o?l:o}var AC=Pf(),bC=Pf(!0);function qe(o){return o}function hh(o){return cf(typeof o=="function"?o:wn(o,g))}function LC(o){return ff(wn(o,g))}function MC(o,l){return gf(o,wn(l,g))}var kC=Et(function(o,l){return function(c){return no(c,o,l)}}),FC=Et(function(o,l){return function(c){return no(o,c,l)}});function ch(o,l,c){var p=he(l),y=Sa(l,p);c==null&&!(Kt(l)&&(y.length||!p.length))&&(c=l,l=o,o=this,y=Sa(l,he(l)));var E=!(Kt(c)&&"chain"in c)||!!c.chain,I=_i(o);return vn(y,function(T){var L=l[T];o[T]=L,I&&(o.prototype[T]=function(){var N=this.__chain__;if(E||N){var G=o(this.__wrapped__),W=G.__actions__=Ke(this.__actions__);return W.push({func:L,args:arguments,thisArg:o}),G.__chain__=N,G}return L.apply(o,zi([this.value()],arguments))})}),o}function OC(){return me._===this&&(me._=o_),this}function dh(){}function PC(o){return o=mt(o),Et(function(l){return pf(l,o)})}var DC=Uu(Xt),BC=Uu(Pd),NC=Uu(gu);function Fg(o){return qu(o)?pu($n(o)):gm(o)}function GC(o){return function(l){return o==null?e:wr(o,l)}}var VC=Bf(),zC=Bf(!0);function fh(){return[]}function gh(){return!1}function WC(){return{}}function UC(){return""}function YC(){return!0}function XC(o,l){if(o=mt(o),o<1||o>ot)return[];var c=ht,p=xe(o,ht);l=it(l),o-=ht;for(var y=yu(p,l);++c<o;)l(c);return y}function ZC(o){return gt(o)?Xt(o,$n):un(o)?[o]:Ke(Qf(Mt(o)))}function KC(o){var l=++r_;return Mt(o)+l}var HC=La(function(o,l){return o+l},0),jC=Yu("ceil"),qC=La(function(o,l){return o/l},1),$C=Yu("floor");function JC(o){return o&&o.length?wa(o,qe,bu):e}function QC(o,l){return o&&o.length?wa(o,it(l,2),bu):e}function tv(o){return Nd(o,qe)}function ev(o,l){return Nd(o,it(l,2))}function nv(o){return o&&o.length?wa(o,qe,Fu):e}function iv(o,l){return o&&o.length?wa(o,it(l,2),Fu):e}var rv=La(function(o,l){return o*l},1),sv=Yu("round"),ov=La(function(o,l){return o-l},0);function av(o){return o&&o.length?mu(o,qe):0}function lv(o,l){return o&&o.length?mu(o,it(l,2)):0}return C.after=Ly,C.ary=hg,C.assign=m5,C.assignIn=Sg,C.assignInWith=Ua,C.assignWith=y5,C.at=C5,C.before=cg,C.bind=nh,C.bindAll=SC,C.bindKey=dg,C.castArray=Wy,C.chain=ag,C.chunk=$m,C.compact=Jm,C.concat=Qm,C.cond=IC,C.conforms=RC,C.constant=uh,C.countBy=ay,C.create=v5,C.curry=fg,C.curryRight=gg,C.debounce=pg,C.defaults=E5,C.defaultsDeep=x5,C.defer=My,C.delay=ky,C.difference=t3,C.differenceBy=e3,C.differenceWith=n3,C.drop=i3,C.dropRight=r3,C.dropRightWhile=s3,C.dropWhile=o3,C.fill=a3,C.filter=uy,C.flatMap=dy,C.flatMapDeep=fy,C.flatMapDepth=gy,C.flatten=ig,C.flattenDeep=l3,C.flattenDepth=u3,C.flip=Fy,C.flow=AC,C.flowRight=bC,C.fromPairs=h3,C.functions=b5,C.functionsIn=L5,C.groupBy=py,C.initial=d3,C.intersection=f3,C.intersectionBy=g3,C.intersectionWith=p3,C.invert=k5,C.invertBy=F5,C.invokeMap=my,C.iteratee=hh,C.keyBy=yy,C.keys=he,C.keysIn=je,C.map=Ba,C.mapKeys=P5,C.mapValues=D5,C.matches=LC,C.matchesProperty=MC,C.memoize=Ga,C.merge=B5,C.mergeWith=Ig,C.method=kC,C.methodOf=FC,C.mixin=ch,C.negate=Va,C.nthArg=PC,C.omit=N5,C.omitBy=G5,C.once=Oy,C.orderBy=Cy,C.over=DC,C.overArgs=Py,C.overEvery=BC,C.overSome=NC,C.partial=ih,C.partialRight=_g,C.partition=vy,C.pick=V5,C.pickBy=Rg,C.property=Fg,C.propertyOf=GC,C.pull=C3,C.pullAll=sg,C.pullAllBy=v3,C.pullAllWith=E3,C.pullAt=x3,C.range=VC,C.rangeRight=zC,C.rearg=Dy,C.reject=wy,C.remove=w3,C.rest=By,C.reverse=th,C.sampleSize=Iy,C.set=W5,C.setWith=U5,C.shuffle=Ry,C.slice=S3,C.sortBy=by,C.sortedUniq=M3,C.sortedUniqBy=k3,C.split=dC,C.spread=Ny,C.tail=F3,C.take=O3,C.takeRight=P3,C.takeRightWhile=D3,C.takeWhile=B3,C.tap=J3,C.throttle=Gy,C.thru=Da,C.toArray=Eg,C.toPairs=Tg,C.toPairsIn=Ag,C.toPath=ZC,C.toPlainObject=wg,C.transform=Y5,C.unary=Vy,C.union=N3,C.unionBy=G3,C.unionWith=V3,C.uniq=z3,C.uniqBy=W3,C.uniqWith=U3,C.unset=X5,C.unzip=eh,C.unzipWith=og,C.update=Z5,C.updateWith=K5,C.values=us,C.valuesIn=H5,C.without=Y3,C.words=Mg,C.wrap=zy,C.xor=X3,C.xorBy=Z3,C.xorWith=K3,C.zip=H3,C.zipObject=j3,C.zipObjectDeep=q3,C.zipWith=$3,C.entries=Tg,C.entriesIn=Ag,C.extend=Sg,C.extendWith=Ua,ch(C,C),C.add=HC,C.attempt=kg,C.camelCase=J5,C.capitalize=bg,C.ceil=jC,C.clamp=j5,C.clone=Uy,C.cloneDeep=Xy,C.cloneDeepWith=Zy,C.cloneWith=Yy,C.conformsTo=Ky,C.deburr=Lg,C.defaultTo=TC,C.divide=qC,C.endsWith=Q5,C.eq=Nn,C.escape=tC,C.escapeRegExp=eC,C.every=ly,C.find=hy,C.findIndex=eg,C.findKey=w5,C.findLast=cy,C.findLastIndex=ng,C.findLastKey=S5,C.floor=$C,C.forEach=lg,C.forEachRight=ug,C.forIn=I5,C.forInRight=R5,C.forOwn=T5,C.forOwnRight=A5,C.get=oh,C.gt=Hy,C.gte=jy,C.has=M5,C.hasIn=ah,C.head=rg,C.identity=qe,C.includes=_y,C.indexOf=c3,C.inRange=q5,C.invoke=O5,C.isArguments=Rr,C.isArray=gt,C.isArrayBuffer=qy,C.isArrayLike=He,C.isArrayLikeObject=ee,C.isBoolean=$y,C.isBuffer=Hi,C.isDate=Jy,C.isElement=Qy,C.isEmpty=t5,C.isEqual=e5,C.isEqualWith=n5,C.isError=rh,C.isFinite=i5,C.isFunction=_i,C.isInteger=mg,C.isLength=za,C.isMap=yg,C.isMatch=r5,C.isMatchWith=s5,C.isNaN=o5,C.isNative=a5,C.isNil=u5,C.isNull=l5,C.isNumber=Cg,C.isObject=Kt,C.isObjectLike=qt,C.isPlainObject=lo,C.isRegExp=sh,C.isSafeInteger=h5,C.isSet=vg,C.isString=Wa,C.isSymbol=un,C.isTypedArray=ls,C.isUndefined=c5,C.isWeakMap=d5,C.isWeakSet=f5,C.join=_3,C.kebabCase=nC,C.last=In,C.lastIndexOf=m3,C.lowerCase=iC,C.lowerFirst=rC,C.lt=g5,C.lte=p5,C.max=JC,C.maxBy=QC,C.mean=tv,C.meanBy=ev,C.min=nv,C.minBy=iv,C.stubArray=fh,C.stubFalse=gh,C.stubObject=WC,C.stubString=UC,C.stubTrue=YC,C.multiply=rv,C.nth=y3,C.noConflict=OC,C.noop=dh,C.now=Na,C.pad=sC,C.padEnd=oC,C.padStart=aC,C.parseInt=lC,C.random=$5,C.reduce=Ey,C.reduceRight=xy,C.repeat=uC,C.replace=hC,C.result=z5,C.round=sv,C.runInContext=A,C.sample=Sy,C.size=Ty,C.snakeCase=cC,C.some=Ay,C.sortedIndex=I3,C.sortedIndexBy=R3,C.sortedIndexOf=T3,C.sortedLastIndex=A3,C.sortedLastIndexBy=b3,C.sortedLastIndexOf=L3,C.startCase=fC,C.startsWith=gC,C.subtract=ov,C.sum=av,C.sumBy=lv,C.template=pC,C.times=XC,C.toFinite=mi,C.toInteger=mt,C.toLength=xg,C.toLower=_C,C.toNumber=Rn,C.toSafeInteger=_5,C.toString=Mt,C.toUpper=mC,C.trim=yC,C.trimEnd=CC,C.trimStart=vC,C.truncate=EC,C.unescape=xC,C.uniqueId=KC,C.upperCase=wC,C.upperFirst=lh,C.each=lg,C.eachRight=ug,C.first=rg,ch(C,function(){var o={};return jn(C,function(l,c){Pt.call(C.prototype,c)||(o[c]=l)}),o}(),{chain:!1}),C.VERSION=n,vn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){C[o].placeholder=C}),vn(["drop","take"],function(o,l){It.prototype[o]=function(c){c=c===e?1:le(mt(c),0);var p=this.__filtered__&&!l?new It(this):this.clone();return p.__filtered__?p.__takeCount__=xe(c,p.__takeCount__):p.__views__.push({size:xe(c,ht),type:o+(p.__dir__<0?"Right":"")}),p},It.prototype[o+"Right"]=function(c){return this.reverse()[o](c).reverse()}}),vn(["filter","map","takeWhile"],function(o,l){var c=l+1,p=c==tt||c==Y;It.prototype[o]=function(y){var E=this.clone();return E.__iteratees__.push({iteratee:it(y,3),type:c}),E.__filtered__=E.__filtered__||p,E}}),vn(["head","last"],function(o,l){var c="take"+(l?"Right":"");It.prototype[o]=function(){return this[c](1).value()[0]}}),vn(["initial","tail"],function(o,l){var c="drop"+(l?"":"Right");It.prototype[o]=function(){return this.__filtered__?new It(this):this[c](1)}}),It.prototype.compact=function(){return this.filter(qe)},It.prototype.find=function(o){return this.filter(o).head()},It.prototype.findLast=function(o){return this.reverse().find(o)},It.prototype.invokeMap=Et(function(o,l){return typeof o=="function"?new It(this):this.map(function(c){return no(c,o,l)})}),It.prototype.reject=function(o){return this.filter(Va(it(o)))},It.prototype.slice=function(o,l){o=mt(o);var c=this;return c.__filtered__&&(o>0||l<0)?new It(c):(o<0?c=c.takeRight(-o):o&&(c=c.drop(o)),l!==e&&(l=mt(l),c=l<0?c.dropRight(-l):c.take(l-o)),c)},It.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},It.prototype.toArray=function(){return this.take(ht)},jn(It.prototype,function(o,l){var c=/^(?:filter|find|map|reject)|While$/.test(l),p=/^(?:head|last)$/.test(l),y=C[p?"take"+(l=="last"?"Right":""):l],E=p||/^find/.test(l);y&&(C.prototype[l]=function(){var I=this.__wrapped__,T=p?[1]:arguments,L=I instanceof It,N=T[0],G=L||gt(I),W=function(St){var Rt=y.apply(C,zi([St],T));return p&&X?Rt[0]:Rt};G&&c&&typeof N=="function"&&N.length!=1&&(L=G=!1);var X=this.__chain__,q=!!this.__actions__.length,rt=E&&!X,yt=L&&!q;if(!E&&G){I=yt?I:new It(this);var st=o.apply(I,T);return st.__actions__.push({func:Da,args:[W],thisArg:e}),new xn(st,X)}return rt&&yt?o.apply(this,T):(st=this.thru(W),rt?p?st.value()[0]:st.value():st)})}),vn(["pop","push","shift","sort","splice","unshift"],function(o){var l=la[o],c=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);C.prototype[o]=function(){var y=arguments;if(p&&!this.__chain__){var E=this.value();return l.apply(gt(E)?E:[],y)}return this[c](function(I){return l.apply(gt(I)?I:[],y)})}}),jn(It.prototype,function(o,l){var c=C[l];if(c){var p=c.name+"";Pt.call(is,p)||(is[p]=[]),is[p].push({name:l,func:c})}}),is[ba(e,S).name]=[{name:"wrapper",func:e}],It.prototype.clone=x_,It.prototype.reverse=w_,It.prototype.value=S_,C.prototype.at=Q3,C.prototype.chain=ty,C.prototype.commit=ey,C.prototype.next=ny,C.prototype.plant=ry,C.prototype.reverse=sy,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=oy,C.prototype.first=C.prototype.head,js&&(C.prototype[js]=iy),C},ts=e_();yr?((yr.exports=ts)._=ts,hu._=ts):me._=ts}).call(po)})(yl,yl.exports);var Ti=yl.exports;const et={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},tl=[et.FILL],or=[et.STROKE],Pr=[et.BEGIN_PATH],E0=[et.CLOSE_PATH];class ap{drawCustom(t,e,n,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class $o extends ap{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let u=0,h=t.length;u<h;u+=e)i[0]=t[u],i[1]=t[u+1],bs(n,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(t,e,n,i,s,a){const u=this.coordinates;let h=u.length;const d=this.getBufferedMaxExtent();a&&(e+=i);let f=t[e],g=t[e+1];const _=this.tmpCoordinate_;let m=!0,v,x,w;for(v=e+i;v<n;v+=i)_[0]=t[v],_[1]=t[v+1],w=Nh(d,_),w!==x?(m&&(u[h++]=f,u[h++]=g,m=!1),u[h++]=_[0],u[h++]=_[1]):w===ce.INTERSECTING?(u[h++]=_[0],u[h++]=_[1],m=!1):m=!0,f=_[0],g=_[1],x=w;return(s&&m||v===e+i)&&(u[h++]=f,u[h++]=g),h}drawCustomCoordinates_(t,e,n,i,s){for(let a=0,u=n.length;a<u;++a){const h=n[a],d=this.appendFlatLineCoordinates(t,e,h,i,!1,!1);s.push(d),e=h}return e}drawCustom(t,e,n,i,s){this.beginGeometry(t,e,s);const a=t.getType(),u=t.getStride(),h=this.coordinates.length;let d,f,g,_,m;switch(a){case"MultiPolygon":d=t.getOrientedFlatCoordinates(),_=[];const v=t.getEndss();m=0;for(let x=0,w=v.length;x<w;++x){const S=[];m=this.drawCustomCoordinates_(d,m,v[x],u,S),_.push(S)}this.instructions.push([et.CUSTOM,h,_,t,n,Xh,s]),this.hitDetectionInstructions.push([et.CUSTOM,h,_,t,i||n,Xh,s]);break;case"Polygon":case"MultiLineString":g=[],d=a=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),m=this.drawCustomCoordinates_(d,0,t.getEnds(),u,g),this.instructions.push([et.CUSTOM,h,g,t,n,To,s]),this.hitDetectionInstructions.push([et.CUSTOM,h,g,t,i||n,To,s]);break;case"LineString":case"Circle":d=t.getFlatCoordinates(),f=this.appendFlatLineCoordinates(d,0,d.length,u,!1,!1),this.instructions.push([et.CUSTOM,h,f,t,n,rr,s]),this.hitDetectionInstructions.push([et.CUSTOM,h,f,t,i||n,rr,s]);break;case"MultiPoint":d=t.getFlatCoordinates(),f=this.appendFlatPointCoordinates(d,u),f>h&&(this.instructions.push([et.CUSTOM,h,f,t,n,rr,s]),this.hitDetectionInstructions.push([et.CUSTOM,h,f,t,i||n,rr,s]));break;case"Point":d=t.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),f=this.coordinates.length,this.instructions.push([et.CUSTOM,h,f,t,n,void 0,s]),this.hitDetectionInstructions.push([et.CUSTOM,h,f,t,i||n,void 0,s]);break}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[et.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[et.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let i,s,a=-1;for(e=0;e<n;++e)i=t[e],s=i[0],s==et.END_GEOMETRY?a=e:s==et.BEGIN_GEOMETRY&&(i[2]=e,dv(this.hitDetectionInstructions,a,e),a=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const i=t.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=ni(i||Qe)}else n.fillStyle=void 0;if(e){const i=e.getColor();n.strokeStyle=ni(i||ko);const s=e.getLineCap();n.lineCap=s!==void 0?s:Ms;const a=e.getLineDash();n.lineDash=a?a.slice():bi;const u=e.getLineDashOffset();n.lineDashOffset=u||Li;const h=e.getLineJoin();n.lineJoin=h!==void 0?h:ks;const d=e.getWidth();n.lineWidth=d!==void 0?d:Oo;const f=e.getMiterLimit();n.miterLimit=f!==void 0?f:Mo,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[et.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[et.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,s=t.lineDash,a=t.lineDashOffset,u=t.lineJoin,h=t.lineWidth,d=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||s!=t.currentLineDash&&!gr(t.currentLineDash,s)||t.currentLineDashOffset!=a||t.currentLineJoin!=u||t.currentLineWidth!=h||t.currentMiterLimit!=d)&&(n!==void 0&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=s,t.currentLineDashOffset=a,t.currentLineJoin=u,t.currentLineWidth=h,t.currentMiterLimit=d)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[et.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=t1(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Cc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class k7 extends $o{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!bs(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(i,s);this.instructions.push([et.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([et.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),s=[];for(let h=0,d=i.length;h<d;h+=t.getStride())(!this.maxExtent||bs(this.maxExtent,i.slice(h,h+2)))&&s.push(i[h],i[h+1]);const a=this.coordinates.length,u=this.appendFlatPointCoordinates(s,2);this.instructions.push([et.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([et.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class F7 extends $o{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),u=[et.MOVE_TO_LINE_TO,s,a];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(t,e,n){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,bi,Li],Pr);const u=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(u,0,u.length,h),this.hitDetectionInstructions.push(or),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,bi,Li],Pr);const u=t.getEnds(),h=t.getFlatCoordinates(),d=t.getStride();let f=0;for(let g=0,_=u.length;g<_;++g)f=this.drawFlatCoordinates_(h,f,u[g],d);this.hitDetectionInstructions.push(or),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(or),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(or),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Pr)}}class x0 extends $o{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const s=this.state,a=s.fillStyle!==void 0,u=s.strokeStyle!==void 0,h=n.length;this.instructions.push(Pr),this.hitDetectionInstructions.push(Pr);for(let d=0;d<h;++d){const f=n[d],g=this.coordinates.length,_=this.appendFlatLineCoordinates(t,e,f,i,!0,!u),m=[et.MOVE_TO_LINE_TO,g,_];this.instructions.push(m),this.hitDetectionInstructions.push(m),u&&(this.instructions.push(E0),this.hitDetectionInstructions.push(E0)),e=f}return a&&(this.instructions.push(tl),this.hitDetectionInstructions.push(tl)),u&&(this.instructions.push(or),this.hitDetectionInstructions.push(or)),e}drawCircle(t,e,n){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,Qe]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,bi,Li]);const u=t.getFlatCoordinates(),h=t.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,h,!1,!1);const f=[et.CIRCLE,d];this.instructions.push(Pr,f),this.hitDetectionInstructions.push(Pr,f),i.fillStyle!==void 0&&(this.instructions.push(tl),this.hitDetectionInstructions.push(tl)),i.strokeStyle!==void 0&&(this.instructions.push(or),this.hitDetectionInstructions.push(or)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,Qe]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,bi,Li]);const u=t.getEnds(),h=t.getOrientedFlatCoordinates(),d=t.getStride();this.drawFlatCoordinatess_(h,0,u,d),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,Qe]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,bi,Li]);const u=t.getEndss(),h=t.getOrientedFlatCoordinates(),d=t.getStride();let f=0;for(let g=0,_=u.length;g<_;++g)f=this.drawFlatCoordinatess_(h,f,u[g],d);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=br(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function O7(r,t,e,n,i){const s=[];let a=e,u=0,h=t.slice(e,2);for(;u<r&&a+i<n;){const[d,f]=h.slice(-2),g=t[a+i],_=t[a+i+1],m=Math.sqrt((g-d)*(g-d)+(_-f)*(_-f));if(u+=m,u>=r){const v=(r-u+m)/m,x=gn(d,g,v),w=gn(f,_,v);h.push(x,w),s.push(h),h=[x,w],u==r&&(a+=i),u=0}else if(u<r)h.push(t[a+i],t[a+i+1]),a+=i;else{const v=m-u,x=gn(d,g,v/m),w=gn(f,_,v/m);h.push(x,w),s.push(h),h=[x,w],u=0,a+=i}}return u>0&&s.push(h),s}function P7(r,t,e,n,i){let s=e,a=e,u=0,h=0,d=e,f,g,_,m,v,x,w,S,R,k;for(g=e;g<n;g+=i){const M=t[g],b=t[g+1];v!==void 0&&(R=M-v,k=b-x,m=Math.sqrt(R*R+k*k),w!==void 0&&(h+=_,f=Math.acos((w*R+S*k)/(_*m)),f>r&&(h>u&&(u=h,s=d,a=g),h=0,d=g-i)),_=m,w=R,S=k),v=M,x=b}return h+=m,h>u?[d,g]:[s,a]}const Cl={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class D7 extends $o{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Qe]={fillStyle:Qe},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const u=this.coordinates;let h=u.length;const d=t.getType();let f=null,g=t.getStride();if(a.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!tn(this.maxExtent,t.getExtent()))return;let _;if(f=t.getFlatCoordinates(),d=="LineString")_=[f.length];else if(d=="MultiLineString")_=t.getEnds();else if(d=="Polygon")_=t.getEnds().slice(0,1);else if(d=="MultiPolygon"){const w=t.getEndss();_=[];for(let S=0,R=w.length;S<R;++S)_.push(w[S][0])}this.beginGeometry(t,e,n);const m=a.repeat,v=m?void 0:a.textAlign;let x=0;for(let w=0,S=_.length;w<S;++w){let R;m?R=O7(m*this.resolution,f,x,_[w],g):R=[f.slice(x,_[w])];for(let k=0,M=R.length;k<M;++k){const b=R[k];let V=0,B=b.length;if(v==null){const z=P7(a.maxAngle,b,0,b.length,2);V=z[0],B=z[1]}for(let z=V;z<B;z+=g)u.push(b[z],b[z+1]);const P=u.length;x=_[w],this.drawChars_(h,P),h=P}}this.endGeometry(e)}else{let _=a.overflow?null:[];switch(d){case"Point":case"MultiPoint":f=t.getFlatCoordinates();break;case"LineString":f=t.getFlatMidpoint();break;case"Circle":f=t.getCenter();break;case"MultiLineString":f=t.getFlatMidpoints(),g=2;break;case"Polygon":f=t.getFlatInteriorPoint(),a.overflow||_.push(f[2]/this.resolution),g=3;break;case"MultiPolygon":const R=t.getFlatInteriorPoints();f=[];for(let k=0,M=R.length;k<M;k+=3)a.overflow||_.push(R[k+2]/this.resolution),f.push(R[k],R[k+1]);if(f.length===0)return;g=2;break}const m=this.appendFlatPointCoordinates(f,g);if(m===h)return;if(_&&(m-h)/2!==f.length/g){let R=h/2;_=_.filter((k,M)=>{const b=u[(R+M)*2]===f[M*g]&&u[(R+M)*2+1]===f[M*g+1];return b||--R,b})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n);let v=a.padding;if(v!=Or&&(a.scale[0]<0||a.scale[1]<0)){let R=a.padding[0],k=a.padding[1],M=a.padding[2],b=a.padding[3];a.scale[0]<0&&(k=-k,b=-b),a.scale[1]<0&&(R=-R,M=-M),v=[R,k,M,b]}const x=this.pixelRatio;this.instructions.push([et.DRAW_IMAGE,h,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==Or?Or:v.map(function(R){return R*x}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const w=1/x,S=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=Qe,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([et.DRAW_IMAGE,h,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Qe:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),a.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Fo,justify:e.justify,textBaseline:e.textBaseline||fl,scale:e.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,u=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,d=Cl[i.textBaseline],f=this.textOffsetY_*h,g=this.text_,_=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([et.DRAW_CHARS,t,e,d,i.overflow,u,i.maxAngle,h,f,s,_*h,g,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([et.DRAW_CHARS,t,e,d,i.overflow,u&&Qe,i.maxAngle,h,f,s,_*h,g,a,1/h,this.declutterMode_])}setTextStyle(t,e){let n,i,s;if(!t)this.text_="";else{const a=t.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=ni(a.getColor()||Qe)):(i=null,this.textFillState_=i);const u=t.getStroke();if(!u)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=u.getLineDash(),x=u.getLineDashOffset(),w=u.getWidth(),S=u.getMiterLimit();s.lineCap=u.getLineCap()||Ms,s.lineDash=v?v.slice():bi,s.lineDashOffset=x===void 0?Li:x,s.lineJoin=u.getLineJoin()||ks,s.lineWidth=w===void 0?Oo:w,s.miterLimit=S===void 0?Mo:S,s.strokeStyle=ni(u.getColor()||ko)}n=this.textState_;const h=t.getFont()||N1;K4(h);const d=t.getScaleArray();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||fl,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Or,n.scale=d===void 0?[1,1]:d;const f=t.getOffsetX(),g=t.getOffsetY(),_=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=_===void 0?!1:_,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ft(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Ft(i.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const B7={Circle:x0,Default:$o,Image:k7,LineString:F7,Polygon:x0,Text:D7};class N7{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const s=n[i].finish();t[e][i]=s}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let s=i[e];if(s===void 0){const a=B7[e];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=s}return s}}function G7(r,t,e,n,i,s,a,u,h,d,f,g){let _=r[t],m=r[t+1],v=0,x=0,w=0,S=0;function R(){v=_,x=m,t+=n,_=r[t],m=r[t+1],S+=w,w=Math.sqrt((_-v)*(_-v)+(m-x)*(m-x))}do R();while(t<e-n&&S+w<s);let k=w===0?0:(s-S)/w;const M=gn(v,_,k),b=gn(x,m,k),V=t-n,B=S,P=s+u*h(d,i,f);for(;t<e-n&&S+w<P;)R();k=w===0?0:(P-S)/w;const z=gn(v,_,k),Z=gn(x,m,k);let K;if(g){const Y=[M,b,z,Z];_1(Y,0,4,2,g,Y,Y),K=Y[0]>Y[2]}else K=M>z;const j=Math.PI,Q=[],tt=V+n===t;t=V,w=0,S=B,_=r[t],m=r[t+1];let lt;if(tt){R(),lt=Math.atan2(m-x,_-v),K&&(lt+=lt>0?-j:j);const Y=(z+M)/2,_t=(Z+b)/2;return Q[0]=[Y,_t,(P-s)/2,lt,i],Q}i=i.replace(/\n/g," ");for(let Y=0,_t=i.length;Y<_t;){R();let ot=Math.atan2(m-x,_-v);if(K&&(ot+=ot>0?-j:j),lt!==void 0){let U=ot-lt;if(U+=U>j?-2*j:U<-j?2*j:0,Math.abs(U)>a)return null}lt=ot;const Gt=Y;let dt=0;for(;Y<_t;++Y){const U=K?_t-Y-1:Y,Ht=u*h(d,i[U],f);if(t+n<e&&S+w<s+dt+Ht/2)break;dt+=Ht}if(Y===Gt)continue;const ht=K?i.substring(_t-Gt,_t-Y):i.substring(Gt,Y);k=w===0?0:(s+dt/2-S)/w;const wt=gn(v,_,k),Bt=gn(x,m,k);Q.push([wt,Bt,dt/2,ot,ht]),s+=dt}return Q}function lp(r,t,e,n){let i=r[t],s=r[t+1],a=0;for(let u=t+n;u<e;u+=n){const h=r[u],d=r[u+1];a+=Math.sqrt((h-i)*(h-i)+(d-s)*(d-s)),i=h,s=d}return a}const fs=kn(),qi=[],Ci=[],vi=[],$i=[];function w0(r){return r[3].declutterBox}const S0=new RegExp("[-----]");function Ah(r,t){return t==="start"?t=S0.test(r)?"right":"left":t==="end"&&(t=S0.test(r)?"left":"right"),Cl[t]}function V7(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}class z7{constructor(t,e,n,i,s){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Wn(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new ip:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const s=t+e+n+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,u=n?this.fillStates[n]:null,h=this.textStates[e],d=this.pixelRatio,f=[h.scale[0]*d,h.scale[1]*d],g=Array.isArray(t),_=h.justify?Cl[h.justify]:Ah(Array.isArray(t)?t[0]:t,h.textAlign||Fo),m=i&&a.lineWidth?a.lineWidth:0,v=g?t:t.split(`
`).reduce(V7,[]),{width:x,height:w,widths:S,heights:R,lineWidths:k}=j4(h,v),M=x+m,b=[],V=(M+2)*f[0],B=(w+m)*f[1],P={width:V<0?Math.floor(V):Math.ceil(V),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:b};(f[0]!=1||f[1]!=1)&&b.push("scale",f),i&&(b.push("strokeStyle",a.strokeStyle),b.push("lineWidth",m),b.push("lineCap",a.lineCap),b.push("lineJoin",a.lineJoin),b.push("miterLimit",a.miterLimit),b.push("setLineDash",[a.lineDash]),b.push("lineDashOffset",a.lineDashOffset)),n&&b.push("fillStyle",u.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const z=.5-_;let Z=_*M+z*m;const K=[],j=[];let Q=0,tt=0,lt=0,Y=0,_t;for(let ot=0,Gt=v.length;ot<Gt;ot+=2){const dt=v[ot];if(dt===`
`){tt+=Q,Q=0,Z=_*M+z*m,++Y;continue}const ht=v[ot+1]||h.font;ht!==_t&&(i&&K.push("font",ht),n&&j.push("font",ht),_t=ht),Q=Math.max(Q,R[lt]);const wt=[dt,Z+z*S[lt]+_*(S[lt]-k[Y]),.5*(m+Q)+tt];Z+=S[lt],i&&K.push("strokeText",wt),n&&j.push("fillText",wt),++lt}return Array.prototype.push.apply(b,K),Array.prototype.push.apply(b,j),this.labels_[s]=P,P}replayTextBackground_(t,e,n,i,s,a,u){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,e),a&&(this.alignAndScaleFill_=a[2],this.fill_(t)),u&&(this.setStrokeStyle_(t,u),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,s,a,u,h,d,f,g,_,m,v,x,w){u*=_[0],h*=_[1];let S=n-u,R=i-h;const k=s+d>t?t-d:s,M=a+f>e?e-f:a,b=v[3]+k*_[0]+v[1],V=v[0]+M*_[1]+v[2],B=S-v[3],P=R-v[0];(x||g!==0)&&(qi[0]=B,$i[0]=B,qi[1]=P,Ci[1]=P,Ci[0]=B+b,vi[0]=Ci[0],vi[1]=P+V,$i[1]=vi[1]);let z;return g!==0?(z=Fi(Wn(),n,i,1,1,g,-n,-i),Ce(z,qi),Ce(z,Ci),Ce(z,vi),Ce(z,$i),ki(Math.min(qi[0],Ci[0],vi[0],$i[0]),Math.min(qi[1],Ci[1],vi[1],$i[1]),Math.max(qi[0],Ci[0],vi[0],$i[0]),Math.max(qi[1],Ci[1],vi[1],$i[1]),fs)):ki(Math.min(B,B+b),Math.min(P,P+V),Math.max(B,B+b),Math.max(P,P+V),fs),m&&(S=Math.round(S),R=Math.round(R)),{drawImageX:S,drawImageY:R,drawImageW:k,drawImageH:M,originX:d,originY:f,declutterBox:{minX:fs[0],minY:fs[1],maxX:fs[2],maxY:fs[3],value:w},canvasTransform:z,scale:_}}replayImageOrLabel_(t,e,n,i,s,a,u){const h=!!(a||u),d=i.declutterBox,f=u?u[2]*i.scale[0]/2:0;return d.minX-f<=e[0]&&d.maxX+f>=0&&d.minY-f<=e[1]&&d.maxY+f>=0&&(h&&this.replayTextBackground_(t,qi,Ci,vi,$i,a,u),q4(t,i.canvasTransform,s,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=Ce(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const s=this.textStates[e],a=this.createLabel(t,e,i,n),u=this.strokeStates[n],h=this.pixelRatio,d=Ah(Array.isArray(t)?t[0]:t,s.textAlign||Fo),f=Cl[s.textBaseline||fl],g=u&&u.lineWidth?u.lineWidth:0,_=a.width/h-2*s.scale[0],m=d*_+2*(.5-d)*g,v=f*a.height/h+2*(.5-f)*g;return{label:a,anchorX:m,anchorY:v}}execute_(t,e,n,i,s,a,u,h){const d=this.zIndexContext_;let f;this.pixelCoordinates_&&gr(n,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=lr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),qv(this.renderedTransform_,n));let g=0;const _=i.length;let m=0,v,x,w,S,R,k,M,b,V,B,P,z,Z,K=0,j=0,Q=null,tt=null;const lt=this.coordinateCache_,Y=this.viewRotation_,_t=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,ot={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},Gt=this.instructions!=i||this.overlaps?0:200;let dt,ht,wt,Bt;for(;g<_;){const U=i[g];switch(U[0]){case et.BEGIN_GEOMETRY:dt=U[1],Bt=U[3],dt.getGeometry()?u!==void 0&&!tn(u,Bt.getExtent())?g=U[2]+1:++g:g=U[2],d&&(d.zIndex=U[4]);break;case et.BEGIN_PATH:K>Gt&&(this.fill_(t),K=0),j>Gt&&(t.stroke(),j=0),!K&&!j&&(t.beginPath(),R=NaN,k=NaN),++g;break;case et.CIRCLE:m=U[1];const Qt=f[m],jt=f[m+1],fe=f[m+2],nn=f[m+3],ge=fe-Qt,ai=nn-jt,Zn=Math.sqrt(ge*ge+ai*ai);t.moveTo(Qt+Zn,jt),t.arc(Qt,jt,Zn,0,2*Math.PI,!0),++g;break;case et.CLOSE_PATH:t.closePath(),++g;break;case et.CUSTOM:m=U[1],v=U[2];const Xr=U[3],ie=U[4],Fn=U[5];ot.geometry=Xr,ot.feature=dt,g in lt||(lt[g]=[]);const Kn=lt[g];Fn?Fn(f,m,v,2,Kn):(Kn[0]=f[m],Kn[1]=f[m+1],Kn.length=2),d&&(d.zIndex=U[6]),ie(Kn,ot),++g;break;case et.DRAW_IMAGE:m=U[1],v=U[2],V=U[3],x=U[4],w=U[5];let Oe=U[6];const pr=U[7],Ws=U[8],pe=U[9],Yt=U[10];let Pe=U[11];const mn=U[12];let li=U[13];S=U[14]||"declutter";const We=U[15];if(!V&&U.length>=20){B=U[19],P=U[20],z=U[21],Z=U[22];const Ye=this.drawLabelWithPointPlacement_(B,P,z,Z);V=Ye.label,U[3]=V;const Hn=U[23];x=(Ye.anchorX-Hn)*this.pixelRatio,U[4]=x;const Xe=U[24];w=(Ye.anchorY-Xe)*this.pixelRatio,U[5]=w,Oe=V.height,U[6]=Oe,li=V.width,U[13]=li}let ui;U.length>25&&(ui=U[25]);let Ue,rn,te;U.length>17?(Ue=U[16],rn=U[17],te=U[18]):(Ue=Or,rn=!1,te=!1),Yt&&_t?Pe+=Y:!Yt&&!_t&&(Pe-=Y);let Us=0;for(;m<v;m+=2){if(ui&&ui[Us++]<li/this.pixelRatio)continue;const Ye=this.calculateImageOrLabelDimensions_(V.width,V.height,f[m],f[m+1],li,Oe,x,w,Ws,pe,Pe,mn,s,Ue,rn||te,dt),Hn=[t,e,V,Ye,pr,rn?Q:null,te?tt:null];if(h){let Xe,yn,Ze;if(We){const Vt=v-m;if(!We[Vt]){We[Vt]={args:Hn,declutterMode:S};continue}const _e=We[Vt];Xe=_e.args,yn=_e.declutterMode,delete We[Vt],Ze=w0(Xe)}let sn,On;if(Xe&&(yn!=="declutter"||!h.collides(Ze))&&(sn=!0),(S!=="declutter"||!h.collides(Ye.declutterBox))&&(On=!0),yn==="declutter"&&S==="declutter"){const Vt=sn&&On;sn=Vt,On=Vt}sn&&(yn!=="none"&&h.insert(Ze),this.replayImageOrLabel_.apply(this,Xe)),On&&(S!=="none"&&h.insert(Ye.declutterBox),this.replayImageOrLabel_.apply(this,Hn))}else this.replayImageOrLabel_.apply(this,Hn)}++g;break;case et.DRAW_CHARS:const Zr=U[1],Kr=U[2],_r=U[3],Ys=U[4];Z=U[5];const Xs=U[6],Hr=U[7],jr=U[8];z=U[9];const Zs=U[10];B=U[11],P=U[12];const Qo=[U[13],U[13]];S=U[14]||"declutter";const Ks=this.textStates[P],Ni=Ks.font,Gi=[Ks.scale[0]*Hr,Ks.scale[1]*Hr];let mr;Ni in this.widths_?mr=this.widths_[Ni]:(mr={},this.widths_[Ni]=mr);const ta=lp(f,Zr,Kr,2),ea=Math.abs(Gi[0])*a0(Ni,B,mr);if(Ys||ea<=ta){const Ye=this.textStates[P].textAlign,Hn=(ta-ea)*Ah(B,Ye),Xe=G7(f,Zr,Kr,2,B,Hn,Xs,Math.abs(Gi[0]),a0,Ni,mr,_t?0:this.viewRotation_);t:if(Xe){const yn=[];let Ze,sn,On,Vt,_e;if(z)for(Ze=0,sn=Xe.length;Ze<sn;++Ze){_e=Xe[Ze],On=_e[4],Vt=this.createLabel(On,P,"",z),x=_e[2]+(Gi[0]<0?-Zs:Zs),w=_r*Vt.height+(.5-_r)*2*Zs*Gi[1]/Gi[0]-jr;const Pn=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,_e[0],_e[1],Vt.width,Vt.height,x,w,0,0,_e[3],Qo,!1,Or,!1,dt);if(h&&S==="declutter"&&h.collides(Pn.declutterBox))break t;yn.push([t,e,Vt,Pn,1,null,null])}if(Z)for(Ze=0,sn=Xe.length;Ze<sn;++Ze){_e=Xe[Ze],On=_e[4],Vt=this.createLabel(On,P,Z,""),x=_e[2],w=_r*Vt.height-jr;const Pn=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,_e[0],_e[1],Vt.width,Vt.height,x,w,0,0,_e[3],Qo,!1,Or,!1,dt);if(h&&S==="declutter"&&h.collides(Pn.declutterBox))break t;yn.push([t,e,Vt,Pn,1,null,null])}h&&S!=="none"&&h.load(yn.map(w0));for(let Pn=0,ru=yn.length;Pn<ru;++Pn)this.replayImageOrLabel_.apply(this,yn[Pn])}}++g;break;case et.END_GEOMETRY:if(a!==void 0){dt=U[1];const Ye=a(dt,Bt,S);if(Ye)return Ye}++g;break;case et.FILL:Gt?K++:this.fill_(t),++g;break;case et.MOVE_TO_LINE_TO:for(m=U[1],v=U[2],ht=f[m],wt=f[m+1],t.moveTo(ht,wt),R=ht+.5|0,k=wt+.5|0,m+=2;m<v;m+=2)ht=f[m],wt=f[m+1],M=ht+.5|0,b=wt+.5|0,(m==v-2||M!==R||b!==k)&&(t.lineTo(ht,wt),R=M,k=b);++g;break;case et.SET_FILL_STYLE:Q=U,this.alignAndScaleFill_=U[2],K&&(this.fill_(t),K=0,j&&(t.stroke(),j=0)),t.fillStyle=U[1],++g;break;case et.SET_STROKE_STYLE:tt=U,j&&(t.stroke(),j=0),this.setStrokeStyle_(t,U),++g;break;case et.STROKE:Gt?j++:t.stroke(),++g;break;default:++g;break}}K&&this.fill_(t),j&&t.stroke()}execute(t,e,n,i,s,a){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,s,void 0,void 0,a)}executeHitDetection(t,e,n,i,s){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,s)}}const Es=["Polygon","Circle","LineString","Image","Text","Default"],up=["Image","Text"],W7=Es.filter(r=>!up.includes(r));class U7{constructor(t,e,n,i,s,a,u){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Wn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,u)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const s=t[n];for(const a in s){const u=s[a];i[a]=new z7(this.resolution_,this.pixelRatio_,this.overlaps_,u,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let i=0,s=t.length;i<s;++i)if(t[i]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,s,a){i=Math.round(i);const u=i*2+1,h=Fi(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Ee(u,u,void 0,{willReadFrequently:!0}));const f=this.hitDetectionContext_;f.canvas.width!==u||f.canvas.height!==u?(f.canvas.width=u,f.canvas.height=u):d||f.clearRect(0,0,u,u);let g;this.renderBuffer_!==void 0&&(g=kn(),xo(g,t),Cc(g,e*(this.renderBuffer_+i),g));const _=Y7(i);let m;function v(b,V,B){const P=f.getImageData(0,0,u,u).data;for(let z=0,Z=_.length;z<Z;z++)if(P[_[z]]>0){if(!a||B==="none"||m!=="Image"&&m!=="Text"||a.includes(b)){const K=(_[z]-3)/4,j=i-K%u,Q=i-(K/u|0),tt=s(b,V,j*j+Q*Q);if(tt)return tt}f.clearRect(0,0,u,u);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(Ai);let w,S,R,k,M;for(w=x.length-1;w>=0;--w){const b=x[w].toString();for(R=this.executorsByZIndex_[b],S=Es.length-1;S>=0;--S)if(m=Es[S],k=R[m],k!==void 0&&(M=k.executeHitDetection(f,h,n,v,g),M))return M}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],s=e[2],a=e[3],u=[n,i,n,a,s,a,s,i];return lr(u,0,8,2,t,u),u}isEmpty(){return Nr(this.executorsByZIndex_)}execute(t,e,n,i,s,a,u){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(Ai),a=a||Es;const d=Es.length;let f,g,_,m,v;for(u&&h.reverse(),f=0,g=h.length;f<g;++f){const x=h[f].toString();for(v=this.executorsByZIndex_[x],_=0,m=a.length;_<m;++_){const w=a[_],S=v[w];if(S!==void 0){const R=u===null?void 0:S.getZIndexContext(),k=R?R.getContext():t,M=this.maxExtent_&&w!=="Image"&&w!=="Text";if(M&&(k.save(),this.clip(k,n)),!R||w==="Text"||w==="Image"?S.execute(k,e,n,i,s,u):R.pushFunction(b=>S.execute(b,e,n,i,s,u)),M&&k.restore(),R){R.offset();const b=h[f]*d+_;this.deferredZIndexContexts_[b]||(this.deferredZIndexContexts_[b]=[]),this.deferredZIndexContexts_[b].push(R)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(Ai);for(let n=0,i=e.length;n<i;++n)t[e[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[e[n]].length=0}}const bh={};function Y7(r){if(bh[r]!==void 0)return bh[r];const t=r*2+1,e=r*r,n=new Array(e+1);for(let s=0;s<=r;++s)for(let a=0;a<=r;++a){const u=s*s+a*a;if(u>e)break;let h=n[u];h||(h=[],n[u]=h),h.push(((r+s)*t+(r+a))*4+3),s>0&&h.push(((r-s)*t+(r+a))*4+3),a>0&&(h.push(((r+s)*t+(r-a))*4+3),s>0&&h.push(((r-s)*t+(r-a))*4+3))}const i=[];for(let s=0,a=n.length;s<a;++s)n[s]&&i.push(...n[s]);return bh[r]=i,i}class X7 extends ap{constructor(t,e,n,i,s,a,u){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?_c(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wn()}drawImages_(t,e,n,i){if(!this.image_)return;const s=lr(t,e,n,i,this.transform_,this.pixelCoordinates_),a=this.context_,u=this.tmpLocalTransform_,h=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=h*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let f=0,g=s.length;f<g;f+=2){const _=s[f]-this.imageAnchorX_,m=s[f+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=_+this.imageAnchorX_,x=m+this.imageAnchorY_;Fi(u,v,x,1,1,d,-v,-x),a.save(),a.transform.apply(a,u),a.translate(v,x),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=h)}drawText_(t,e,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=lr(t,e,n,i,this.transform_,this.pixelCoordinates_),a=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);e<n;e+=i){const h=s[e]+this.textOffsetX_,d=s[e+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(h-this.textOffsetX_,d-this.textOffsetY_),a.rotate(u),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,h,d),this.textFillState_&&a.fillText(this.text_,h,d))}}moveToLineTo_(t,e,n,i,s){const a=this.context_,u=lr(t,e,n,i,this.transform_,this.pixelCoordinates_);a.moveTo(u[0],u[1]);let h=u.length;s&&(h-=2);for(let d=2;d<h;d+=2)a.lineTo(u[d],u[d+1]);return s&&a.closePath(),n}drawRings_(t,e,n,i){for(let s=0,a=n.length;s<a;++s)e=this.moveToLineTo_(t,e,n[s],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=e4(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],s=Math.sqrt(n*n+i*i),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(tn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();let s=0;const a=t.getEnds(),u=t.getStride();n.beginPath();for(let h=0,d=a.length;h<d;++h)s=this.moveToLineTo_(i,s,a[h],u,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const s=t.getEndss(),a=t.getStride();e.beginPath();for(let u=0,h=s.length;u<h;++u){const d=s[u];i=this.drawRings_(n,i,d,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),gr(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Fo;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:ni(n||Qe)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),u=e.getLineJoin(),h=e.getWidth(),d=e.getMiterLimit(),f=s||bi;this.strokeState_={lineCap:i!==void 0?i:Ms,lineDash:this.pixelRatio_===1?f:f.map(g=>g*this.pixelRatio_),lineDashOffset:(a||Li)*this.pixelRatio_,lineJoin:u!==void 0?u:ks,lineWidth:(h!==void 0?h:Oo)*this.pixelRatio_,miterLimit:d!==void 0?d:Mo,strokeStyle:ni(n||ko)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const m=e.getColor();this.textFillState_={fillStyle:ni(m||Qe)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const m=n.getColor(),v=n.getLineCap(),x=n.getLineDash(),w=n.getLineDashOffset(),S=n.getLineJoin(),R=n.getWidth(),k=n.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Ms,lineDash:x||bi,lineDashOffset:w||Li,lineJoin:S!==void 0?S:ks,lineWidth:R!==void 0?R:Oo,miterLimit:k!==void 0?k:Mo,strokeStyle:ni(m||ko)}}const i=t.getFont(),s=t.getOffsetX(),a=t.getOffsetY(),u=t.getRotateWithView(),h=t.getRotation(),d=t.getScaleArray(),f=t.getText(),g=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:i!==void 0?i:N1,textAlign:g!==void 0?g:Fo,textBaseline:_!==void 0?_:fl},this.text_=f!==void 0?Array.isArray(f)?f.reduce((m,v,x)=>m+=x%2?" ":v,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const Qn=.5;function Z7(r,t,e,n,i,s,a,u,h){const d=i,f=r[0]*Qn,g=r[1]*Qn,_=Ee(f,g);_.imageSmoothingEnabled=!1;const m=_.canvas,v=new X7(_,Qn,i,null,a,u,null),x=e.length,w=Math.floor((256*256*256-1)/x),S={};for(let k=1;k<=x;++k){const M=e[k-1],b=M.getStyleFunction()||n;if(!b)continue;let V=b(M,s);if(!V)continue;Array.isArray(V)||(V=[V]);const P=(k*w).toString(16).padStart(7,"#00000");for(let z=0,Z=V.length;z<Z;++z){const K=V[z],j=K.getGeometryFunction()(M);if(!j||!tn(d,j.getExtent()))continue;const Q=K.clone(),tt=Q.getFill();tt&&tt.setColor(P);const lt=Q.getStroke();lt&&(lt.setColor(P),lt.setLineDash(null)),Q.setText(void 0);const Y=K.getImage();if(Y){const dt=Y.getImageSize();if(!dt)continue;const ht=Ee(dt[0],dt[1],void 0,{alpha:!1}),wt=ht.canvas;ht.fillStyle=P,ht.fillRect(0,0,wt.width,wt.height),Q.setImage(new Ns({img:wt,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}const _t=Q.getZIndex()||0;let ot=S[_t];ot||(ot={},S[_t]=ot,ot.Polygon=[],ot.Circle=[],ot.LineString=[],ot.Point=[]);const Gt=j.getType();if(Gt==="GeometryCollection"){const dt=j.getGeometriesArrayRecursive();for(let ht=0,wt=dt.length;ht<wt;++ht){const Bt=dt[ht];ot[Bt.getType().replace("Multi","")].push(Bt,Q)}}else ot[Gt.replace("Multi","")].push(j,Q)}}const R=Object.keys(S).map(Number).sort(Ai);for(let k=0,M=R.length;k<M;++k){const b=S[R[k]];for(const V in b){const B=b[V];for(let P=0,z=B.length;P<z;P+=2){v.setStyle(B[P+1]);for(let Z=0,K=t.length;Z<K;++Z)v.setTransform(t[Z]),v.drawGeometry(B[P])}}}return _.getImageData(0,0,m.width,m.height)}function K7(r,t,e){const n=[];if(e){const i=Math.floor(Math.round(r[0])*Qn),s=Math.floor(Math.round(r[1])*Qn),a=(re(i,0,e.width-1)+re(s,0,e.height-1)*e.width)*4,u=e.data[a],h=e.data[a+1],f=e.data[a+2]+256*(h+256*u),g=Math.floor((256*256*256-1)/t.length);f&&f%g===0&&n.push(t[f/g-1])}return n}const H7=.5,hp={Point:nx,LineString:Q7,Polygon:rx,MultiPoint:ix,MultiLineString:tx,MultiPolygon:ex,GeometryCollection:J7,Circle:q7};function j7(r,t){return parseInt(Ft(r),10)-parseInt(Ft(t),10)}function I0(r,t){const e=cp(r,t);return e*e}function cp(r,t){return H7*r/t}function q7(r,t,e,n,i){const s=e.getFill(),a=e.getStroke();if(s||a){const h=r.getBuilder(e.getZIndex(),"Circle");h.setFillStrokeStyle(s,a),h.drawCircle(t,n,i)}const u=e.getText();if(u&&u.getText()){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(u),h.drawText(t,n)}}function R0(r,t,e,n,i,s,a,u){const h=[],d=e.getImage();if(d){let _=!0;const m=d.getImageState();m==xt.LOADED||m==xt.ERROR?_=!1:m==xt.IDLE&&d.load(),_&&h.push(d.ready())}const f=e.getFill();f&&f.loading()&&h.push(f.ready());const g=h.length>0;return g&&Promise.all(h).then(()=>i(null)),$7(r,t,e,n,s,a,u),g}function $7(r,t,e,n,i,s,a){const u=e.getGeometryFunction()(t);if(!u)return;const h=u.simplifyTransformed(n,i);if(e.getRenderer())dp(r,h,e,t,a);else{const f=hp[h.getType()];f(r,h,e,t,a,s)}}function dp(r,t,e,n,i){if(t.getType()=="GeometryCollection"){const a=t.getGeometries();for(let u=0,h=a.length;u<h;++u)dp(r,a[u],e,n,i);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer(),i)}function J7(r,t,e,n,i,s){const a=t.getGeometriesArray();let u,h;for(u=0,h=a.length;u<h;++u){const d=hp[a[u].getType()];d(r,a[u],e,n,i,s)}}function Q7(r,t,e,n,i){const s=e.getStroke();if(s){const u=r.getBuilder(e.getZIndex(),"LineString");u.setFillStrokeStyle(null,s),u.drawLineString(t,n,i)}const a=e.getText();if(a&&a.getText()){const u=r.getBuilder(e.getZIndex(),"Text");u.setTextStyle(a),u.drawText(t,n,i)}}function tx(r,t,e,n,i){const s=e.getStroke();if(s){const u=r.getBuilder(e.getZIndex(),"LineString");u.setFillStrokeStyle(null,s),u.drawMultiLineString(t,n,i)}const a=e.getText();if(a&&a.getText()){const u=r.getBuilder(e.getZIndex(),"Text");u.setTextStyle(a),u.drawText(t,n,i)}}function ex(r,t,e,n,i){const s=e.getFill(),a=e.getStroke();if(a||s){const h=r.getBuilder(e.getZIndex(),"Polygon");h.setFillStrokeStyle(s,a),h.drawMultiPolygon(t,n,i)}const u=e.getText();if(u&&u.getText()){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(u),h.drawText(t,n,i)}}function nx(r,t,e,n,i,s){const a=e.getImage(),u=e.getText(),h=u&&u.getText(),d=s&&a&&h?{}:void 0;if(a){if(a.getImageState()!=xt.LOADED)return;const f=r.getBuilder(e.getZIndex(),"Image");f.setImageStyle(a,d),f.drawPoint(t,n,i)}if(h){const f=r.getBuilder(e.getZIndex(),"Text");f.setTextStyle(u,d),f.drawText(t,n,i)}}function ix(r,t,e,n,i,s){const a=e.getImage(),u=a&&a.getOpacity()!==0,h=e.getText(),d=h&&h.getText(),f=s&&u&&d?{}:void 0;if(u){if(a.getImageState()!=xt.LOADED)return;const g=r.getBuilder(e.getZIndex(),"Image");g.setImageStyle(a,f),g.drawMultiPoint(t,n,i)}if(d){const g=r.getBuilder(e.getZIndex(),"Text");g.setTextStyle(h,f),g.drawText(t,n,i)}}function rx(r,t,e,n,i){const s=e.getFill(),a=e.getStroke();if(s||a){const h=r.getBuilder(e.getZIndex(),"Polygon");h.setFillStrokeStyle(s,a),h.drawPolygon(t,n,i)}const u=e.getText();if(u&&u.getText()){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(u),h.drawText(t,n,i)}}class sx extends rp{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=kn(),this.wrappedRenderedExtent_=kn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,s=e.viewState,a=s.center,u=s.resolution,h=s.projection,d=s.rotation,f=h.getExtent(),g=this.getLayer().getSource(),_=this.getLayer().getDeclutter(),m=e.pixelRatio,v=e.viewHints,x=!(v[Ae.ANIMATING]||v[Ae.INTERACTING]),w=this.context,S=Math.round(Ot(i)/u*m),R=Math.round(be(i)/u*m),k=g.getWrapX()&&h.canWrapX(),M=k?Ot(f):null,b=k?Math.ceil((i[2]-f[2])/M)+1:1;let V=k?Math.floor((i[0]-f[0])/M):0;do{let B=this.getRenderTransform(a,u,0,m,S,R,V*M);e.declutter&&(B=B.slice(0)),t.execute(w,[w.canvas.width,w.canvas.height],B,d,x,n===void 0?Es:n?up:W7,n?_&&e.declutter[_]:void 0)}while(++V<b)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ee(this.context.canvas.width,this.context.canvas.height,m0))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Wl(this.context),m0.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const i=t.viewState;this.prepareContainer(t,e);const s=this.context,a=this.replayGroup_;let u=a&&!a.isEmpty();if(!u&&!(this.getLayer().hasListener(bn.PRERENDER)||this.getLayer().hasListener(bn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,t),i.projection,this.clipped_=!1,u&&n.extent&&this.clipping){const h=kr(n.extent);u=tn(h,t.extent),this.clipped_=u&&!Mr(h,t.extent),this.clipped_&&this.clipUnrotated(s,t,h)}return u&&this.renderWorlds(a,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,u=this.renderedProjection_,h=this.wrappedRenderedExtent_,d=this.getLayer(),f=[],g=n[0]*Qn,_=n[1]*Qn;f.push(this.getRenderTransform(i,s,a,Qn,g,_,0).slice());const m=d.getSource(),v=u.getExtent();if(m.getWrapX()&&u.canWrapX()&&!Mr(v,h)){let x=h[0];const w=Ot(v);let S=0,R;for(;x<v[0];)--S,R=w*S,f.push(this.getRenderTransform(i,s,a,Qn,g,_,R).slice()),x+=w;for(S=0,x=h[2];x>v[2];)++S,R=w*S,f.push(this.getRenderTransform(i,s,a,Qn,g,_,R).slice()),x-=w}this.hitDetectionImageData_=Z7(n,f,this.renderedFeatures_,d.getStyleFunction(),h,s,a,I0(s,this.renderedPixelRatio_))}e(K7(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,i,s){if(!this.replayGroup_)return;const a=e.viewState.resolution,u=e.viewState.rotation,h=this.getLayer(),d={},f=function(v,x,w){const S=Ft(v),R=d[S];if(R){if(R!==!0&&w<R.distanceSq){if(w===0)return d[S]=!0,s.splice(s.lastIndexOf(R),1),i(v,h,x);R.geometry=x,R.distanceSq=w}}else{if(w===0)return d[S]=!0,i(v,h,x);s.push(d[S]={feature:v,layer:h,geometry:x,distanceSq:w,callback:i})}};let g;const _=[this.replayGroup_],m=this.getLayer().getDeclutter();return _.some(v=>g=v.forEachFeatureAtCoordinate(t,a,u,n,f,m&&e.declutter[m]?e.declutter[m].all().map(x=>x.value):null)),g}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[Ae.ANIMATING],s=t.viewHints[Ae.INTERACTING],a=e.getUpdateWhileAnimating(),u=e.getUpdateWhileInteracting();if(this.ready&&!a&&i||!u&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=t.extent,d=t.viewState,f=d.projection,g=d.resolution,_=t.pixelRatio,m=e.getRevision(),v=e.getRenderBuffer();let x=e.getRenderOrder();x===void 0&&(x=j7);const w=d.center.slice(),S=Cc(h,v*g),R=S.slice(),k=[S.slice()],M=f.getExtent();if(n.getWrapX()&&f.canWrapX()&&!Mr(M,t.extent)){const tt=Ot(M),lt=Math.max(Ot(S)/2,tt);S[0]=M[0]-lt,S[2]=M[2]+lt,a1(w,f);const Y=s1(k[0],f);Y[0]<M[0]&&Y[2]<M[2]?k.push([Y[0]+tt,Y[1],Y[2]+tt,Y[3]]):Y[0]>M[0]&&Y[2]>M[2]&&k.push([Y[0]-tt,Y[1],Y[2]-tt,Y[3]])}if(this.ready&&this.renderedResolution_==g&&this.renderedRevision_==m&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!t.declutter&&Mr(this.wrappedRenderedExtent_,S))return gr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new N7(cp(g,_),S,g,_);let V;for(let tt=0,lt=k.length;tt<lt;++tt)n.loadFeatures(k[tt],g,f);const B=I0(g,_);let P=!0;const z=(tt,lt)=>{let Y;const _t=tt.getStyleFunction()||e.getStyleFunction();if(_t&&(Y=_t(tt,g)),Y){const ot=this.renderFeature(tt,B,Y,b,V,this.getLayer().getDeclutter(),lt);P=P&&!ot}},Z=f1(S),K=n.getFeaturesInExtent(Z);x&&K.sort(x);for(let tt=0,lt=K.length;tt<lt;++tt)z(K[tt],tt);this.renderedFeatures_=K,this.ready=P;const j=b.finish(),Q=new U7(S,g,_,n.getOverlaps(),j,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=g,this.renderedRevision_=m,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=S,this.renderedCenter_=w,this.renderedProjection_=f,this.renderedPixelRatio_=_,this.replayGroup_=Q,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,s,a,u){if(!n)return!1;let h=!1;if(Array.isArray(n))for(let d=0,f=n.length;d<f;++d)h=R0(i,t,n[d],e,this.boundHandleStyleImageChange_,s,a,u)||h;else h=R0(i,t,n,e,this.boundHandleStyleImageChange_,s,a,u);return h}}class qc extends j1{constructor(t){super(t)}createRenderer(){return new sx(this)}}class T0{constructor(t){this.rbush_=new A1(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Ft(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const a=t[i],u=e[i],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:u};n[i]=h,this.items_[Ft(u)]=h}this.rbush_.load(n)}remove(t){const e=Ft(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[Ft(e)],i=[n.minX,n.minY,n.maxX,n.maxY];Ro(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(i){return i.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,s=t.length;i<s;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return Nr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return ki(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class zs extends Xn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new zs(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Wt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Tt(t,pt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?ox(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function ox(r){if(typeof r=="function")return r;let t;return Array.isArray(r)?t=r:(bt(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[r]),function(){return t}}class vl extends m1{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Wt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(Tt(t[e],pt.CHANGE,this.changed,this))}clone(){const t=new vl(Lh(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Gr(this.getExtent(),t,e))return i;const s=this.geometries_;for(let a=0,u=s.length;a<u;++a)i=s[a].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){Ds(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)n1(t,e[n].getExtent());return t}getGeometries(){return Lh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let s=0,a=n.length;s<a;++s){const u=n[s],h=u.getSimplifiedGeometry(t);e.push(h),h!==u&&(i=!0)}return i?new vl(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Un(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(Lh(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Lh(r){return r.map(t=>t.clone())}function El(r,t,e,n,i,s,a){let u,h;const d=(e-t)/n;if(d===1)u=t;else if(d===2)u=t,h=i;else if(d!==0){let f=r[t],g=r[t+1],_=0;const m=[0];for(let w=t+n;w<e;w+=n){const S=r[w],R=r[w+1];_+=Math.sqrt((S-f)*(S-f)+(R-g)*(R-g)),m.push(_),f=S,g=R}const v=i*_,x=cv(m,v);x<0?(h=(v-m[-x-2])/(m[-x-1]-m[-x-2]),u=t+(-x-2)*n):u=t+x*n}a=a>1?a:2,s=s||new Array(a);for(let f=0;f<a;++f)s[f]=u===void 0?NaN:h===void 0?r[u+f]:gn(r[u+f],r[u+n+f],h);return s}function tc(r,t,e,n,i,s){if(e==t)return null;let a;if(i<r[t+n-1])return s?(a=r.slice(t,t+n),a[n-1]=i,a):null;if(r[e-1]<i)return s?(a=r.slice(e-n,e),a[n-1]=i,a):null;if(i==r[t+n-1])return r.slice(t,t+n);let u=t/n,h=e/n;for(;u<h;){const _=u+h>>1;i<r[(_+1)*n-1]?h=_:u=_+1}const d=r[u*n-1];if(i==d)return r.slice((u-1)*n,(u-1)*n+n);const f=r[(u+1)*n-1],g=(i-d)/(f-d);a=[];for(let _=0;_<n-1;++_)a.push(gn(r[(u-1)*n+_],r[u*n+_],g));return a.push(i),a}function ax(r,t,e,n,i,s,a){if(a)return tc(r,t,e[e.length-1],n,i,s);let u;if(i<r[n-1])return s?(u=r.slice(0,n),u[n-1]=i,u):null;if(r[r.length-1]<i)return s?(u=r.slice(r.length-n),u[n-1]=i,u):null;for(let h=0,d=e.length;h<d;++h){const f=e[h];if(t!=f){if(i<r[t+n-1])return null;if(i<=r[f-1])return tc(r,t,f,n,i,!1);t=f}}return null}class Os extends zr{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){ri(this.flatCoordinates,t),this.changed()}clone(){const t=new Os(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Gr(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return w1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return El(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Nl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Os(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Gl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bl(this.flatCoordinates,0,t,this.stride),this.changed()}}class xl extends zr{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const i=t,s=[],a=[];for(let h=0,d=i.length;h<d;++h){const f=i[h];ri(s,f.getFlatCoordinates()),a.push(s.length)}const u=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(u,s),this.ends_=a}}appendLineString(t){ri(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new xl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Gr(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,ax(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return To(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Os(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let s=0;for(let a=0,u=e.length;a<u;++a){const h=e[a],d=new Os(t.slice(s,h),n);i.push(d),s=h}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,s=this.stride;for(let a=0,u=i.length;a<u;++a){const h=i[a],d=El(e,n,h,s,.5);ri(t,d),n=h}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=C1(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new xl(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return h4(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ko(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class jl extends zr{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){ri(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new jl(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Gr(this.getExtent(),t,e))return i;const s=this.flatCoordinates,a=this.stride;for(let u=0,h=s.length;u<h;u+=a){const d=Br(t,e,s[u],s[u+1]);if(d<i){i=d;for(let f=0;f<a;++f)n[f]=s[u+f];n.length=a}}return i}getCoordinates(){return rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Oi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let s=0,a=t.length;s<a;s+=n){const u=new Oi(t.slice(s,s+n),e);i.push(u)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,s=e.length;i<s;i+=n){const a=e[i],u=e[i+1];if(vc(t,a,u))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bl(this.flatCoordinates,0,t,this.stride),this.changed()}}function fp(r,t,e,n){const i=[];let s=kn();for(let a=0,u=e.length;a<u;++a){const h=e[a];s=Ec(r,t,h[0],n),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=h[h.length-1]}return i}class wl extends zr{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,s=[],a=[];for(let u=0,h=i.length;u<h;++u){const d=i[u],f=s.length,g=d.getEnds();for(let _=0,m=g.length;_<m;++_)g[_]+=f;ri(s,d.getFlatCoordinates()),a.push(g)}e=i.length===0?this.getLayout():i[0].getLayout(),t=s,n=a}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;ri(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let i=0,s=e.length;i<s;++i)e[i]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new wl(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<Gr(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(n4(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),i4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return u4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return a4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Zh(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Xh(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=fp(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=x1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new jl(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;R1(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Zh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=o4(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new wl(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(e!==0)for(let s=0,a=n.length;s<a;++s)n[s]-=e;return new cr(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let s=0;for(let a=0,u=n.length;a<u;++a){const h=n[a].slice(),d=h[h.length-1];if(s!==0)for(let g=0,_=h.length;g<_;++g)h[g]-=s;const f=new cr(e.slice(s,d),t,h);i.push(f),s=d}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return c4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=y1(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const A0=Wn();class $e{constructor(t,e,n,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?e1(this.flatCoordinates_):Ec(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Un(this.getExtent());this.flatInteriorPoints_=Pc(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=f4(this.flatCoordinates_,this.ends_),e=fp(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=x1(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=El(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,s=n.length;i<s;++i){const a=n[i],u=El(t,e,a,2,.5);ri(this.flatMidpoints_,u),e=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=se(t);const e=t.getExtent(),n=t.getWorldExtent();if(e&&n){const i=be(n)/be(e);Fi(A0,n[0],n[3],i,-i,0,0,0),lr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,A0,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new $e(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=$0((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Nl(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=C1(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=Fc(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i);break}return i&&(this.simplifiedGeometry_=new $e(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}$e.prototype.getFlatCoordinates=$e.prototype.getOrientedFlatCoordinates;class gp extends Xn{constructor(t){super(),this.projection=se(t.projection),this.attributions_=b0(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,i){e.viewResolver=n,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=b0(t),this.changed()}setState(t){this.state_=t,this.changed()}}function b0(r){return r?Array.isArray(r)?function(t){return r}:typeof r=="function"?r:function(t){return[r]}:null}const Tn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function lx(r,t){return[[-1/0,-1/0,1/0,1/0]]}let ux=!1;function hx(r,t,e,n,i,s,a){const u=new XMLHttpRequest;u.open("GET",typeof r=="function"?r(e,n,i):r,!0),t.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=ux,u.onload=function(h){if(!u.status||u.status>=200&&u.status<300){const d=t.getType();try{let f;d=="text"||d=="json"?f=u.responseText:d=="xml"?f=u.responseXML||u.responseText:d=="arraybuffer"&&(f=u.response),f?s(t.readFeatures(f,{extent:e,featureProjection:i}),t.readProjection(f)):a()}catch{a()}}else a()},u.onerror=a,u.send()}function L0(r,t){return function(e,n,i,s,a){const u=this;hx(r,t,e,n,i,function(h,d){u.addFeatures(h),s!==void 0&&s(h)},a||As)}}class Ji extends Di{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class $c extends gp{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=As,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(bt(this.format_,"`format` must be set when `url` is set"),this.loader_=L0(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:lx;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new T0:null,this.loadedExtentsRtree_=new T0,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),!e&&n===void 0&&(n=new ti(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Ft(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ji(Tn.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof $e||(this.featureChangeKeys_[t]=[Tt(e,pt.CHANGE,this.handleFeatureChange_,this),Tt(e,Ts.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(e.getId()!==void 0){const i=String(e.getId());if(!(i in this.idIndex_))this.idIndex_[i]=e;else if(e instanceof $e){const s=this.idIndex_[i];s instanceof $e?Array.isArray(s)?s.push(e):this.idIndex_[i]=[s,e]:n=!1}else n=!1}return n&&(bt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let s=0,a=t.length;s<a;s++){const u=t[s],h=Ft(u);this.addToIndex_(h,u)&&n.push(u)}for(let s=0,a=n.length;s<a;s++){const u=n[s],h=Ft(u);this.setupChangeEvents_(h,u);const d=u.getGeometry();if(d){const f=d.getExtent();e.push(f),i.push(u)}else this.nullGeometryFeatures_[h]=u}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(Tn.ADDFEATURE))for(let s=0,a=n.length;s<a;s++)this.dispatchEvent(new Ji(Tn.ADDFEATURE,n[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Tn.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(Tn.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(Je.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),t.addEventListener(Je.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Wt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(n);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ji(Tn.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(i){const s=i.getGeometry();if(s instanceof $e||s.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){const i=n.getGeometry();if(i instanceof $e||i.intersectsExtent(t)){const s=e(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Nr(this.nullGeometryFeatures_)||ri(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=o1(t,e);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let s=null;const a=[NaN,NaN];let u=1/0;const h=[-1/0,-1/0,1/0,1/0];return e=e||Io,this.featuresRtree_.forEachInExtent(h,function(d){if(e(d)){const f=d.getGeometry(),g=u;if(u=f instanceof $e?0:f.closestPointXY(n,i,a,u),u<g){s=d;const _=Math.sqrt(u);h[0]=n-_,h[1]=i-_,h[2]=n+_,h[3]=i+_}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=Ft(e),i=e.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const a=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}const s=e.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Ji(Tn.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:Ft(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Nr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,s=this.strategy_(t,e,n);for(let a=0,u=s.length;a<u;++a){const h=s[a];i.forEachInExtent(h,function(f){return Mr(f.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ji(Tn.FEATURESLOADSTART)),this.loader_.call(this,h,e,n,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ji(Tn.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ji(Tn.FEATURESLOADERROR))}),i.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(i){if(Ro(i.extent,t))return n=i,!0}),n&&e.remove(n)}removeFeatures(t){const e=[];for(let n=0,i=t.length;n<i;++n){const s=t[n],a=this.removeFeatureInternal(s);a&&e.push(a)}e.length>0&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Ft(t);if(!(e in this.uidIndex_))return;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.featureChangeKeys_[e];n==null||n.forEach(Wt),delete this.featureChangeKeys_[e];const i=t.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===t?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(t),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[e],this.hasListener(Tn.REMOVEFEATURE)&&this.dispatchEvent(new Ji(Tn.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_){const i=this.idIndex_[n];if(t instanceof $e&&Array.isArray(i)&&i.includes(t))i.splice(i.indexOf(t),1);else if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){bt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(L0(t,this.format_))}}class cx{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=zs,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?se(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=se(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return at()}readFeature(t,e){return at()}readFeatures(t,e){return at()}readGeometry(t,e){return at()}readProjection(t){return at()}writeFeature(t,e){return at()}writeFeatures(t,e){return at()}writeGeometry(t,e){return at()}}function Jc(r,t,e){const n=e?se(e.featureProjection):null,i=e?se(e.dataProjection):null;let s=r;if(n&&i&&!Lr(n,i)){t&&(s=r.clone());const a=t?n:i,u=t?i:n;a.getUnits()==="tile-pixels"?s.transform(a,u):s.applyTransform(Ls(a,u))}if(t&&e&&e.decimals!==void 0){const a=Math.pow(10,e.decimals),u=function(h){for(let d=0,f=h.length;d<f;++d)h[d]=Math.round(h[d]*a)/a;return h};s===r&&(s=r.clone()),s.applyTransform(u)}return s}const dx={Point:Oi,LineString:Os,Polygon:cr,MultiPoint:jl,MultiLineString:xl,MultiPolygon:wl};function fx(r,t,e){return Array.isArray(t[0])?(R1(r,0,t,e)||(r=r.slice(),Zh(r,0,t,e)),r):(Bc(r,0,t,e)||(r=r.slice(),hl(r,0,t,e)),r)}function pp(r,t){var s;const e=r.geometry;if(!e)return[];if(Array.isArray(e))return e.map(a=>pp({...r,geometry:a})).flat();const n=e.type==="MultiPolygon"?"Polygon":e.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=e.layout.length;return Jc(new $e(n,n==="Polygon"?fx(e.flatCoordinates,e.ends,i):e.flatCoordinates,(s=e.ends)==null?void 0:s.flat(),i,r.properties||{},r.id).enableSimplifyTransformed(),!1,t)}function Qc(r,t){if(!r)return null;if(Array.isArray(r)){const n=r.map(i=>Qc(i,t));return new vl(n)}const e=dx[r.type];return Jc(new e(r.flatCoordinates,r.layout,r.ends),!1,t)}class gx extends cx{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(el(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(el(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return at()}readFeaturesFromObject(t,e){return at()}readGeometry(t,e){return this.readGeometryFromObject(el(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return at()}readProjection(t){return this.readProjectionFromObject(el(t))}readProjectionFromObject(t){return at()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return at()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return at()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return at()}}function el(r){if(typeof r=="string"){const t=JSON.parse(r);return t||null}return r!==null?r:null}class px extends gx{constructor(t){t=t||{},super(),this.dataProjection=se(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=se(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const i=td(n.geometry);if(this.featureClass===$e)return pp({geometry:i,id:n.id,properties:n.properties},e);const s=new zs;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(Qc(i,e)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,e){const n=t;let i=null;if(n.type==="FeatureCollection"){const s=t;i=[];const a=s.features;for(let u=0,h=a.length;u<h;++u){const d=this.readFeatureFromObject(a[u],e);d&&i.push(d)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return _x(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if(e.type=="name")n=se(e.properties.name);else if(e.type==="EPSG")n=se("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(i!==void 0&&(n.id=i),!t.hasProperties())return n;const s=t.getProperties(),a=t.getGeometry();return a&&(n.geometry=ec(a,e),delete s[t.getGeometryName()]),Nr(s)||(n.properties=s),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,s=t.length;i<s;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return ec(t,this.adaptOptions(e))}}function td(r,t){if(!r)return null;let e;switch(r.type){case"Point":{e=yx(r);break}case"LineString":{e=Cx(r);break}case"Polygon":{e=wx(r);break}case"MultiPoint":{e=Ex(r);break}case"MultiLineString":{e=vx(r);break}case"MultiPolygon":{e=xx(r);break}case"GeometryCollection":{e=mx(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return e}function _x(r,t){const e=td(r);return Qc(e,t)}function mx(r,t){return r.geometries.map(function(n){return td(n)})}function yx(r){const t=r.coordinates;return{type:"Point",flatCoordinates:t,layout:Wr(t.length)}}function Cx(r){var n;const t=r.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Wr(((n=t[0])==null?void 0:n.length)||2)}}function vx(r){var s,a;const t=r.coordinates,e=((a=(s=t[0])==null?void 0:s[0])==null?void 0:a.length)||2,n=[],i=Ko(n,0,t,e);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:Wr(e)}}function Ex(r){var e;const t=r.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Wr(((e=t[0])==null?void 0:e.length)||2)}}function xx(r){var s,a;const t=r.coordinates,e=[],n=((a=(s=t[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=y1(e,0,t,n);return{type:"MultiPolygon",flatCoordinates:e,ends:i,layout:Wr(n)}}function wx(r){var s,a;const t=r.coordinates,e=[],n=(a=(s=t[0])==null?void 0:s[0])==null?void 0:a.length,i=Ko(e,0,t,n);return{type:"Polygon",flatCoordinates:e,ends:i,layout:Wr(n)}}function ec(r,t){r=Jc(r,!0,t);const e=r.getType();let n;switch(e){case"Point":{n=bx(r);break}case"LineString":{n=Ix(r);break}case"Polygon":{n=Lx(r,t);break}case"MultiPoint":{n=Tx(r);break}case"MultiLineString":{n=Rx(r);break}case"MultiPolygon":{n=Ax(r,t);break}case"GeometryCollection":{n=Sx(r,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function Sx(r,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return ec(n,t)})}}function Ix(r,t){return{type:"LineString",coordinates:r.getCoordinates()}}function Rx(r,t){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function Tx(r,t){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function Ax(r,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function bx(r,t){return{type:"Point",coordinates:r.getCoordinates()}}function Lx(r,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}class Mx{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return bt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return bt(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){bt(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}function M0(r,t,e,n){return n!==void 0?(n[0]=r,n[1]=t,n[2]=e,n):[r,t,e]}function ql(r,t,e){return r+"/"+t+"/"+e}function _p(r){return ql(r[0],r[1],r[2])}function kx(r){return r.split("/").map(Number)}function Fx(r){return(r[1]<<r[0])+r[2]}function Ox(r,t){const e=r[0],n=r[1],i=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(n,i):!0}class mp extends Mx{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=kx(t)[0];this.forEach(i=>{i.tileCoord[0]!==n&&(this.remove(_p(i.tileCoord)),i.release())})}}const Mh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},gs=[0,0,0],Qi=5;class yp{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,bt(fv(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!e)e=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,bt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Vr(n)),bt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,bt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:mc,bt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((i,s)=>{const a=new jc(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const u=this.getTileRangeForExtentAndZ(n,s);a.minX=Math.max(u.minX,a.minX),a.maxX=Math.min(u.maxX,a.maxX),a.minY=Math.max(u.minY,a.minY),a.maxY=Math.min(u.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let u=i.minY,h=i.maxY;u<=h;++u)n([e,s,u])}forEachTileCoordParentTileRange(t,e,n,i){let s,a,u,h=null,d=t[0]-1;for(this.zoomFactor_===2?(a=t[1],u=t[2]):h=this.getTileCoordExtent(t,i);d>=this.minZoom;){if(a!==void 0&&u!==void 0?(a=Math.floor(a/2),u=Math.floor(u/2),s=ds(a,a,u,u,n)):s=this.getTileRangeForExtentAndZ(h,d,n),e(d,s))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,a=t[2]*2;return ds(s,s+1,a,a+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],s=t[1],a=t[2];if(e===i)return ds(s,a,s,a,n);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,e-i),d=Math.floor(s*h),f=Math.floor(a*h);if(e<i)return ds(d,d,f,f,n);const g=Math.floor(h*(s+1))-1,_=Math.floor(h*(a+1))-1;return ds(d,g,f,_,n)}const u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,gs);const i=gs[1],s=gs[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,gs);const a=gs[1],u=gs[2];return ds(i,a,s,u,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=_n(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=_n(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*s[0]*i,u=n[1]-(t[2]+1)*s[1]*i,h=a+s[0]*i,d=u+s[1]*i;return ki(a,u,h,d,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,s){const a=this.getZForResolution(n),u=n/this.getResolution(a),h=this.getOrigin(a),d=_n(this.getTileSize(a),this.tmpSize_);let f=u*(t-h[0])/n/d[0],g=u*(h[1]-e)/n/d[1];return i?(f=Za(f,Qi)-1,g=Za(g,Qi)-1):(f=Xa(f,Qi),g=Xa(g,Qi)),M0(a,f,g,s)}getTileCoordForXYAndZ_(t,e,n,i,s){const a=this.getOrigin(n),u=this.getResolution(n),h=_n(this.getTileSize(n),this.tmpSize_);let d=(t-a[0])/u/h[0],f=(a[1]-e)/u/h[1];return i?(d=Za(d,Qi)-1,f=Za(f,Qi)-1):(d=Xa(d,Qi),f=Xa(f,Qi)),M0(n,d,f,s)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=pc(this.resolutions_,t,e||0);return re(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return S1(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}function Cp(r){let t=r.getDefaultTileGrid();return t||(t=Nx(r),r.setDefaultTileGrid(t)),t}function Px(r,t,e){const n=t[0],i=r.getTileCoordCenter(t),s=ed(e);if(!bs(s,i)){const a=Ot(s),u=Math.ceil((s[0]-i[0])/a);return i[0]+=a*u,r.getTileCoordForCoordAndZ(i,n)}return t}function Dx(r,t,e,n){n=n!==void 0?n:"top-left";const i=vp(r,t,e);return new yp({extent:r,origin:Mv(r,n),resolutions:i,tileSize:e})}function Bx(r){const t=r||{},e=t.extent||se("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:vp(e,t.maxZoom,t.tileSize,t.maxResolution)};return new yp(n)}function vp(r,t,e,n){t=t!==void 0?t:Cv,e=_n(e!==void 0?e:mc);const i=be(r),s=Ot(r);n=n>0?n:Math.max(s/e[0],i/e[1]);const a=t+1,u=new Array(a);for(let h=0;h<a;++h)u[h]=n/Math.pow(2,h);return u}function Nx(r,t,e,n){const i=ed(r);return Dx(i,t,e,n)}function ed(r){r=se(r);let t=r.getExtent();if(!t){const e=180*yc.degrees/r.getMetersPerUnit();t=ki(-e,-e,e,e)}return t}class Gx extends gp{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&_n(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new mp(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const s=this.getTileCacheForProjection(t);if(!s)return!1;let a=!0,u,h,d;for(let f=n.minX;f<=n.maxX;++f)for(let g=n.minY;g<=n.maxY;++g)h=ql(e,f,g),d=!1,s.containsKey(h)&&(u=s.get(h),d=u.getState()===nt.LOADED,d&&(d=i(u)!==!1)),d||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,s){return at()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Cp(t)}getTileCacheForProjection(t){const e=this.getProjection();return bt(e===null||Lr(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),a=_n(i.getTileSize(t),this.tmpSize);return s==1?a:I4(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=Px(n,t,e)),Ox(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class Vx extends Di{constructor(t,e){super(t),this.tile=e}}function zx(r,t){const e=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,s=/\{-y\}/g;return function(a,u,h){if(a)return r.replace(e,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(s,function(){const d=a[0],f=t.getFullTileRange(d);if(!f)throw new Error("The {-y} placeholder requires a tile grid with extent");return(f.getHeight()-a[2]-1).toString()})}}function Wx(r,t){const e=r.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=zx(r[i],t);return Ux(n)}function Ux(r){return r.length===1?r[0]:function(t,e,n){if(!t)return;const i=Fx(t),s=Ss(i,r.length);return r[s](t,e,n)}}function Yx(r){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(r);if(e){const n=e[1].charCodeAt(0),i=e[2].charCodeAt(0);let s;for(s=n;s<=i;++s)t.push(r.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){const n=parseInt(e[2],10);for(let i=parseInt(e[1],10);i<=n;i++)t.push(r.replace(e[0],i.toString()));return t}return t.push(r),t}class nd extends Gx{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===nd.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=Ft(e),i=e.getState();let s;i==nt.LOADING?(this.tileLoadingKeys_[n]=!0,s=Mh.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=i==nt.ERROR?Mh.TILELOADERROR:i==nt.LOADED?Mh.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Vx(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=Yx(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Wx(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=ql(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}class Xx extends nd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Zx,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:op,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const s=this.tileCacheForProjection[i];s.expireCache(s==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Lr(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Lr(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Lr(e,t)))return this.tileGrid;const n=Ft(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Cp(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Lr(e,t))return this.tileCache;const n=Ft(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new mp(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,s,a){const u=[t,e,n],h=this.getTileCoordForTileUrlFunction(u,s),d=h?this.tileUrlFunction(h,i,s):void 0,f=new this.tileClass(u,d!==void 0?nt.IDLE:nt.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(pt.CHANGE,this.handleTileChange.bind(this)),f}getTile(t,e,n,i,s){const a=this.getProjection();if(!a||!s||Lr(a,s))return this.getTileInternal(t,e,n,i,a||s);const u=this.getTileCacheForProjection(s),h=[t,e,n];let d;const f=_p(h);u.containsKey(f)&&(d=u.get(f));const g=this.getKey();if(d&&d.key==g)return d;const _=this.getTileGridForProjection(a),m=this.getTileGridForProjection(s),v=this.getTileCoordForTileUrlFunction(h,s),x=new Qh(a,_,s,m,h,v,this.getTilePixelRatio(i),this.getGutter(),(w,S,R,k)=>this.getTileInternal(w,S,R,k,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=g,d?(x.interimTile=d,x.refreshInterimChain(),u.replace(f,x)):u.set(f,x),x}getTileInternal(t,e,n,i,s){let a=null;const u=ql(t,e,n),h=this.getKey();if(!this.tileCache.containsKey(u))a=this.createTile_(t,e,n,i,s,h),this.tileCache.set(u,a);else if(a=this.tileCache.get(u),a.key!=h){const d=a;a=this.createTile_(t,e,n,i,s,h),d.getState()==nt.IDLE?a.interimTile=d.interimTile:a.interimTile=d,a.refreshInterimChain(),this.tileCache.replace(u,a)}return a}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=se(t);if(n){const i=Ft(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Zx(r,t){r.getImage().src=t}class Kx extends Xx{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:Bx({extent:ed(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Hx(r,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,i=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){e.label=d[1];break}if(d[0]===6&&e.label<s[1]){e.label=s[1],s=d;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(d);break}s[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(r,e)}catch(f){d=[6,f],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var fr=function(){function r(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return r}();function jx(r,t){return r>t?1:r<t?-1:0}function nr(r,t,e){for(var n=new fr(null,null),i=n,s=n;;){var a=e(r,t.key);if(a<0){if(t.left===null)break;if(e(r,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}s.left=t,s=t,t=t.left}else if(a>0){if(t.right===null)break;if(e(r,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,s.left=t.right,t.left=n.right,t.right=n.left,t}function kh(r,t,e,n){var i=new fr(r,t);if(e===null)return i.left=i.right=null,i;e=nr(r,e,n);var s=n(r,e.key);return s<0?(i.left=e.left,i.right=e,e.left=null):s>=0&&(i.right=e.right,i.left=e,e.right=null),i}function k0(r,t,e){var n=null,i=null;if(t){t=nr(r,t,e);var s=e(t.key,r);s===0?(n=t.left,i=t.right):s<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function qx(r,t,e){return t===null?r:(r===null||(t=nr(r.key,t,e),t.left=r),t)}function nc(r,t,e,n,i){if(r){n(""+t+(e?" ":" ")+i(r)+`
`);var s=t+(e?"    ":"   ");r.left&&nc(r.left,s,!1,n,i),r.right&&nc(r.right,s,!0,n,i)}}var id=function(){function r(t){t===void 0&&(t=jx),this._root=null,this._size=0,this._comparator=t}return r.prototype.insert=function(t,e){return this._size++,this._root=kh(t,e,this._root,this._comparator)},r.prototype.add=function(t,e){var n=new fr(t,e);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,s=nr(t,this._root,i),a=i(t,s.key);return a===0?this._root=s:(a<0?(n.left=s.left,n.right=s,s.left=null):a>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},r.prototype._remove=function(t,e,n){var i;if(e===null)return null;e=nr(t,e,n);var s=n(t,e.key);return s===0?(e.left===null?i=e.right:(i=nr(t,e.left,n),i.right=e.right),this._size--,i):e},r.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=nr(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},r.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return e;i<0?e=e.left:e=e.right}return null},r.prototype.find=function(t){return this._root&&(this._root=nr(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},r.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return!0;i<0?e=e.left:e=e.right}return!1},r.prototype.forEach=function(t,e){for(var n=this._root,i=[],s=!1;!s;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(e,n),n=n.right):s=!0;return this},r.prototype.range=function(t,e,n,i){for(var s=[],a=this._comparator,u=this._root,h;s.length!==0||u;)if(u)s.push(u),u=u.left;else{if(u=s.pop(),h=a(u.key,e),h>0)break;if(a(u.key,t)>=0&&n.call(i,u))return this;u=u.right}return this},r.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},r.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.at=function(t){for(var e=this._root,n=!1,i=0,s=[];!n;)if(e)s.push(e),e=e.left;else if(s.length>0){if(e=s.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},r.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var s=i(t.key,e.key);if(s===0)break;s<0?(n=e,e=e.left):e=e.right}return n},r.prototype.prev=function(t){var e=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var s=i(t.key,e.key);if(s===0)break;s<0?e=e.left:(n=e,e=e.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return Jx(this._root)},r.prototype.load=function(t,e,n){e===void 0&&(e=[]),n===void 0&&(n=!1);var i=t.length,s=this._comparator;if(n&&sc(t,e,0,i-1,s),this._root===null)this._root=ic(t,e,0,i),this._size=i;else{var a=Qx(this.toList(),$x(t,e),s);i=this._size+i,this._root=rc({head:a},0,i)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var e=[];return nc(this._root,"",!0,function(n){return e.push(n)},t),e.join("")},r.prototype.update=function(t,e,n){var i=this._comparator,s=k0(t,this._root,i),a=s.left,u=s.right;i(t,e)<0?u=kh(e,n,u,i):a=kh(e,n,a,i),this._root=qx(a,u,i)},r.prototype.split=function(t){return k0(t,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var t,e,n;return Hx(this,function(i){switch(i.label){case 0:t=this._root,e=[],n=!1,i.label=1;case 1:return n?[3,6]:t===null?[3,2]:(e.push(t),t=t.left,[3,5]);case 2:return e.length===0?[3,4]:(t=e.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:n=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},r}();function ic(r,t,e,n){var i=n-e;if(i>0){var s=e+Math.floor(i/2),a=r[s],u=t[s],h=new fr(a,u);return h.left=ic(r,t,e,s),h.right=ic(r,t,s+1,n),h}return null}function $x(r,t){for(var e=new fr(null,null),n=e,i=0;i<r.length;i++)n=n.next=new fr(r[i],t[i]);return n.next=null,e.next}function Jx(r){for(var t=r,e=[],n=!1,i=new fr(null,null),s=i;!n;)t?(e.push(t),t=t.left):e.length>0?(t=s=s.next=e.pop(),t=t.right):n=!0;return s.next=null,i.next}function rc(r,t,e){var n=e-t;if(n>0){var i=t+Math.floor(n/2),s=rc(r,t,i),a=r.head;return a.left=s,r.head=r.head.next,a.right=rc(r,i+1,e),a}return null}function Qx(r,t,e){for(var n=new fr(null,null),i=n,s=r,a=t;s!==null&&a!==null;)e(s.key,a.key)<0?(i.next=s,s=s.next):(i.next=a,a=a.next),i=i.next;return s!==null?i.next=s:a!==null&&(i.next=a),n.next}function sc(r,t,e,n,i){if(!(e>=n)){for(var s=r[e+n>>1],a=e-1,u=n+1;;){do a++;while(i(r[a],s)<0);do u--;while(i(r[u],s)>0);if(a>=u)break;var h=r[a];r[a]=r[u],r[u]=h,h=t[a],t[a]=t[u],t[u]=h}sc(r,t,e,u,i),sc(r,t,u+1,n,i)}}const Mi=11102230246251565e-32,Se=134217729,t6=(3+8*Mi)*Mi;function Fh(r,t,e,n,i){let s,a,u,h,d=t[0],f=n[0],g=0,_=0;f>d==f>-d?(s=d,d=t[++g]):(s=f,f=n[++_]);let m=0;if(g<r&&_<e)for(f>d==f>-d?(a=d+s,u=s-(a-d),d=t[++g]):(a=f+s,u=s-(a-f),f=n[++_]),s=a,u!==0&&(i[m++]=u);g<r&&_<e;)f>d==f>-d?(a=s+d,h=a-s,u=s-(a-h)+(d-h),d=t[++g]):(a=s+f,h=a-s,u=s-(a-h)+(f-h),f=n[++_]),s=a,u!==0&&(i[m++]=u);for(;g<r;)a=s+d,h=a-s,u=s-(a-h)+(d-h),d=t[++g],s=a,u!==0&&(i[m++]=u);for(;_<e;)a=s+f,h=a-s,u=s-(a-h)+(f-h),f=n[++_],s=a,u!==0&&(i[m++]=u);return(s!==0||m===0)&&(i[m++]=s),m}function e6(r,t){let e=t[0];for(let n=1;n<r;n++)e+=t[n];return e}function Jo(r){return new Float64Array(r)}const n6=(3+16*Mi)*Mi,i6=(2+12*Mi)*Mi,r6=(9+64*Mi)*Mi*Mi,ps=Jo(4),F0=Jo(8),O0=Jo(12),P0=Jo(16),Ge=Jo(4);function s6(r,t,e,n,i,s,a){let u,h,d,f,g,_,m,v,x,w,S,R,k,M,b,V,B,P;const z=r-i,Z=e-i,K=t-s,j=n-s;M=z*j,_=Se*z,m=_-(_-z),v=z-m,_=Se*j,x=_-(_-j),w=j-x,b=v*w-(M-m*x-v*x-m*w),V=K*Z,_=Se*K,m=_-(_-K),v=K-m,_=Se*Z,x=_-(_-Z),w=Z-x,B=v*w-(V-m*x-v*x-m*w),S=b-B,g=b-S,ps[0]=b-(S+g)+(g-B),R=M+S,g=R-M,k=M-(R-g)+(S-g),S=k-V,g=k-S,ps[1]=k-(S+g)+(g-V),P=R+S,g=P-R,ps[2]=R-(P-g)+(S-g),ps[3]=P;let Q=e6(4,ps),tt=i6*a;if(Q>=tt||-Q>=tt||(g=r-z,u=r-(z+g)+(g-i),g=e-Z,d=e-(Z+g)+(g-i),g=t-K,h=t-(K+g)+(g-s),g=n-j,f=n-(j+g)+(g-s),u===0&&h===0&&d===0&&f===0)||(tt=r6*a+t6*Math.abs(Q),Q+=z*f+j*u-(K*d+Z*h),Q>=tt||-Q>=tt))return Q;M=u*j,_=Se*u,m=_-(_-u),v=u-m,_=Se*j,x=_-(_-j),w=j-x,b=v*w-(M-m*x-v*x-m*w),V=h*Z,_=Se*h,m=_-(_-h),v=h-m,_=Se*Z,x=_-(_-Z),w=Z-x,B=v*w-(V-m*x-v*x-m*w),S=b-B,g=b-S,Ge[0]=b-(S+g)+(g-B),R=M+S,g=R-M,k=M-(R-g)+(S-g),S=k-V,g=k-S,Ge[1]=k-(S+g)+(g-V),P=R+S,g=P-R,Ge[2]=R-(P-g)+(S-g),Ge[3]=P;const lt=Fh(4,ps,4,Ge,F0);M=z*f,_=Se*z,m=_-(_-z),v=z-m,_=Se*f,x=_-(_-f),w=f-x,b=v*w-(M-m*x-v*x-m*w),V=K*d,_=Se*K,m=_-(_-K),v=K-m,_=Se*d,x=_-(_-d),w=d-x,B=v*w-(V-m*x-v*x-m*w),S=b-B,g=b-S,Ge[0]=b-(S+g)+(g-B),R=M+S,g=R-M,k=M-(R-g)+(S-g),S=k-V,g=k-S,Ge[1]=k-(S+g)+(g-V),P=R+S,g=P-R,Ge[2]=R-(P-g)+(S-g),Ge[3]=P;const Y=Fh(lt,F0,4,Ge,O0);M=u*f,_=Se*u,m=_-(_-u),v=u-m,_=Se*f,x=_-(_-f),w=f-x,b=v*w-(M-m*x-v*x-m*w),V=h*d,_=Se*h,m=_-(_-h),v=h-m,_=Se*d,x=_-(_-d),w=d-x,B=v*w-(V-m*x-v*x-m*w),S=b-B,g=b-S,Ge[0]=b-(S+g)+(g-B),R=M+S,g=R-M,k=M-(R-g)+(S-g),S=k-V,g=k-S,Ge[1]=k-(S+g)+(g-V),P=R+S,g=P-R,Ge[2]=R-(P-g)+(S-g),Ge[3]=P;const _t=Fh(Y,O0,4,Ge,P0);return P0[_t-1]}function o6(r,t,e,n,i,s){const a=(t-s)*(e-i),u=(r-i)*(n-s),h=a-u,d=Math.abs(a+u);return Math.abs(h)>=n6*d?h:-s6(r,t,e,n,i,s,d)}var Ep={};const _o=(r,t)=>r.ll.x<=t.x&&t.x<=r.ur.x&&r.ll.y<=t.y&&t.y<=r.ur.y,oc=(r,t)=>{if(t.ur.x<r.ll.x||r.ur.x<t.ll.x||t.ur.y<r.ll.y||r.ur.y<t.ll.y)return null;const e=r.ll.x<t.ll.x?t.ll.x:r.ll.x,n=r.ur.x<t.ur.x?r.ur.x:t.ur.x,i=r.ll.y<t.ll.y?t.ll.y:r.ll.y,s=r.ur.y<t.ur.y?r.ur.y:t.ur.y;return{ll:{x:e,y:i},ur:{x:n,y:s}}};let ar=Number.EPSILON;ar===void 0&&(ar=Math.pow(2,-52));const a6=ar*ar,D0=(r,t)=>{if(-ar<r&&r<ar&&-ar<t&&t<ar)return 0;const e=r-t;return e*e<a6*r*t?0:r<t?-1:1};class l6{constructor(){this.reset()}reset(){this.xRounder=new B0,this.yRounder=new B0}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}class B0{constructor(){this.tree=new id,this.round(0)}round(t){const e=this.tree.add(t),n=this.tree.prev(e);if(n!==null&&D0(e.key,n.key)===0)return this.tree.remove(t),n.key;const i=this.tree.next(e);return i!==null&&D0(e.key,i.key)===0?(this.tree.remove(t),i.key):t}}const No=new l6,rl=(r,t)=>r.x*t.y-r.y*t.x,xp=(r,t)=>r.x*t.x+r.y*t.y,N0=(r,t,e)=>{const n=o6(r.x,r.y,t.x,t.y,e.x,e.y);return n>0?-1:n<0?1:0},Sl=r=>Math.sqrt(xp(r,r)),u6=(r,t,e)=>{const n={x:t.x-r.x,y:t.y-r.y},i={x:e.x-r.x,y:e.y-r.y};return rl(i,n)/Sl(i)/Sl(n)},h6=(r,t,e)=>{const n={x:t.x-r.x,y:t.y-r.y},i={x:e.x-r.x,y:e.y-r.y};return xp(i,n)/Sl(i)/Sl(n)},G0=(r,t,e)=>t.y===0?null:{x:r.x+t.x/t.y*(e-r.y),y:e},V0=(r,t,e)=>t.x===0?null:{x:e,y:r.y+t.y/t.x*(e-r.x)},c6=(r,t,e,n)=>{if(t.x===0)return V0(e,n,r.x);if(n.x===0)return V0(r,t,e.x);if(t.y===0)return G0(e,n,r.y);if(n.y===0)return G0(r,t,e.y);const i=rl(t,n);if(i==0)return null;const s={x:e.x-r.x,y:e.y-r.y},a=rl(s,t)/i,u=rl(s,n)/i,h=r.x+u*t.x,d=e.x+a*n.x,f=r.y+u*t.y,g=e.y+a*n.y,_=(h+d)/2,m=(f+g)/2;return{x:_,y:m}};class An{static compare(t,e){const n=An.comparePoints(t.point,e.point);return n!==0?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:ur.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let n=0,i=e.length;n<i;n++){const s=e[n];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const n=this.point.events[e];if(n.segment.consumedBy===void 0)for(let i=e+1;i<t;i++){const s=this.point.events[i];s.consumedBy===void 0&&n.otherSE.point.events===s.otherSE.point.events&&n.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,n=this.point.events.length;e<n;e++){const i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const e=new Map,n=i=>{const s=i.otherSE;e.set(i,{sine:u6(this.point,t.point,s.point),cosine:h6(this.point,t.point,s.point)})};return(i,s)=>{e.has(i)||n(i),e.has(s)||n(s);const{sine:a,cosine:u}=e.get(i),{sine:h,cosine:d}=e.get(s);return a>=0&&h>=0?u<d?1:u>d?-1:0:a<0&&h<0?u<d?-1:u>d?1:0:h<a?-1:h>a?1:0}}}let d6=0;class ur{static compare(t,e){const n=t.leftSE.point.x,i=e.leftSE.point.x,s=t.rightSE.point.x,a=e.rightSE.point.x;if(a<n)return 1;if(s<i)return-1;const u=t.leftSE.point.y,h=e.leftSE.point.y,d=t.rightSE.point.y,f=e.rightSE.point.y;if(n<i){if(h<u&&h<d)return 1;if(h>u&&h>d)return-1;const g=t.comparePoint(e.leftSE.point);if(g<0)return 1;if(g>0)return-1;const _=e.comparePoint(t.rightSE.point);return _!==0?_:-1}if(n>i){if(u<h&&u<f)return-1;if(u>h&&u>f)return 1;const g=e.comparePoint(t.leftSE.point);if(g!==0)return g;const _=t.comparePoint(e.rightSE.point);return _<0?1:_>0?-1:1}if(u<h)return-1;if(u>h)return 1;if(s<a){const g=e.comparePoint(t.rightSE.point);if(g!==0)return g}if(s>a){const g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(s!==a){const g=d-u,_=s-n,m=f-h,v=a-i;if(g>_&&m<v)return 1;if(g<_&&m>v)return-1}return s>a?1:s<a||d<f?-1:d>f?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,n,i){this.id=++d6,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=i}static fromRing(t,e,n){let i,s,a;const u=An.comparePoints(t,e);if(u<0)i=t,s=e,a=1;else if(u>0)i=e,s=t,a=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const h=new An(i,!0),d=new An(s,!1);return new ur(h,d,[n],[a])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;const s=(t.y-e.y)/i.y,a=e.x+s*i.x;if(t.x===a)return 0;const u=(t.x-e.x)/i.x,h=e.y+u*i.y;return t.y===h?0:t.y<h?-1:1}getIntersection(t){const e=this.bbox(),n=t.bbox(),i=oc(e,n);if(i===null)return null;const s=this.leftSE.point,a=this.rightSE.point,u=t.leftSE.point,h=t.rightSE.point,d=_o(e,u)&&this.comparePoint(u)===0,f=_o(n,s)&&t.comparePoint(s)===0,g=_o(e,h)&&this.comparePoint(h)===0,_=_o(n,a)&&t.comparePoint(a)===0;if(f&&d)return _&&!g?a:!_&&g?h:null;if(f)return g&&s.x===h.x&&s.y===h.y?null:s;if(d)return _&&a.x===u.x&&a.y===u.y?null:u;if(_&&g)return null;if(_)return a;if(g)return h;const m=c6(s,this.vector(),u,t.vector());return m===null||!_o(i,m)?null:No.round(m.x,m.y)}split(t){const e=[],n=t.events!==void 0,i=new An(t,!0),s=new An(t,!1),a=this.rightSE;this.replaceRightSE(s),e.push(s),e.push(i);const u=new ur(i,a,this.rings.slice(),this.windings.slice());return An.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),An.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),s.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}consume(t){let e=this,n=t;for(;e.consumedBy;)e=e.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=ur.compare(e,n);if(i!==0){if(i>0){const s=e;e=n,n=s}if(e.prev===n){const s=e;e=n,n=s}for(let s=0,a=n.rings.length;s<a;s++){const u=n.rings[s],h=n.windings[s],d=e.rings.indexOf(u);d===-1?(e.rings.push(u),e.windings.push(h)):e.windings[d]+=h}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,h=this.rings.length;u<h;u++){const d=this.rings[u],f=this.windings[u],g=e.indexOf(d);g===-1?(e.push(d),n.push(f)):n[g]+=f}const s=[],a=[];for(let u=0,h=e.length;u<h;u++){if(n[u]===0)continue;const d=e[u],f=d.poly;if(a.indexOf(f)===-1)if(d.isExterior)s.push(f);else{a.indexOf(f)===-1&&a.push(f);const g=s.indexOf(d.poly);g!==-1&&s.splice(g,1)}}for(let u=0,h=s.length;u<h;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(zn.type){case"union":{const n=t.length===0,i=e.length===0;this._isInResult=n!==i;break}case"intersection":{let n,i;t.length<e.length?(n=t.length,i=e.length):(n=e.length,i=t.length),this._isInResult=i===zn.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(t.length-e.length);this._isInResult=n%2===1;break}case"difference":{const n=i=>i.length===1&&i[0].isSubject;this._isInResult=n(t)!==n(e);break}default:throw new Error(`Unrecognized operation type found ${zn.type}`)}return this._isInResult}}class z0{constructor(t,e,n){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=No.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let s=i;for(let a=1,u=t.length;a<u;a++){if(typeof t[a][0]!="number"||typeof t[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let h=No.round(t[a][0],t[a][1]);h.x===s.x&&h.y===s.y||(this.segments.push(ur.fromRing(s,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),s=h)}(i.x!==s.x||i.y!==s.y)&&this.segments.push(ur.fromRing(s,i,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}class f6{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z0(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=t.length;n<i;n++){const s=new z0(t[n],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const i=this.interiorRings[e].getSweepEvents();for(let s=0,a=i.length;s<a;s++)t.push(i[s])}return t}}class W0{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let n=0,i=t.length;n<i;n++){const s=new f6(t[n],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const i=this.polys[e].getSweepEvents();for(let s=0,a=i.length;s<a;s++)t.push(i[s])}return t}}class Il{static factory(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];if(!s.isInResult()||s.ringOut)continue;let a=null,u=s.leftSE,h=s.rightSE;const d=[u],f=u.point,g=[];for(;a=u,u=h,d.push(u),u.point!==f;)for(;;){const _=u.getAvailableLinkedEvents();if(_.length===0){const x=d[0].point,w=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${x.x}, ${x.y}]. Last matching segment found ends at [${w.x}, ${w.y}].`)}if(_.length===1){h=_[0].otherSE;break}let m=null;for(let x=0,w=g.length;x<w;x++)if(g[x].point===u.point){m=x;break}if(m!==null){const x=g.splice(m)[0],w=d.splice(x.index);w.unshift(w[0].otherSE),e.push(new Il(w.reverse()));continue}g.push({index:d.length,point:u.point});const v=u.getLeftmostComparator(a);h=_.sort(v)[0].otherSE;break}e.push(new Il(d))}return e}constructor(t){this.events=t;for(let e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let d=1,f=this.events.length-1;d<f;d++){const g=this.events[d].point,_=this.events[d+1].point;N0(g,t,_)!==0&&(e.push(g),t=g)}if(e.length===1)return null;const n=e[0],i=e[1];N0(n,t,i)===0&&e.shift(),e.push(e[0]);const s=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[];for(let d=a;d!=u;d+=s)h.push([e[d].x,e[d].y]);return h}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let i=1,s=this.events.length;i<s;i++){const a=this.events[i];An.compare(t,a)>0&&(t=a)}let e=t.segment.prevInResult(),n=e?e.prevInResult():null;for(;;){if(!e)return null;if(!n)return e.ringOut;if(n.ringOut!==e.ringOut)return n.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=n.prevInResult(),n=e?e.prevInResult():null}}}class U0{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let e=0,n=this.interiorRings.length;e<n;e++){const i=this.interiorRings[e].getGeom();i!==null&&t.push(i)}return t}}class g6{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const i=this.polys[e].getGeom();i!==null&&t.push(i)}return t}_composePolys(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];if(!s.poly)if(s.isExteriorRing())e.push(new U0(s));else{const a=s.enclosingRing();a.poly||e.push(new U0(a)),a.poly.addInterior(s)}}return e}}class p6{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ur.compare;this.queue=t,this.tree=new id(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;const i=t.isLeft?this.tree.add(e):this.tree.find(e);if(!i)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`);let s=i,a=i,u,h;for(;u===void 0;)s=this.tree.prev(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);for(;h===void 0;)a=this.tree.next(a),a===null?h=null:a.key.consumedBy===void 0&&(h=a.key);if(t.isLeft){let d=null;if(u){const g=u.getIntersection(e);if(g!==null&&(e.isAnEndpoint(g)||(d=g),!u.isAnEndpoint(g))){const _=this._splitSafely(u,g);for(let m=0,v=_.length;m<v;m++)n.push(_[m])}}let f=null;if(h){const g=h.getIntersection(e);if(g!==null&&(e.isAnEndpoint(g)||(f=g),!h.isAnEndpoint(g))){const _=this._splitSafely(h,g);for(let m=0,v=_.length;m<v;m++)n.push(_[m])}}if(d!==null||f!==null){let g=null;d===null?g=f:f===null?g=d:g=An.comparePoints(d,f)<=0?d:f,this.queue.remove(e.rightSE),n.push(e.rightSE);const _=e.split(g);for(let m=0,v=_.length;m<v;m++)n.push(_[m])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=u)}else{if(u&&h){const d=u.getIntersection(h);if(d!==null){if(!u.isAnEndpoint(d)){const f=this._splitSafely(u,d);for(let g=0,_=f.length;g<_;g++)n.push(f[g])}if(!h.isAnEndpoint(d)){const f=this._splitSafely(h,d);for(let g=0,_=f.length;g<_;g++)n.push(f[g])}}}this.tree.remove(e)}return n}_splitSafely(t,e){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const i=t.split(e);return i.push(n),t.consumedBy===void 0&&this.tree.add(t),i}}const Y0=typeof process<"u"&&Ep.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,_6=typeof process<"u"&&Ep.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class m6{run(t,e,n){zn.type=t,No.reset();const i=[new W0(e,!0)];for(let g=0,_=n.length;g<_;g++)i.push(new W0(n[g],!1));if(zn.numMultiPolys=i.length,zn.type==="difference"){const g=i[0];let _=1;for(;_<i.length;)oc(i[_].bbox,g.bbox)!==null?_++:i.splice(_,1)}if(zn.type==="intersection")for(let g=0,_=i.length;g<_;g++){const m=i[g];for(let v=g+1,x=i.length;v<x;v++)if(oc(m.bbox,i[v].bbox)===null)return[]}const s=new id(An.compare);for(let g=0,_=i.length;g<_;g++){const m=i[g].getSweepEvents();for(let v=0,x=m.length;v<x;v++)if(s.insert(m[v]),s.size>Y0)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const a=new p6(s);let u=s.size,h=s.pop();for(;h;){const g=h.key;if(s.size===u){const m=g.segment;throw new Error(`Unable to pop() ${g.isLeft?"left":"right"} SweepEvent [${g.point.x}, ${g.point.y}] from segment #${m.id} [${m.leftSE.point.x}, ${m.leftSE.point.y}] -> [${m.rightSE.point.x}, ${m.rightSE.point.y}] from queue.`)}if(s.size>Y0)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(a.segments.length>_6)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const _=a.process(g);for(let m=0,v=_.length;m<v;m++){const x=_[m];x.consumedBy===void 0&&s.insert(x)}u=s.size,h=s.pop()}No.reset();const d=Il.factory(a.segments);return new g6(d).getGeom()}}const zn=new m6,y6=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return zn.run("union",r,e)},C6=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return zn.run("intersection",r,e)},v6=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return zn.run("xor",r,e)},E6=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return zn.run("difference",r,e)};var wp={union:y6,intersection:C6,xor:v6,difference:E6};const Ie={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class x6 extends Xn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+X4,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ie.ELEMENT,this.handleElementChanged),this.addChangeListener(Ie.MAP,this.handleMapChanged),this.addChangeListener(Ie.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ie.POSITION,this.handlePositionChanged),this.addChangeListener(Ie.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Ie.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ie.MAP)||null}getOffset(){return this.get(Ie.OFFSET)}getPosition(){return this.get(Ie.POSITION)}getPositioning(){return this.get(Ie.POSITIONING)}handleElementChanged(){D1(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(dl(this.element),Wt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Tt(t,wi.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Ie.ELEMENT,t)}setMap(t){this.set(Ie.MAP,t)}setOffset(t){this.set(Ie.OFFSET,t)}setPosition(t){this.set(Ie.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Ie.POSITION))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),s=this.getRect(i,[D4(i),B4(i)]);t=t||{};const a=t.margin===void 0?20:t.margin;if(!Mr(n,s)){const u=s[0]-n[0],h=n[2]-s[2],d=s[1]-n[1],f=n[3]-s[3],g=[0,0];if(u<0?g[0]=u-a:h<0&&(g[0]=Math.abs(h)+a),d<0?g[1]=d-a:f<0&&(g[1]=Math.abs(f)+a),g[0]!==0||g[1]!==0){const _=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(_);if(!m)return;const v=[m[0]+g[0],m[1]+g[1]],x=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(v),duration:x.duration,easing:x.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[i,s,i+e[0],s+e[1]]}setPositioning(t){this.set(Ie.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(t[0]+i[0])+"px",u=Math.round(t[1]+i[1])+"px";let h="0%",d="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?h="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(h="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?d="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(d="-50%");const f=`translate(${h}, ${d}) translate(${a}, ${u})`;this.rendered.transform_!=f&&(this.rendered.transform_=f,n.transform=f)}getOptions(){return this.options}}const Rl=document.getElementById("outagePanel"),Go=document.getElementById("outagePanelMaximize"),w6=document.getElementById("outage-date"),S6=document.getElementById("planned-outage-number"),I6=document.getElementById("unplanned-outage-number"),X0=document.getElementById("feature-panels"),Oh=document.getElementById("local-outage-panels"),Sp=()=>{Rl.classList.toggle("full-outage-panel"),Rl.classList.contains("full-outage-panel")?Go.innerHTML=`<svg width="26" height="11" viewBox="0 0 26 11" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 2.5C5 1.11929 3.88071 0 2.5 0C1.11929 0 0 1.11929 0 2.5C0 3.88071 1.11929 5 2.5 5C3.88071 5 5 3.88071 5 2.5Z" fill="#707070"/>
<path d="M4.5 2.5C4.5 1.39543 3.60457 0.5 2.5 0.5C1.39543 0.5 0.5 1.39543 0.5 2.5C0.5 3.60457 1.39543 4.5 2.5 4.5C3.60457 4.5 4.5 3.60457 4.5 2.5Z" stroke="#707070"/>
<path d="M15 8.5C15 7.11929 13.8807 6 12.5 6C11.1193 6 10 7.11929 10 8.5C10 9.88071 11.1193 11 12.5 11C13.8807 11 15 9.88071 15 8.5Z" fill="#707070"/>
<path d="M14.5 8.5C14.5 7.39543 13.6046 6.5 12.5 6.5C11.3954 6.5 10.5 7.39543 10.5 8.5C10.5 9.60457 11.3954 10.5 12.5 10.5C13.6046 10.5 14.5 9.60457 14.5 8.5Z" stroke="#707070"/>
<path d="M26 2.5C26 1.11929 24.8807 0 23.5 0C22.1193 0 21 1.11929 21 2.5C21 3.88071 22.1193 5 23.5 5C24.8807 5 26 3.88071 26 2.5Z" fill="#707070"/>
<path d="M25.5 2.5C25.5 1.39543 24.6046 0.5 23.5 0.5C22.3954 0.5 21.5 1.39543 21.5 2.5C21.5 3.60457 22.3954 4.5 23.5 4.5C24.6046 4.5 25.5 3.60457 25.5 2.5Z" stroke="#707070"/>
</svg>

`:Go.innerHTML=`<svg width="26" height="12" viewBox="0 0 26 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M5 9.5C5 8.11929 3.88071 7 2.5 7C1.11929 7 0 8.11929 0 9.5C0 10.8807 1.11929 12 2.5 12C3.88071 12 5 10.8807 5 9.5Z"
              fill="#707070" />
            <path
              d="M4.5 9.5C4.5 8.39543 3.60457 7.5 2.5 7.5C1.39543 7.5 0.5 8.39543 0.5 9.5C0.5 10.6046 1.39543 11.5 2.5 11.5C3.60457 11.5 4.5 10.6046 4.5 9.5Z"
              stroke="#707070" />
            <path
              d="M15 2.5C15 1.11929 13.8807 0 12.5 0C11.1193 0 10 1.11929 10 2.5C10 3.88071 11.1193 5 12.5 5C13.8807 5 15 3.88071 15 2.5Z"
              fill="#707070" />
            <path
              d="M14.5 2.5C14.5 1.39543 13.6046 0.5 12.5 0.5C11.3954 0.5 10.5 1.39543 10.5 2.5C10.5 3.60457 11.3954 4.5 12.5 4.5C13.6046 4.5 14.5 3.60457 14.5 2.5Z"
              stroke="#707070" />
            <path
              d="M26 9.5C26 8.11929 24.8807 7 23.5 7C22.1193 7 21 8.11929 21 9.5C21 10.8807 22.1193 12 23.5 12C24.8807 12 26 10.8807 26 9.5Z"
              fill="#707070" />
            <path
              d="M25.5 9.5C25.5 8.39543 24.6046 7.5 23.5 7.5C22.3954 7.5 21.5 8.39543 21.5 9.5C21.5 10.6046 22.3954 11.5 23.5 11.5C24.6046 11.5 25.5 10.6046 25.5 9.5Z"
              stroke="#707070" />
          </svg>`};document.addEventListener("click",r=>{!Rl.contains(r.target)&&!Go.contains(r.target)&&(Rl.classList.remove("full-outage-panel"),Go.innerHTML=`

            <svg width="26" height="12" viewBox="0 0 26 12" fill="none" xmlns="http://www.w3.org/2000/svg">

                <path d="M5 9.5C5 8.11929 3.88071 7 2.5 7C1.11929 7 0 8.11929 0 9.5C0 10.8807 1.11929 12 2.5 12C3.88071 12 5 10.8807 5 9.5Z" fill="#707070" />

                <path d="M4.5 9.5C4.5 8.39543 3.60457 7.5 2.5 7.5C1.39543 7.5 0.5 8.39543 0.5 9.5C0.5 10.6046 1.39543 11.5 2.5 11.5C3.60457 11.5 4.5 10.6046 4.5 9.5Z" stroke="#707070" />

                <path d="M15 2.5C15 1.11929 13.8807 0 12.5 0C11.1193 0 10 1.11929 10 2.5C10 3.88071 11.1193 5 12.5 5C13.8807 5 15 3.88071 15 2.5Z" fill="#707070" />

                <path d="M14.5 2.5C14.5 1.39543 13.6046 0.5 12.5 0.5C11.3954 0.5 10.5 1.39543 10.5 2.5C10.5 3.60457 11.3954 4.5 12.5 4.5C13.6046 4.5 14.5 3.60457 14.5 2.5Z" stroke="#707070" />

                <path d="M26 9.5C26 8.11929 24.8807 7 23.5 7C22.1193 7 21 8.11929 21 9.5C21 10.8807 22.1193 12 23.5 12C24.8807 12 26 10.8807 26 9.5Z" fill="#707070" />

                <path d="M25.5 9.5C25.5 8.39543 24.6046 7.5 23.5 7.5C22.3954 7.5 21.5 8.39543 21.5 9.5C21.5 10.6046 22.3954 11.5 23.5 11.5C24.6046 11.5 25.5 10.6046 25.5 9.5Z" stroke="#707070" />

            </svg>`)});Go.onclick=r=>{Sp(),r.stopPropagation()};w6.innerText=moment().format("DD MMMM YYYY");const ac=r=>{Oh.innerHTML="";const t=JSON.parse(r),e=t==null?void 0:t.filter(i=>moment().isBefore(moment(i.date,"DD.MM.YYYY HH:mm").add(4,"hours")));if(!e||e.length===0)return;document.getElementById("local-outages-header").classList.remove("d-none"),Oh.classList.remove("d-none");for(const i of e){const s=document.createElement("div");s.className="local-outage-container mb-2",s.innerHTML=`
        <div class="local-outage-district">${i.district.toLocaleUpperCase("tr-TR")}</div>
        <div class="local-outage-date">
          <svg class="me-1" width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M4.12 0C3.30514 0 2.50858 0.241634 1.83105 0.694345C1.15352 1.14706 0.625451 1.79051 0.313618 2.54334C0.00178513 3.29618 -0.0798046 4.12457 0.0791665 4.92377C0.238138 5.72297 0.63053 6.45709 1.20672 7.03328C1.78291 7.60947 2.51703 8.00186 3.31623 8.16084C4.11543 8.31981 4.94383 8.23822 5.69666 7.92638C6.44949 7.61455 7.09295 7.08648 7.54566 6.40895C7.99837 5.73142 8.24 4.93486 8.24 4.12C8.23684 3.02828 7.80175 1.98218 7.02978 1.21022C6.25782 0.438253 5.21172 0.00316595 4.12 0ZM4.12 1.03C4.73115 1.03 5.32857 1.21123 5.83671 1.55076C6.34486 1.89029 6.74091 2.37288 6.97479 2.93751C7.20866 3.50213 7.26986 4.12343 7.15063 4.72283C7.0314 5.32223 6.73711 5.87282 6.30496 6.30496C5.87282 6.7371 5.32223 7.0314 4.72283 7.15063C4.12343 7.26986 3.50213 7.20866 2.93751 6.97479C2.37289 6.74091 1.89029 6.34486 1.55076 5.83671C1.21123 5.32856 1.03 4.73114 1.03 4.12C1.02948 3.71407 1.10904 3.31202 1.26414 2.93689C1.41924 2.56175 1.64683 2.2209 1.93387 1.93387C2.22091 1.64683 2.56175 1.41924 2.93689 1.26414C3.31202 1.10904 3.71407 1.02947 4.12 1.03ZM3.6 2.06V4.346L3.765 4.48L4.284 5L4.634 5.391L5.376 4.649L4.985 4.299L4.635 3.949V2.08H3.6V2.06Z"
              fill="white" />
          </svg>
          ${moment(i.date,"DD.MM.YYYY").format("DD MMMM YYYY")}
        </div>
        <div class="local-outage-address-header">Bavuru No</div>
        <div class="local-outage-address">${i.basvuruNo}</div>
        <div class="local-outage-address-header">Etkilenen Adres</div>
        <div class="local-outage-address">${i.neighbourhood} ${i.street}</div>
        <!--<div class="local-outage-address-header">Aklama</div> -->
        <!--<div class="local-outage-desc">${i.desc}</div> -->        
      `,Oh.appendChild(s)}},Z0=localStorage.getItem("localOutages");Z0&&ac(Z0);const Ln=(r=[],t=!1)=>{var e,n,i,s,a,u;X0.innerHTML="",t&&(S6.innerText=((e=r.filter(h=>h.get("BILDIRIM_TURU")==="Bildirimli"))==null?void 0:e.length)||0,I6.innerText=((n=r.filter(h=>h.get("BILDIRIM_TURU")==="Bildirimsiz"))==null?void 0:n.length)||0);for(const h of r){const d=h.getProperties(),f=moment(d.RPTD_DATE),g=moment(d.EST_REPAIR_TIME),_=moment(),m=h.get("BILDIRIM_TURU"),v=`<strong>${f.format("HH:mm")}</strong>`,x=m==="Bildirimli"&&g.isSameOrBefore(_)?"-":`<strong>${g.format("HH:mm")}</strong>`,w=g.isBefore()?`
        <svg width="14" height="13" viewBox="0 0 10 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.123 5.25419C1.18579 6.04171 1.47676 6.79386 1.9603 7.41862C2.44385 8.04338 3.09901 8.51365 3.84563 8.77191C4.59225 9.03017 5.39796 9.06521 6.16419 8.87275C6.93041 8.68029 7.62393 8.26867 8.15989 7.68826C8.69585 7.10784 9.05102 6.38379 9.18195 5.60469C9.31287 4.82559 9.21388 4.02522 8.89707 3.30149C8.58027 2.57777 8.05939 1.96208 7.39816 1.52974C6.73693 1.0974 5.96403 0.86716 5.174 0.867188V1.60619C5.81858 1.6061 6.4493 1.79332 6.98944 2.14508C7.52959 2.49683 7.95588 2.99795 8.21649 3.58751C8.47709 4.17706 8.56076 4.82964 8.45733 5.46587C8.35391 6.1021 8.06783 6.69456 7.63391 7.17121C7.19998 7.64786 6.6369 7.98815 6.01315 8.1507C5.3894 8.31324 4.73186 8.29104 4.12049 8.08679C3.50913 7.88253 2.97029 7.50503 2.56951 7.0002C2.16873 6.49536 1.92327 5.88495 1.863 5.24319C2.17583 5.15955 2.45244 4.97529 2.65015 4.71884C2.84787 4.46239 2.95569 4.148 2.957 3.82419V2.71519H2.587V1.60619H1.848V2.71519H1.109V1.60619H0.37V2.71519H0V3.82419C0.00105533 4.1536 0.11213 4.47323 0.315588 4.73231C0.519046 4.99138 0.803224 5.17507 1.123 5.25419ZM2.217 3.82419C2.217 4.02018 2.13914 4.20815 2.00055 4.34674C1.86196 4.48533 1.674 4.56319 1.478 4.56319C1.28201 4.56319 1.09404 4.48533 0.955448 4.34674C0.816859 4.20815 0.739 4.02018 0.739 3.82419V3.45419H2.217V3.82419ZM5.543 2.22419V4.56719H6.843L4.8 7.63819V5.30219H3.5L5.543 2.22419Z"
              fill="#32B44B" />
        </svg>`:`
        <svg width="14" height="14" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.559 4.87781C7.55911 4.66355 7.62415 4.45435 7.74554 4.2778C7.86693 4.10124 8.03898 3.96562 8.239 3.88881C8.1353 3.45609 7.96349 3.0426 7.73 2.66381C7.59469 2.7245 7.44829 2.7565 7.3 2.75781C7.12346 2.75811 6.94964 2.71422 6.7944 2.63015C6.63916 2.54607 6.50742 2.42449 6.4112 2.27647C6.31497 2.12846 6.25732 1.95872 6.24348 1.78271C6.22965 1.60671 6.26008 1.43004 6.332 1.26881C5.95403 1.03467 5.5412 0.862178 5.109 0.757812C5.03237 0.957981 4.8968 1.13018 4.72021 1.25167C4.54363 1.37315 4.33434 1.43818 4.12 1.43818C3.90566 1.43818 3.69637 1.37315 3.51979 1.25167C3.3432 1.13018 3.20763 0.957981 3.131 0.757812C2.69828 0.861516 2.28479 1.03333 1.906 1.26681C1.97836 1.42813 2.00914 1.60502 1.99552 1.7813C1.98191 1.95758 1.92433 2.12764 1.82805 2.27593C1.73177 2.42423 1.59987 2.54603 1.44439 2.63021C1.2889 2.71439 1.11481 2.75826 0.938 2.75781C0.789411 2.75829 0.642445 2.72692 0.507 2.66581C0.275689 3.04548 0.104657 3.45872 0 3.89081C0.199754 3.96785 0.371499 4.10357 0.492626 4.28011C0.613752 4.45664 0.678583 4.66572 0.678583 4.87981C0.678583 5.09391 0.613752 5.30298 0.492626 5.47952C0.371499 5.65606 0.199754 5.79178 0 5.86881C0.103704 6.30153 0.275513 6.71502 0.509 7.09381C0.704927 7.00519 0.923208 6.97837 1.13476 7.01694C1.34631 7.0555 1.54109 7.15761 1.69315 7.30967C1.8452 7.46172 1.94731 7.6565 1.98587 7.86805C2.02444 8.0796 1.99762 8.29789 1.909 8.49381C2.288 8.72689 2.70142 8.89867 3.134 9.00281C3.21054 8.80311 3.34585 8.63132 3.52207 8.51013C3.69829 8.38895 3.90713 8.32407 4.121 8.32407C4.33487 8.32407 4.54371 8.38895 4.71993 8.51013C4.89615 8.63132 5.03146 8.80311 5.108 9.00281C5.54072 8.89911 5.95421 8.7273 6.333 8.49381C6.24497 8.29789 6.21859 8.07983 6.25738 7.86857C6.29616 7.65731 6.39827 7.46284 6.55015 7.31096C6.70202 7.15908 6.8965 7.05697 7.10776 7.01819C7.31902 6.97941 7.53708 7.00578 7.733 7.09381C7.96608 6.71481 8.13786 6.30139 8.242 5.86881C8.0415 5.79177 7.86898 5.6559 7.74709 5.47904C7.6252 5.30219 7.55963 5.0926 7.559 4.87781Z" fill="#FF861D"/>
        <path d="M4.544 2.17188V4.51187H5.844L3.8 7.58287V5.24688H2.5L4.544 2.17188Z" fill="white"/>
        </svg>`,S=(s=(i=d.ilceler)==null?void 0:i.join(`
`))==null?void 0:s.toLocaleUpperCase("tr-TR"),R=(u=(a=d.mahalleler)==null?void 0:a.map(b=>`<div class="chip">${b} Mah.</div>`))==null?void 0:u.join(`
`),k=d.MESSAGE,M=document.createElement("div");M.className="overlay-container overlay-container-clickable mb-2",M.classList.add(m==="Bildirimli"?"planned":"reported"),M.role="button",M.onclick=()=>{bp(h)},M.innerHTML=`
            <div id="overlay-header" class="overlay-header">
              <div id="overlay-district" class="overlay-district">${S}</div>
              <div class="overlay-date">
                <svg width="14" height="14" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.12 0C3.30514 0 2.50858 0.241634 1.83105 0.694345C1.15352 1.14706 0.625451 1.79051 0.313618 2.54334C0.00178513 3.29618 -0.0798046 4.12457 0.0791665 4.92377C0.238138 5.72297 0.63053 6.45709 1.20672 7.03328C1.78291 7.60947 2.51703 8.00186 3.31623 8.16084C4.11543 8.31981 4.94383 8.23822 5.69666 7.92638C6.44949 7.61455 7.09295 7.08648 7.54566 6.40895C7.99837 5.73142 8.24 4.93486 8.24 4.12C8.23684 3.02828 7.80175 1.98218 7.02978 1.21022C6.25782 0.438253 5.21172 0.00316595 4.12 0ZM4.12 1.03C4.73115 1.03 5.32857 1.21123 5.83671 1.55076C6.34486 1.89029 6.74091 2.37288 6.97479 2.93751C7.20866 3.50213 7.26986 4.12343 7.15063 4.72283C7.0314 5.32223 6.73711 5.87282 6.30496 6.30496C5.87282 6.7371 5.32223 7.0314 4.72283 7.15063C4.12343 7.26986 3.50213 7.20866 2.93751 6.97479C2.37289 6.74091 1.89029 6.34486 1.55076 5.83671C1.21123 5.32856 1.03 4.73114 1.03 4.12C1.02948 3.71407 1.10904 3.31202 1.26414 2.93689C1.41924 2.56175 1.64683 2.2209 1.93387 1.93387C2.22091 1.64683 2.56175 1.41924 2.93689 1.26414C3.31202 1.10904 3.71407 1.02947 4.12 1.03ZM3.6 2.06V4.346L3.765 4.48L4.284 5L4.634 5.391L5.376 4.649L4.985 4.299L4.635 3.949V2.08H3.6V2.06Z"
                    fill="#FF0000" />
                </svg>
                <span id="overlay-date-f">Balang Saati:
                  ${v}
                </span>
              </div>

               <div class="overlay-date">
                <svg width="14" height="14" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.12 0C3.30514 0 2.50858 0.241634 1.83105 0.694345C1.15352 1.14706 0.625451 1.79051 0.313618 2.54334C0.00178513 3.29618 -0.0798046 4.12457 0.0791665 4.92377C0.238138 5.72297 0.63053 6.45709 1.20672 7.03328C1.78291 7.60947 2.51703 8.00186 3.31623 8.16084C4.11543 8.31981 4.94383 8.23822 5.69666 7.92638C6.44949 7.61455 7.09295 7.08648 7.54566 6.40895C7.99837 5.73142 8.24 4.93486 8.24 4.12C8.23684 3.02828 7.80175 1.98218 7.02978 1.21022C6.25782 0.438253 5.21172 0.00316595 4.12 0ZM4.12 1.03C4.73115 1.03 5.32857 1.21123 5.83671 1.55076C6.34486 1.89029 6.74091 2.37288 6.97479 2.93751C7.20866 3.50213 7.26986 4.12343 7.15063 4.72283C7.0314 5.32223 6.73711 5.87282 6.30496 6.30496C5.87282 6.7371 5.32223 7.0314 4.72283 7.15063C4.12343 7.26986 3.50213 7.20866 2.93751 6.97479C2.37289 6.74091 1.89029 6.34486 1.55076 5.83671C1.21123 5.32856 1.03 4.73114 1.03 4.12C1.02948 3.71407 1.10904 3.31202 1.26414 2.93689C1.41924 2.56175 1.64683 2.2209 1.93387 1.93387C2.22091 1.64683 2.56175 1.41924 2.93689 1.26414C3.31202 1.10904 3.71407 1.02947 4.12 1.03ZM3.6 2.06V4.346L3.765 4.48L4.284 5L4.634 5.391L5.376 4.649L4.985 4.299L4.635 3.949V2.08H3.6V2.06Z"
                    fill="#008000" />
                </svg>
                <span id="overlay-date-l">Biti Saati:
                  ${x}
                </span>
              </div>

              <div class="overlay-conc ${g.isBefore()?"":"continue"}">
                <span>
                ${w}
                </span>
                <span id="overlay-conc">
                  ${g.isBefore()?"alma tamamland":"alma devam ediyor"}
                </span>
              </div>
            </div>
            <div id="overlay-body" class="overlay-body">
              <div class="header">Etkilenen Mahalleler</div>
              <div class="chip-container">
                ${R}
              </div>
            </div>
            <div id="overlay-footer" class="overlay-footer">
              <div class="header">Aklama</div>
              <div class="footer-desc">${k}</div>
            </div>
          `,X0.appendChild(M)}},xs=document.getElementById("summary-box-planned"),ws=document.getElementById("summary-box-reported"),lc=xs.querySelector(".icon-container"),uc=ws.querySelector(".icon-container");xs.onclick=()=>{if(xs.classList.contains("active"))xs.classList.remove("active"),lc.style.display="none",oe.getSource().clear(),oe.getSource().addFeatures(Ve),Ln(Ve);else{xs.classList.add("active"),ws.classList.remove("active"),lc.style.display="block",uc.style.display="none",oe.getSource().clear();const r=Ve.filter(t=>t.get("BILDIRIM_TURU")==="Bildirimli");oe.getSource().addFeatures(r),Ln(r)}};ws.onclick=()=>{if(ws.classList.contains("active"))ws.classList.remove("active"),uc.style.display="none",oe.getSource().clear(),oe.getSource().addFeatures(Ve),Ln(Ve);else{ws.classList.add("active"),xs.classList.remove("active"),uc.style.display="block",lc.style.display="none",oe.getSource().clear();const r=Ve.filter(t=>t.get("BILDIRIM_TURU")==="Bildirimsiz");oe.getSource().addFeatures(r),Ln(r)}};const Ip=document.getElementById("bedasPanel"),R6=document.getElementById("bedasPanelButton"),T6=document.getElementById("bedasPanelSearchButton"),Rp=document.getElementById("outageContainer"),Tl=document.getElementById("outageButtonSvg"),A6=document.getElementById("bedasPanelCloseButton"),vo=document.getElementById("planned-outage-filter"),Eo=document.getElementById("unplanned-outage-filter"),b6=document.getElementById("bedas-panel-button");R6.onclick=()=>{Ip.classList.add("active"),Rp.classList.add("left"),Tl.classList.add("left"),Tl.src="/img/svgviewer-png-output-16.png"};T6.onclick=()=>{b6.classList.add("passive")};A6.onclick=()=>{$l()};vo.onclick=()=>{if(vo.classList.contains("active"))vo.classList.remove("active"),oe.getSource().clear(),oe.getSource().addFeatures(Ve);else{vo.classList.add("active"),Eo.classList.remove("active"),oe.getSource().clear();const r=Ve.filter(t=>t.get("BILDIRIM_TURU")==="Bildirimli");oe.getSource().addFeatures(r)}$l()};Eo.onclick=()=>{if(Eo.classList.contains("active"))Eo.classList.remove("active"),oe.getSource().clear(),oe.getSource().addFeatures(Ve);else{Eo.classList.add("active"),vo.classList.remove("active"),oe.getSource().clear();const r=Ve.filter(t=>t.get("BILDIRIM_TURU")==="Bildirimsiz");oe.getSource().addFeatures(r)}$l()};const $l=()=>{Ip.classList.remove("active"),Rp.classList.remove("left"),Tl.classList.remove("left"),Tl.src="/img/svgviewer-png-output-8.png"};document.getElementById("loading-screen");const L6=document.getElementById("map"),dn=document.createElement("div");dn.id="toast";dn.className="toast toast-container";dn.innerHTML='<div id="toast-body" class="toast-body"></div>';L6.appendChild(dn);const M6=new bootstrap.Toast(dn,{delay:3e3}),k6=document.getElementById("toast-body"),ue=Object.freeze({DEFAULT:"DEFAULT",ERROR:"ERROR",SUCCESS:"SUCCESS"}),Le=(r,t=ue.DEFAULT)=>{switch(k6.innerText=r,t){case ue.SUCCESS:dn.style.backgroundColor="#198754d9",dn.style.color="#ffffff";break;case ue.ERROR:dn.style.backgroundColor="#dc3545d9",dn.style.color="#ffffff";break;case ue.DEFAULT:dn.style.backgroundColor="#ffffffd9",dn.style.color="#000000";break;default:dn.style.backgroundColor="#ffffffd9",dn.style.color="#000000";break}M6.show()},Tp=document.createElement("script");Tp.src="";document.head.appendChild(Tp);const F6=document.getElementById("overlay-district"),O6=document.getElementById("outagePanel"),P6=document.getElementById("chip-container"),D6=document.getElementById("footer-desc"),B6=document.getElementById("overlay-date-first"),N6=document.getElementById("overlay-date-last"),Ph=document.getElementById("overlay-conc"),G6=document.getElementById("overlay-close-button"),K0=document.getElementById("map"),oe=new qc({style:r=>{const t=r.get("BILDIRIM_TURU")==="Bildirimsiz"?"/unplanned.svg":"/planl.svg";return[new Mn({geometry:e=>{const i=e.getGeometry().getInteriorPoints(),s=Un(i.getExtent());return i.setCoordinates([s],"XY"),i},image:new Ns({width:60,height:60,displacement:[0,0],src:t})}),new Mn({fill:new Ur({color:"rgba(87, 26, 31, 0.4)"})})]},source:new $c}),Vo=new qc({source:new $c,style:new Mn({image:new Ns({width:45,height:45,displacement:[0,15],src:"/redpin.png"})})}),Ap=new M7({source:new Kx({url:"https://mt0.google.com/vt/lyrs=m&hl=tr&x={x}&y={y}&z={z}",maxZoom:20})}),Jl=new px({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),V6=document.getElementById("overlay"),Ii=new x6({element:V6});let rd;const nl=new qc({source:new $c,style:[new Mn({stroke:new Fs({color:"rgba(26, 105, 255, 0.5)",width:1})}),new Mn({stroke:new Fs({color:"#FF5733",width:.8,lineDash:[5,5]}),fill:new Ur({color:"rgba(0, 0, 255, 0.1)"})})]}),z6=async()=>{const r=await fetch("/border.json").then(n=>n.json()),t=Jl.readFeatures(r);nl.getSource().clear(),t.forEach(n=>{nl.getSource().addFeature(n)}),ze.addLayer(nl);const e=nl.getSource().getExtent();ze.getView().fit(e,{padding:[50,50,50,50],duration:1e3})},W6=async()=>{const r=await fetch("/border.json").then(e=>e.json());rd=Jl.readFeatures(r)[0]},ze=new y7({layers:[Ap,oe,Vo],controls:[],overlays:[Ii],target:"map",view:new Jn({center:[0,0],zoom:2})});z6();W6();if(window.innerWidth>=768){const r=JSON.parse("[27.504272,40.622292,30.117645,41.573334]");ze.getView().fit(Uh(r,"EPSG:4326","EPSG:3857"))}else{const r=JSON.parse("[27.504272,40.622292,30.117645,41.573334]");ze.getView().fit(Uh(r,"EPSG:4326","EPSG:3857"))}ze.on("pointermove",function(r){if(r.dragging)return;const t=r.pixel;K0.style.cursor="default",ze.forEachFeatureAtPixel(t,function(e){return K0.style.cursor="pointer",e})});let sl=!1;ze.on("click",function(r){if(r.dragging)return;Ii.setPosition(void 0);const t=r.pixel;ze.forEachFeatureAtPixel(t,function(e){e.get("OUTAGE_NO")&&bp(e)})});const bp=r=>{const e=r.getGeometry().getInteriorPoints(),n=Un(e.getExtent()),i=r.getProperties(),s=moment(i.RPTD_DATE),a=moment(i.EST_REPAIR_TIME),u=moment(),h=r.get("BILDIRIM_TURU"),d=document.getElementById("overlay");d.classList.remove("planned","reported"),h==="Bildirimli"?d.classList.add("planned"):h==="Bildirimsiz"&&d.classList.add("reported");const f=`<strong>${s.format("HH:mm")}</strong>`,g=h==="Bildirimli"&&a.isSameOrBefore(u)?"-":`<strong>${a.format("HH:mm")}</strong>`;B6.innerHTML=f,N6.innerHTML=g,moment().isBetween(s,a)&&(Ph.innerText="alma devam ediyor",Ph.parentElement.classList.add("continue"),Ph.previousElementSibling.innerHTML=`
            <svg width="14" height="14" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.559 4.87781C7.55911 4.66355 7.62415 4.45435 7.74554 4.2778C7.86693 4.10124 8.03898 3.96562 8.239 3.88881C8.1353 3.45609 7.96349 3.0426 7.73 2.66381C7.59469 2.7245 7.44829 2.7565 7.3 2.75781C7.12346 2.75811 6.94964 2.71422 6.7944 2.63015C6.63916 2.54607 6.50742 2.42449 6.4112 2.27647C6.31497 2.12846 6.25732 1.95872 6.24348 1.78271C6.22965 1.60671 6.26008 1.43004 6.332 1.26881C5.95403 1.03467 5.5412 0.862178 5.109 0.757812C5.03237 0.957981 4.8968 1.13018 4.72021 1.25167C4.54363 1.37315 4.33434 1.43818 4.12 1.43818C3.90566 1.43818 3.69637 1.37315 3.51979 1.25167C3.3432 1.13018 3.20763 0.957981 3.131 0.757812C2.69828 0.861516 2.28479 1.03333 1.906 1.26681C1.97836 1.42813 2.00914 1.60502 1.99552 1.7813C1.98191 1.95758 1.92433 2.12764 1.82805 2.27593C1.73177 2.42423 1.59987 2.54603 1.44439 2.63021C1.2889 2.71439 1.11481 2.75826 0.938 2.75781C0.789411 2.75829 0.642445 2.72692 0.507 2.66581C0.275689 3.04548 0.104657 3.45872 0 3.89081C0.199754 3.96785 0.371499 4.10357 0.492626 4.28011C0.613752 4.45664 0.678583 4.66572 0.678583 4.87981C0.678583 5.09391 0.613752 5.30298 0.492626 5.47952C0.371499 5.65606 0.199754 5.79178 0 5.86881C0.103704 6.30153 0.275513 6.71502 0.509 7.09381C0.704927 7.00519 0.923208 6.97837 1.13476 7.01694C1.34631 7.0555 1.54109 7.15761 1.69315 7.30967C1.8452 7.46172 1.94731 7.6565 1.98587 7.86805C2.02444 8.0796 1.99762 8.29789 1.909 8.49381C2.288 8.72689 2.70142 8.89867 3.134 9.00281C3.21054 8.80311 3.34585 8.63132 3.52207 8.51013C3.69829 8.38895 3.90713 8.32407 4.121 8.32407C4.33487 8.32407 4.54371 8.38895 4.71993 8.51013C4.89615 8.63132 5.03146 8.80311 5.108 9.00281C5.54072 8.89911 5.95421 8.7273 6.333 8.49381C6.24497 8.29789 6.21859 8.07983 6.25738 7.86857C6.29616 7.65731 6.39827 7.46284 6.55015 7.31096C6.70202 7.15908 6.8965 7.05697 7.10776 7.01819C7.31902 6.97941 7.53708 7.00578 7.733 7.09381C7.96608 6.71481 8.13786 6.30139 8.242 5.86881C8.0415 5.79177 7.86898 5.6559 7.74709 5.47904C7.6252 5.30219 7.55963 5.0926 7.559 4.87781Z" fill="#FF861D"/>
            <path d="M4.544 2.17188V4.51187H5.844L3.8 7.58287V5.24688H2.5L4.544 2.17188Z" fill="white"/>
            </svg>`),F6.innerText=i.ilceler.join(`
`).toLocaleUpperCase("tr-TR");const _=i.mahalleler.map(m=>`<div class="chip">${m} Mah.</div>`);P6.innerHTML=_.join(`
`),D6.innerText=i.MESSAGE,sl=!1,$l(),O6.classList.contains("full-outage-panel")&&Sp(),Ii.setPosition(n),document.addEventListener("click",Lp),window.innerWidth>=768?ze.getView().fit(e.getExtent(),{maxZoom:16,padding:[0,Ii.getElement().clientWidth,Ii.getElement().clientHeight,0],duration:1e3}):ze.getView().fit(new Oi(n),{maxZoom:16,padding:[0,Ii.getElement().clientWidth,Ii.getElement().clientHeight,0],duration:1e3})},Lp=r=>{if(!r.target.classList.contains("ol-overlay-container")&&sl){Ii.setPosition(void 0),document.removeEventListener("click",Lp),sl=!1;return}sl=!0};G6.onclick=()=>{Ii.setPosition(void 0)};const Ve=[],Mp=()=>{oe.getSource().clear(),Ve.length=0},U6=async()=>{var r,t;Mp();try{const e=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/RetrieveOutages").then(n=>n.json()).catch(n=>(console.error("Outage data fetch error:",n),null));if(((r=e==null?void 0:e.Outage)==null?void 0:r.length)>0){const n=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/RetrieveOutageTransformersList").then(i=>i.json()).catch(i=>(console.error("Outage transformers list fetch error:",i),null));if((t=n==null?void 0:n.OutageTransformersList)!=null&&t.OutageTransformers&&n.OutageTransformersList.OutageTransformers.length>0){const i=Ti.groupBy(e.Outage,"OUTAGE_NO"),s=Ti.groupBy(n.OutageTransformersList.OutageTransformers,"OUTAGE_NO");for(const a of Object.keys(i)){const u=i[a],{CBS_TM_NO:h,...d}=u[0],f=s[a]||[],g=[...new Set(f.map(_=>_.TM_NO))];if(g.length>0){const _={type:"Feature",geometry:{type:"MultiPolygon",coordinates:[]},properties:{...d}},{mahalleler:m,ilceler:v}=await kp(g),x=Ti.groupBy(f,"TM_NO");for(const S of Object.keys(x)){const R=x[S],k=[],M=Ti.groupBy(R,"PARTNO"),b=[],V=[];for(const B of Object.keys(M)){const P=M[B],z=P.sort((Z,K)=>Number(Z.KOORD_SIRA)-Number(K.KOORD_SIRA)).map(Z=>[Number(Z.LON),Number(Z.LAT)]);P[0].POLIGON_TIPI==="DIS POLIGON"?b.push(z):V.push(z)}if(b.length>1){const B=wp.union(b);k.push(B[0][0])}else k.push(...b);k.push(...V),_.geometry.coordinates.push(k)}_.properties.mahalleler=m,_.properties.ilceler=v;const w=Jl.readFeature(_);Ve.push(w),oe.getSource().addFeature(w)}}Ln(Ve,!0)}else console.warn("No outage transformers data available."),Ln([],!0)}else console.warn("No outages data available."),Ln([],!0)}catch(e){console.error("An error occurred during data fetching:",e),Le("Kesintiler yklenirken hata olutu.",ue.ERROR),Ln([],!0)}},Y6=async()=>{var r,t;Mp();try{const e=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/RetrieveOutages").then(n=>n.json()).catch(n=>(console.error("Outage data fetch error:",n),null));if(((r=e==null?void 0:e.Outage)==null?void 0:r.length)>0){const n=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/RetrieveOutageTransformersList").then(i=>i.json()).catch(i=>(console.error("Outage transformers list fetch error:",i),null));if((t=n==null?void 0:n.OutageTransformersList)!=null&&t.OutageTransformers&&n.OutageTransformersList.OutageTransformers.length>0){const i=Ti.groupBy(e.Outage,"OUTAGE_NO"),s=Ti.groupBy(n.OutageTransformersList.OutageTransformers,"OUTAGE_NO");for(const a of Object.keys(i)){const u=i[a],{CBS_TM_NO:h,...d}=u[0],f=s[a]||[],g=[...new Set(f.map(_=>_.TM_NO))];if(g.length>0){const _={type:"Feature",geometry:{type:"MultiPolygon",coordinates:[]},properties:{...d}},{mahalleler:m,ilceler:v}=await kp(g),x=Ti.groupBy(f,"TM_NO");for(const S of Object.keys(x)){const R=x[S],k=[],M=Ti.groupBy(R,"PARTNO"),b=[],V=[];for(const B of Object.keys(M)){const P=M[B],z=P.sort((Z,K)=>Number(Z.KOORD_SIRA)-Number(K.KOORD_SIRA)).map(Z=>[Number(Z.LON),Number(Z.LAT)]);P[0].POLIGON_TIPI==="DIS POLIGON"?b.push(z):V.push(z)}if(b.length>1){const B=wp.union(b);k.push(B[0][0])}else k.push(...b);k.push(...V),_.geometry.coordinates.push(k)}_.properties.mahalleler=m,_.properties.ilceler=v;const w=Jl.readFeature(_);Ve.push(w),oe.getSource().addFeature(w)}}Ln(Ve,!0)}else console.warn("No outage transformers data available."),Ln([],!0)}else console.warn("No outages data available."),Ln([],!0)}catch(e){console.error("An error occurred during data fetching:",e),Le("Kesintiler yklenirken hata olutu.",ue.ERROR),Ln([],!0)}};async function kp(r){var a,u;if(!Array.isArray(r)||r.length===0)return console.warn("TM_NO_LIST bir dizi deil veya bo:",r),{mahalleler:[],ilceler:[]};const t=r.map(h=>`https://kesintiapi.ckenerji.com.tr/BEDAS/GetLocation?tmno=${h}`),e=[],n=30;for(let h=0;h<t.length;h+=n)e.push(t.slice(h,h+n));const i=[],s=[];for await(const h of e)try{const d=await Promise.all(h.map(f=>fetch(f).then(g=>g.json())));for(const f of d)if(f!=null&&f.results){const g=(a=f.results.find(m=>m.mahalle))==null?void 0:a.mahalle,_=(u=f.results.find(m=>m.ilce))==null?void 0:u.ilce;g&&!i.includes(g)&&i.push(g),_&&!s.includes(_)&&s.push(_)}else console.warn("API'den yeterli sonu bulunamad:",f)}catch(d){console.error("API arsnda hata olutu:",d)}return{mahalleler:i,ilceler:s}}U6();setInterval(Y6,3e5);const X6=document.getElementById("location-button"),Z6=document.getElementById("carto-db-voyager"),K6=document.getElementById("carto-db-light"),H6=document.getElementById("google-street"),j6=document.getElementById("google-hibrit"),Fp=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(q6,cc,{timeout:5e3,maximumAge:0}):Le("Corafi konum bu tarayc tarafndan desteklenmiyor.",ue.ERROR)},hc=(r,t=!1)=>{const e=c1([r.coords.longitude,r.coords.latitude]);if(rd.getGeometry().clone().transform("EPSG:4326","EPSG:3857").intersectsCoordinate(e)){Vo.getSource().clear();const s=new zs(new Oi(e));if(Vo.getSource().addFeature(s),t){const a=ze.getView().getZoom();ze.getView().animate({center:e,zoom:a,duration:1200})}}else Le("Konumunuz hizmet alan dnda olduu iin kullanlamamaktadr.",ue.ERROR)},q6=r=>{hc(r);const t=ze.getView().getZoom(),e=c1([r.coords.longitude,r.coords.latitude]);ze.getView().animate({center:e,zoom:t,duration:1200})};X6.onclick=()=>{Fp()};const Ql=r=>{Ap.getSource().setUrl(r)};H6.onclick=()=>{Ql("https://mt0.google.com/vt/lyrs=m&hl=tr&x={x}&y={y}&z={z}")};Z6.onclick=()=>{Ql("https://0.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png")};K6.onclick=()=>{Ql("https://0.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}{r}.png")};j6.onclick=()=>{Ql("http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}")};const cc=r=>{switch(r.code){case r.PERMISSION_DENIED:Le("zellii kullanabilmek iin konum kullanmna izin vermelisiniz.",ue.ERROR);break;case r.POSITION_UNAVAILABLE:Le("Konum bilgisine ulalamyor.",ue.ERROR);break;case r.TIMEOUT:Le("Kullanc konumunu alma istei zaman amna urad.",ue.ERROR);break;case r.UNKNOWN_ERROR:Le("Bilinmeyen bir hata olutu.",ue.ERROR);break}},$6=()=>{navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(r=>{r.state==="granted"?navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>hc(t,!0),cc,{timeout:5e3,maximumAge:0}):r.state==="prompt"&&Fp()}):navigator.geolocation&&navigator.geolocation.getCurrentPosition(r=>hc(r,!0),cc,{timeout:5e3,maximumAge:0})};setTimeout(()=>{$6()},500);const Al=document.getElementById("search-input"),ir=document.getElementById("search-list"),J6=document.getElementById("search-clear-button"),Q6=document.getElementById("search-button"),t8=document.getElementById("search-city"),e8=document.getElementById("bedas-panel-button");window.innerWidth<768&&t8.classList.add("d-none");const n8=async r=>{ir.innerHTML="",ir.classList.remove("d-block"),ir.classList.add("d-none");const{Place:t}="",e={textQuery:r,locationRestriction:{west:27.969083,north:41.588578,east:29.116908,south:40.950814},fields:["displayName","location","viewport","formattedAddress"],language:"tr-TR",maxResultCount:5,region:"tr"},{places:n}=await t.searchByText(e);if(n&&n.length>0){ir.classList.remove("d-none"),ir.classList.add("d-block");for(const i of n)r8(i)}},i8=Ti.debounce(r=>n8(r),700);Al.oninput=r=>{const t=r.target.value;t?i8(t):sd()};const r8=r=>{const t=document.createElement("li");t.className="list-group-item",t.innerText=r.displayName+" - "+r.formattedAddress,t.style.cursor="pointer",t.onclick=()=>{s8(r)},ir.appendChild(t)},s8=r=>{sd();const{west:t,east:e,north:n,south:i}=r.viewport.toJSON(),s=Uh([t,i,e,n],"EPSG:4326","EPSG:3857"),a=Un(s);if(rd.getGeometry().intersectsCoordinate(a)){Vo.getSource().clear();const h=new zs(new Oi(a));Vo.getSource().addFeature(h),ze.getView().fit(s,{duration:1200,maxZoom:18,padding:[50,50,50,50]})}else Le("Seilen konum hizmet alan dnda olduu iin kullanlamamaktadr.",ue.ERROR)},sd=()=>{Al.value="",ir.classList.remove("d-block"),ir.classList.add("d-none"),e8.classList.remove("passive")};Q6.onclick=()=>{const r=new(window.SpeechRecognition||window.webkitSpeechRecognition);r.lang="tr-TR",r.start(),r.onresult=function(t){const e=t.results[0][0].transcript;Al.value=e,Al.dispatchEvent(new Event("input"))},r.onerror=function(t){console.error("Hata:",t),t.error==="service-not-allowed"?Le("Browsernz bu zellii desteklememektedir.",ue.ERROR):t.error==="not-allowed"?Le("Bu zellii kullanabilmek iin izin vermeniz gerekmektedir.",ue.ERROR):Le("Hata Olutu.",ue.ERROR)}};J6.onclick=sd;function hr(r){return typeof r=="string"||r instanceof String}function H0(r){var t;return typeof r=="object"&&r!=null&&(r==null||(t=r.constructor)==null?void 0:t.name)==="Object"}function Op(r,t){return Array.isArray(t)?Op(r,(e,n)=>t.includes(n)):Object.entries(r).reduce((e,n)=>{let[i,s]=n;return t(s,i)&&(e[i]=s),e},{})}const J={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function o8(r){switch(r){case J.LEFT:return J.FORCE_LEFT;case J.RIGHT:return J.FORCE_RIGHT;default:return r}}function Dh(r){return r.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function bl(r,t){if(t===r)return!0;const e=Array.isArray(t),n=Array.isArray(r);let i;if(e&&n){if(t.length!=r.length)return!1;for(i=0;i<t.length;i++)if(!bl(t[i],r[i]))return!1;return!0}if(e!=n)return!1;if(t&&r&&typeof t=="object"&&typeof r=="object"){const s=t instanceof Date,a=r instanceof Date;if(s&&a)return t.getTime()==r.getTime();if(s!=a)return!1;const u=t instanceof RegExp,h=r instanceof RegExp;if(u&&h)return t.toString()==r.toString();if(u!=h)return!1;const d=Object.keys(t);for(i=0;i<d.length;i++)if(!Object.prototype.hasOwnProperty.call(r,d[i]))return!1;for(i=0;i<d.length;i++)if(!bl(r[d[i]],t[d[i]]))return!1;return!0}else if(t&&r&&typeof t=="function"&&typeof r=="function")return t.toString()===r.toString();return!1}class a8{constructor(t){for(Object.assign(this,t);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?J.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?J.RIGHT:J.LEFT}}function ut(r,t){return new ut.InputMask(r,t)}function Pp(r){if(r==null)throw new Error("mask property should be defined");return r instanceof RegExp?ut.MaskedRegExp:hr(r)?ut.MaskedPattern:r===Date?ut.MaskedDate:r===Number?ut.MaskedNumber:Array.isArray(r)||r===Array?ut.MaskedDynamic:ut.Masked&&r.prototype instanceof ut.Masked?r:ut.Masked&&r instanceof ut.Masked?r.constructor:r instanceof Function?ut.MaskedFunction:(console.warn("Mask not found for mask",r),ut.Masked)}function zo(r){if(!r)throw new Error("Options in not defined");if(ut.Masked){if(r.prototype instanceof ut.Masked)return{mask:r};const{mask:t=void 0,...e}=r instanceof ut.Masked?{mask:r}:H0(r)&&r.mask instanceof ut.Masked?r:{};if(t){const n=t.mask;return{...Op(t,(i,s)=>!s.startsWith("_")),mask:t.constructor,_mask:n,...e}}}return H0(r)?{...r}:{mask:r}}function Pi(r){if(ut.Masked&&r instanceof ut.Masked)return r;const t=zo(r),e=Pp(t.mask);if(!e)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===e&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new e(t)}ut.createMask=Pi;class od{get selectionStart(){let t;try{t=this._unsafeSelectionStart}catch{}return t??this.value.length}get selectionEnd(){let t;try{t=this._unsafeSelectionEnd}catch{}return t??this.value.length}select(t,e){if(!(t==null||e==null||t===this.selectionStart&&e===this.selectionEnd))try{this._unsafeSelect(t,e)}catch{}}get isActive(){return!1}}ut.MaskElement=od;const j0=90,l8=89;class tu extends od{constructor(t){super(),this.input=t,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var t,e,n;return(t=(e=(n=this.input).getRootNode)==null?void 0:e.call(n))!=null?t:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(t){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",t.drop),this.input.addEventListener("click",t.click),this.input.addEventListener("focus",t.focus),this.input.addEventListener("blur",t.commit),this._handlers=t}_onKeydown(t){if(this._handlers.redo&&(t.keyCode===j0&&t.shiftKey&&(t.metaKey||t.ctrlKey)||t.keyCode===l8&&t.ctrlKey))return t.preventDefault(),this._handlers.redo(t);if(this._handlers.undo&&t.keyCode===j0&&(t.metaKey||t.ctrlKey))return t.preventDefault(),this._handlers.undo(t);t.isComposing||this._handlers.selectionChange(t)}_onBeforeinput(t){if(t.inputType==="historyUndo"&&this._handlers.undo)return t.preventDefault(),this._handlers.undo(t);if(t.inputType==="historyRedo"&&this._handlers.redo)return t.preventDefault(),this._handlers.redo(t)}_onCompositionEnd(t){this._handlers.input(t)}_onInput(t){t.isComposing||this._handlers.input(t)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}ut.HTMLMaskElement=tu;class u8 extends tu{constructor(t){super(t),this.input=t}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(t,e){this.input.setSelectionRange(t,e)}get value(){return this.input.value}set value(t){this.input.value=t}}ut.HTMLMaskElement=tu;class Dp extends tu{get _unsafeSelectionStart(){const t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return i==null||n==null||n<i?n:i}get _unsafeSelectionEnd(){const t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return i==null||n==null||n>i?n:i}_unsafeSelect(t,e){if(!this.rootElement.createRange)return;const n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);const i=this.rootElement,s=i.getSelection&&i.getSelection();s&&(s.removeAllRanges(),s.addRange(n))}get value(){return this.input.textContent||""}set value(t){this.input.textContent=t}}ut.HTMLContenteditableMaskElement=Dp;class eu{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(t){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(t),this.states.length>eu.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(t){return this.currentIndex=Math.min(Math.max(this.currentIndex+t,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}eu.MAX_LENGTH=100;class h8{constructor(t,e){this.el=t instanceof od?t:t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"?new Dp(t):new u8(t),this.masked=Pi(e),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new eu,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(t){var e;return t==null||((e=this.masked)==null?void 0:e.maskEquals(t))}get mask(){return this.masked.mask}set mask(t){if(this.maskEquals(t))return;if(!(t instanceof ut.Masked)&&this.masked.constructor===Pp(t)){this.masked.updateOptions({mask:t});return}const e=t instanceof ut.Masked?t:Pi({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}get value(){return this._value}set value(t){this.value!==t&&(this.masked.value=t,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(t){this.unmaskedValue!==t&&(this.masked.unmaskedValue=t,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(t){this.rawInputValue!==t&&(this.masked.rawInputValue=t,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(t){this.masked.typedValueEquals(t)||(this.masked.typedValue=t,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(t,e){const n=this._listeners[t];n&&n.forEach(i=>i(e))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(t){!this.el||!this.el.isActive||(this.el.select(t,t),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(t){const e=this.masked.unmaskedValue,n=this.masked.value,i=this.masked.rawInputValue,s=this.displayValue,a=this.unmaskedValue!==e||this.value!==n||this._rawInputValue!==i;this._unmaskedValue=e,this._value=n,this._rawInputValue=i,this.el.value!==s&&(this.el.value=s),t==="auto"?this.alignCursor():t!=null&&(this.cursorPos=t),a&&this._fireChangeEvents(),!this._historyChanging&&(a||this.history.isEmpty)&&this.history.push({unmaskedValue:e,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(t){const{mask:e,...n}=t,i=!this.maskEquals(e),s=this.masked.optionsIsChanged(n);i&&(this.mask=e),s&&this.masked.updateOptions(n),(i||s)&&this.updateControl()}updateCursor(t){t!=null&&(this.cursorPos=t,this._delayUpdateCursor(t))}_delayUpdateCursor(t){this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,J.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}off(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;const n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}_onInput(t){this._inputEvent=t,this._abortUpdateCursor();const e=new a8({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),n=this.masked.rawInputValue,i=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection,{input:!0,raw:!0}).offset,s=n===this.masked.rawInputValue?e.removeDirection:J.NONE;let a=this.masked.nearestInputPos(e.startChangePos+i,s);s!==J.NONE&&(a=this.masked.nearestInputPos(a,J.NONE)),this.updateControl(a),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(t){t.preventDefault(),t.stopPropagation()}_onFocus(t){this.alignCursorFriendly()}_onClick(t){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(t){t&&(this._historyChanging=!0,this.unmaskedValue=t.unmaskedValue,this.el.select(t.selection.start,t.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}ut.InputMask=h8;class vt{static normalize(t){return Array.isArray(t)?t:[t,new vt]}constructor(t){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},t)}aggregate(t){return this.inserted+=t.inserted,this.rawInserted+=t.rawInserted,this.tailShift+=t.tailShift,this.skip=this.skip||t.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(t){return this.inserted===t.inserted&&this.tailShift===t.tailShift&&this.rawInserted===t.rawInserted&&this.skip===t.skip}}ut.ChangeDetails=vt;class ii{constructor(t,e,n){t===void 0&&(t=""),e===void 0&&(e=0),this.value=t,this.from=e,this.stop=n}toString(){return this.value}extend(t){this.value+=String(t)}appendTo(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(t){Object.assign(this,t)}unshift(t){if(!this.value.length||t!=null&&this.from>=t)return"";const e=this.value[0];return this.value=this.value.slice(1),e}shift(){if(!this.value.length)return"";const t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}class ke{constructor(t){this._value="",this._update({...ke.DEFAULTS,...t}),this._initialized=!0}updateOptions(t){this.optionsIsChanged(t)&&this.withValueRefresh(this._update.bind(this,t))}_update(t){Object.assign(this,t)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value}reset(){this._value=""}get value(){return this._value}set value(t){this.resolve(t,{input:!0})}resolve(t,e){e===void 0&&(e={input:!0}),this.reset(),this.append(t,e,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(t){this.resolve(t,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(t){this.format?this.value=this.format(t,this):this.unmaskedValue=String(t)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(t){this.resolve(t,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(t,e){return t}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),Math.min(this.displayValue.length,e-t)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),this.displayValue.slice(t,e)}extractTail(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),new ii(this.extractInput(t,e),t)}appendTail(t){return hr(t)&&(t=new ii(String(t))),t.appendTo(this)}_appendCharRaw(t,e){return t?(this._value+=t,new vt({inserted:t,rawInserted:t})):new vt}_appendChar(t,e,n){e===void 0&&(e={});const i=this.state;let s;if([t,s]=this.doPrepareChar(t,e),t&&(s=s.aggregate(this._appendCharRaw(t,e)),!s.rawInserted&&this.autofix==="pad")){const a=this.state;this.state=i;let u=this.pad(e);const h=this._appendCharRaw(t,e);u=u.aggregate(h),h.rawInserted||u.equals(s)?s=u:this.state=a}if(s.inserted){let a,u=this.doValidate(e)!==!1;if(u&&n!=null){const h=this.state;if(this.overwrite===!0){a=n.state;for(let f=0;f<s.rawInserted.length;++f)n.unshift(this.displayValue.length-s.tailShift)}let d=this.appendTail(n);if(u=d.rawInserted.length===n.toString().length,!(u&&d.inserted)&&this.overwrite==="shift"){this.state=h,a=n.state;for(let f=0;f<s.rawInserted.length;++f)n.shift();d=this.appendTail(n),u=d.rawInserted.length===n.toString().length}u&&d.inserted&&(this.state=h)}u||(s=new vt,this.state=i,n&&a&&(n.state=a))}return s}_appendPlaceholder(){return new vt}_appendEager(){return new vt}append(t,e,n){if(!hr(t))throw new Error("value should be string");const i=hr(n)?new ii(String(n)):n;e!=null&&e.tail&&(e._beforeTailState=this.state);let s;[t,s]=this.doPrepare(t,e);for(let a=0;a<t.length;++a){const u=this._appendChar(t[a],e,i);if(!u.rawInserted&&!this.doSkipInvalid(t[a],e,i))break;s.aggregate(u)}return(this.eager===!0||this.eager==="append")&&e!=null&&e.input&&t&&s.aggregate(this._appendEager()),i!=null&&(s.tailShift+=this.appendTail(i).tailShift),s}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),this._value=this.displayValue.slice(0,t)+this.displayValue.slice(e),new vt}withValueRefresh(t){if(this._refreshing||!this._initialized)return t();this._refreshing=!0;const e=this.rawInputValue,n=this.value,i=t();return this.rawInputValue=e,this.value&&this.value!==n&&n.indexOf(this.value)===0&&(this.append(n.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,i}runIsolated(t){if(this._isolated||!this._initialized)return t(this);this._isolated=!0;const e=this.state,n=t(this);return this.state=e,delete this._isolated,n}doSkipInvalid(t,e,n){return!!this.skipInvalid}doPrepare(t,e){return e===void 0&&(e={}),vt.normalize(this.prepare?this.prepare(t,this,e):t)}doPrepareChar(t,e){return e===void 0&&(e={}),vt.normalize(this.prepareChar?this.prepareChar(t,this,e):t)}doValidate(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}doCommit(){this.commit&&this.commit(this.value,this)}splice(t,e,n,i,s){n===void 0&&(n=""),i===void 0&&(i=J.NONE),s===void 0&&(s={input:!0});const a=t+e,u=this.extractTail(a),h=this.eager===!0||this.eager==="remove";let d;h&&(i=o8(i),d=this.extractInput(0,a,{raw:!0}));let f=t;const g=new vt;if(i!==J.NONE&&(f=this.nearestInputPos(t,e>1&&t!==0&&!h?J.NONE:i),g.tailShift=f-t),g.aggregate(this.remove(f)),h&&i!==J.NONE&&d===this.rawInputValue)if(i===J.FORCE_LEFT){let _;for(;d===this.rawInputValue&&(_=this.displayValue.length);)g.aggregate(new vt({tailShift:-1})).aggregate(this.remove(_-1))}else i===J.FORCE_RIGHT&&u.unshift();return g.aggregate(this.append(n,s,u))}maskEquals(t){return this.mask===t}optionsIsChanged(t){return!bl(this,t)}typedValueEquals(t){const e=this.typedValue;return t===e||ke.EMPTY_VALUES.includes(t)&&ke.EMPTY_VALUES.includes(e)||(this.format?this.format(t,this)===this.format(this.typedValue,this):!1)}pad(t){return new vt}}ke.DEFAULTS={skipInvalid:!0};ke.EMPTY_VALUES=[void 0,null,""];ut.Masked=ke;class Dr{constructor(t,e){t===void 0&&(t=[]),e===void 0&&(e=0),this.chunks=t,this.from=e}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=hr(t)?new ii(String(t)):t;const e=this.chunks[this.chunks.length-1],n=e&&(e.stop===t.stop||t.stop==null)&&t.from===e.from+e.toString().length;if(t instanceof ii)n?e.extend(t.toString()):this.chunks.push(t);else if(t instanceof Dr){if(t.stop==null){let i;for(;t.chunks.length&&t.chunks[0].stop==null;)i=t.chunks.shift(),i.from+=t.from,this.extend(i)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(t){if(!(t instanceof ut.MaskedPattern))return new ii(this.toString()).appendTo(t);const e=new vt;for(let n=0;n<this.chunks.length;++n){const i=this.chunks[n],s=t._mapPosToBlock(t.displayValue.length),a=i.stop;let u;if(a!=null&&(!s||s.index<=a)&&((i instanceof Dr||t._stops.indexOf(a)>=0)&&e.aggregate(t._appendPlaceholder(a)),u=i instanceof Dr&&t._blocks[a]),u){const h=u.appendTail(i);e.aggregate(h);const d=i.toString().slice(h.rawInserted.length);d&&e.aggregate(t.append(d,{tail:!0}))}else e.aggregate(t.append(i.toString(),{tail:!0}))}return e}get state(){return{chunks:this.chunks.map(t=>t.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(t){const{chunks:e,...n}=t;Object.assign(this,n),this.chunks=e.map(i=>{const s="chunks"in i?new Dr:new ii;return s.state=i,s})}unshift(t){if(!this.chunks.length||t!=null&&this.from>=t)return"";const e=t!=null?t-this.from:t;let n=0;for(;n<this.chunks.length;){const i=this.chunks[n],s=i.unshift(e);if(i.toString()){if(!s)break;++n}else this.chunks.splice(n,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let t=this.chunks.length-1;for(;0<=t;){const e=this.chunks[t],n=e.shift();if(e.toString()){if(!n)break;--t}else this.chunks.splice(t,1);if(n)return n}return""}}class c8{constructor(t,e){this.masked=t,this._log=[];const{offset:n,index:i}=t._mapPosToBlock(e)||(e<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=n,this.index=i,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(t){Object.assign(this,t)}pushState(){this._log.push(this.state)}popState(){const t=this._log.pop();return t&&(this.state=t),t}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((e=this.block)==null?void 0:e.displayValue.length)||0){var e;if(t())return this.ok=!0}return this.ok=!1}_pushRight(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,J.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,J.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,J.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,J.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,J.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,J.NONE),!0})}}class Bp{constructor(t){Object.assign(this,t),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new vt}nearestInputPos(t,e){e===void 0&&(e=J.NONE);const n=0,i=this._value.length;switch(e){case J.LEFT:case J.FORCE_LEFT:return n;case J.NONE:case J.RIGHT:case J.FORCE_RIGHT:default:return i}}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),this._isRawInput?e-t:0}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),n===void 0&&(n={}),n.raw&&this._isRawInput&&this._value.slice(t,e)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(t,e){if(e===void 0&&(e={}),this.isFilled)return new vt;const n=this.eager===!0||this.eager==="append",s=this.char===t&&(this.isUnmasking||e.input||e.raw)&&(!e.raw||!n)&&!e.tail,a=new vt({inserted:this.char,rawInserted:s?this.char:""});return this._value=this.char,this._isRawInput=s&&(e.raw||e.input),a}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const t=new vt;return this.isFilled||(this._value=t.inserted=this.char),t}extractTail(){return new ii("")}appendTail(t){return hr(t)&&(t=new ii(String(t))),t.appendTo(this)}append(t,e,n){const i=this._appendChar(t[0],e);return n!=null&&(i.tailShift+=this.appendTail(n).tailShift),i}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value,this._isRawInput=!!t._rawInputValue}pad(t){return this._appendPlaceholder()}}class Ll{constructor(t){const{parent:e,isOptional:n,placeholderChar:i,displayChar:s,lazy:a,eager:u,...h}=t;this.masked=Pi(h),Object.assign(this,{parent:e,isOptional:n,placeholderChar:i,displayChar:s,lazy:a,eager:u})}reset(){this.isFilled=!1,this.masked.reset()}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),t===0&&e>=1?(this.isFilled=!1,this.masked.remove(t,e)):new vt}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(t,e){if(e===void 0&&(e={}),this.isFilled)return new vt;const n=this.masked.state;let i=this.masked._appendChar(t,this.currentMaskFlags(e));return i.inserted&&this.doValidate(e)===!1&&(i=new vt,this.masked.state=n),!i.inserted&&!this.isOptional&&!this.lazy&&!e.input&&(i.inserted=this.placeholderChar),i.skip=!i.inserted&&!this.isOptional,this.isFilled=!!i.inserted,i}append(t,e,n){return this.masked.append(t,this.currentMaskFlags(e),n)}_appendPlaceholder(){return this.isFilled||this.isOptional?new vt:(this.isFilled=!0,new vt({inserted:this.placeholderChar}))}_appendEager(){return new vt}extractTail(t,e){return this.masked.extractTail(t,e)}appendTail(t){return this.masked.appendTail(t)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),this.masked.extractInput(t,e,n)}nearestInputPos(t,e){e===void 0&&(e=J.NONE);const n=0,i=this.value.length,s=Math.min(Math.max(t,n),i);switch(e){case J.LEFT:case J.FORCE_LEFT:return this.isComplete?s:n;case J.RIGHT:case J.FORCE_RIGHT:return this.isComplete?s:i;case J.NONE:default:return s}}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),this.value.slice(t,e).length}doValidate(t){return this.masked.doValidate(this.currentMaskFlags(t))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(t)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked,this.isFilled=t.isFilled}currentMaskFlags(t){var e;return{...t,_beforeTailState:(t==null||(e=t._beforeTailState)==null?void 0:e.masked)||(t==null?void 0:t._beforeTailState)}}pad(t){return new vt}}Ll.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class d8 extends ke{updateOptions(t){super.updateOptions(t)}_update(t){const e=t.mask;e&&(t.validate=n=>n.search(e)>=0),super._update(t)}}ut.MaskedRegExp=d8;class Fe extends ke{constructor(t){super({...Fe.DEFAULTS,...t,definitions:Object.assign({},Ll.DEFAULT_DEFINITIONS,t==null?void 0:t.definitions)})}updateOptions(t){super.updateOptions(t)}_update(t){t.definitions=Object.assign({},this.definitions,t.definitions),super._update(t),this._rebuildMask()}_rebuildMask(){const t=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const e=this.mask;if(!e||!t)return;let n=!1,i=!1;for(let s=0;s<e.length;++s){if(this.blocks){const d=e.slice(s),f=Object.keys(this.blocks).filter(_=>d.indexOf(_)===0);f.sort((_,m)=>m.length-_.length);const g=f[0];if(g){const{expose:_,repeat:m,...v}=zo(this.blocks[g]),x={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...v,repeat:m,parent:this},w=m!=null?new ut.RepeatBlock(x):Pi(x);w&&(this._blocks.push(w),_&&(this.exposeBlock=w),this._maskedBlocks[g]||(this._maskedBlocks[g]=[]),this._maskedBlocks[g].push(this._blocks.length-1)),s+=g.length-1;continue}}let a=e[s],u=a in t;if(a===Fe.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(a==="{"||a==="}"){n=!n;continue}if(a==="["||a==="]"){i=!i;continue}if(a===Fe.ESCAPE_CHAR){if(++s,a=e[s],!a)break;u=!1}const h=u?new Ll({isOptional:i,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...zo(t[a]),parent:this}):new Bp({char:a,eager:this.eager,isUnmasking:n});this._blocks.push(h)}}get state(){return{...super.state,_blocks:this._blocks.map(t=>t.state)}}set state(t){if(!t){this.reset();return}const{_blocks:e,...n}=t;this._blocks.forEach((i,s)=>i.state=e[s]),super.state=n}reset(){super.reset(),this._blocks.forEach(t=>t.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(t=>t.isComplete)}get isFilled(){return this._blocks.every(t=>t.isFilled)}get isFixed(){return this._blocks.every(t=>t.isFixed)}get isOptional(){return this._blocks.every(t=>t.isOptional)}doCommit(){this._blocks.forEach(t=>t.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((t,e)=>t+=e.unmaskedValue,"")}set unmaskedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=t,this.appendTail(e),this.doCommit()}else super.unmaskedValue=t}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((t,e)=>t+=e.value,"")}set value(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=t,this.appendTail(e),this.doCommit()}else super.value=t}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=t,this.appendTail(e),this.doCommit()}else super.typedValue=t}get displayValue(){return this._blocks.reduce((t,e)=>t+=e.displayValue,"")}appendTail(t){return super.appendTail(t).aggregate(this._appendPlaceholder())}_appendEager(){var t;const e=new vt;let n=(t=this._mapPosToBlock(this.displayValue.length))==null?void 0:t.index;if(n==null)return e;this._blocks[n].isFilled&&++n;for(let i=n;i<this._blocks.length;++i){const s=this._blocks[i]._appendEager();if(!s.inserted)break;e.aggregate(s)}return e}_appendCharRaw(t,e){e===void 0&&(e={});const n=this._mapPosToBlock(this.displayValue.length),i=new vt;if(!n)return i;for(let a=n.index,u;u=this._blocks[a];++a){var s;const h=u._appendChar(t,{...e,_beforeTailState:(s=e._beforeTailState)==null||(s=s._blocks)==null?void 0:s[a]});if(i.aggregate(h),h.consumed)break}return i}extractTail(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=new Dr;return t===e||this._forEachBlocksInRange(t,e,(i,s,a,u)=>{const h=i.extractTail(a,u);h.stop=this._findStopBefore(s),h.from=this._blockStartPos(s),h instanceof Dr&&(h.blockIndex=s),n.extend(h)}),n}extractInput(t,e,n){if(t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),n===void 0&&(n={}),t===e)return"";let i="";return this._forEachBlocksInRange(t,e,(s,a,u,h)=>{i+=s.extractInput(u,h,n)}),i}_findStopBefore(t){let e;for(let n=0;n<this._stops.length;++n){const i=this._stops[n];if(i<=t)e=i;else break}return e}_appendPlaceholder(t){const e=new vt;if(this.lazy&&t==null)return e;const n=this._mapPosToBlock(this.displayValue.length);if(!n)return e;const i=n.index,s=t??this._blocks.length;return this._blocks.slice(i,s).forEach(a=>{if(!a.lazy||t!=null){var u;e.aggregate(a._appendPlaceholder((u=a._blocks)==null?void 0:u.length))}}),e}_mapPosToBlock(t){let e="";for(let n=0;n<this._blocks.length;++n){const i=this._blocks[n],s=e.length;if(e+=i.displayValue,t<=e.length)return{index:n,offset:t-s}}}_blockStartPos(t){return this._blocks.slice(0,t).reduce((e,n)=>e+=n.displayValue.length,0)}_forEachBlocksInRange(t,e,n){e===void 0&&(e=this.displayValue.length);const i=this._mapPosToBlock(t);if(i){const s=this._mapPosToBlock(e),a=s&&i.index===s.index,u=i.offset,h=s&&a?s.offset:this._blocks[i.index].displayValue.length;if(n(this._blocks[i.index],i.index,u,h),s&&!a){for(let d=i.index+1;d<s.index;++d)n(this._blocks[d],d,0,this._blocks[d].displayValue.length);n(this._blocks[s.index],s.index,0,s.offset)}}}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=super.remove(t,e);return this._forEachBlocksInRange(t,e,(i,s,a,u)=>{n.aggregate(i.remove(a,u))}),n}nearestInputPos(t,e){if(e===void 0&&(e=J.NONE),!this._blocks.length)return 0;const n=new c8(this,t);if(e===J.NONE)return n.pushRightBeforeInput()||(n.popState(),n.pushLeftBeforeInput())?n.pos:this.displayValue.length;if(e===J.LEFT||e===J.FORCE_LEFT){if(e===J.LEFT){if(n.pushRightBeforeFilled(),n.ok&&n.pos===t)return t;n.popState()}if(n.pushLeftBeforeInput(),n.pushLeftBeforeRequired(),n.pushLeftBeforeFilled(),e===J.LEFT){if(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.ok&&n.pos<=t||(n.popState(),n.ok&&n.pos<=t))return n.pos;n.popState()}return n.ok?n.pos:e===J.FORCE_LEFT?0:(n.popState(),n.ok||(n.popState(),n.ok)?n.pos:0)}return e===J.RIGHT||e===J.FORCE_RIGHT?(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.pushRightBeforeFilled()?n.pos:e===J.FORCE_RIGHT?this.displayValue.length:(n.popState(),n.ok||(n.popState(),n.ok)?n.pos:this.nearestInputPos(t,J.LEFT))):t}totalInputPositions(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);let n=0;return this._forEachBlocksInRange(t,e,(i,s,a,u)=>{n+=i.totalInputPositions(a,u)}),n}maskedBlock(t){return this.maskedBlocks(t)[0]}maskedBlocks(t){const e=this._maskedBlocks[t];return e?e.map(n=>this._blocks[n]):[]}pad(t){const e=new vt;return this._forEachBlocksInRange(0,this.displayValue.length,n=>e.aggregate(n.pad(t))),e}}Fe.DEFAULTS={...ke.DEFAULTS,lazy:!0,placeholderChar:"_"};Fe.STOP_CHAR="`";Fe.ESCAPE_CHAR="\\";Fe.InputDefinition=Ll;Fe.FixedDefinition=Bp;ut.MaskedPattern=Fe;class ol extends Fe{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){const{to:e=this.to||0,from:n=this.from||0,maxLength:i=this.maxLength||0,autofix:s=this.autofix,...a}=t;this.to=e,this.from=n,this.maxLength=Math.max(String(e).length,i),this.autofix=s;const u=String(this.from).padStart(this.maxLength,"0"),h=String(this.to).padStart(this.maxLength,"0");let d=0;for(;d<h.length&&h[d]===u[d];)++d;a.mask=h.slice(0,d).replace(/0/g,"\\0")+"0".repeat(this.maxLength-d),super._update(a)}get isComplete(){return super.isComplete&&!!this.value}boundaries(t){let e="",n="";const[,i,s]=t.match(/^(\D*)(\d*)(\D*)/)||[];return s&&(e="0".repeat(i.length)+s,n="9".repeat(i.length)+s),e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9"),[e,n]}doPrepareChar(t,e){e===void 0&&(e={});let n;return[t,n]=super.doPrepareChar(t.replace(/\D/g,""),e),t||(n.skip=!this.isComplete),[t,n]}_appendCharRaw(t,e){if(e===void 0&&(e={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(t,e);const n=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),[s,a]=this.boundaries(this.value+t);return Number(a)<this.from?super._appendCharRaw(n[this.value.length],e):Number(s)>this.to?!e.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(n[this.value.length],e).aggregate(this._appendCharRaw(t,e)):super._appendCharRaw(i[this.value.length],e):super._appendCharRaw(t,e)}doValidate(t){const e=this.value;if(e.search(/[^0]/)===-1&&e.length<=this._matchFrom)return!0;const[i,s]=this.boundaries(e);return this.from<=Number(s)&&Number(i)<=this.to&&super.doValidate(t)}pad(t){const e=new vt;if(this.value.length===this.maxLength)return e;const n=this.value,i=this.maxLength-this.value.length;if(i){this.reset();for(let s=0;s<i;++s)e.aggregate(super._appendCharRaw("0",t));n.split("").forEach(s=>this._appendCharRaw(s))}return e}}ut.MaskedRange=ol;const f8="d{.}`m{.}`Y";class Ri extends Fe{static extractPatternOptions(t){const{mask:e,pattern:n,...i}=t;return{...i,mask:hr(e)?e:n}}constructor(t){super(Ri.extractPatternOptions({...Ri.DEFAULTS,...t}))}updateOptions(t){super.updateOptions(t)}_update(t){const{mask:e,pattern:n,blocks:i,...s}={...Ri.DEFAULTS,...t},a=Object.assign({},Ri.GET_DEFAULT_BLOCKS());t.min&&(a.Y.from=t.min.getFullYear()),t.max&&(a.Y.to=t.max.getFullYear()),t.min&&t.max&&a.Y.from===a.Y.to&&(a.m.from=t.min.getMonth()+1,a.m.to=t.max.getMonth()+1,a.m.from===a.m.to&&(a.d.from=t.min.getDate(),a.d.to=t.max.getDate())),Object.assign(a,this.blocks,i),super._update({...s,mask:hr(e)?e:n,blocks:a})}doValidate(t){const e=this.date;return super.doValidate(t)&&(!this.isComplete||this.isDateExist(this.value)&&e!=null&&(this.min==null||this.min<=e)&&(this.max==null||e<=this.max))}isDateExist(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}get date(){return this.typedValue}set date(t){this.typedValue=t}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(t){super.typedValue=t}maskEquals(t){return t===Date||super.maskEquals(t)}optionsIsChanged(t){return super.optionsIsChanged(Ri.extractPatternOptions(t))}}Ri.GET_DEFAULT_BLOCKS=()=>({d:{mask:ol,from:1,to:31,maxLength:2},m:{mask:ol,from:1,to:12,maxLength:2},Y:{mask:ol,from:1900,to:9999}});Ri.DEFAULTS={...Fe.DEFAULTS,mask:Date,pattern:f8,format:(r,t)=>{if(!r)return"";const e=String(r.getDate()).padStart(2,"0"),n=String(r.getMonth()+1).padStart(2,"0"),i=r.getFullYear();return[e,n,i].join(".")},parse:(r,t)=>{const[e,n,i]=r.split(".").map(Number);return new Date(i,n-1,e)}};ut.MaskedDate=Ri;class nu extends ke{constructor(t){super({...nu.DEFAULTS,...t}),this.currentMask=void 0}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),"mask"in t&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(t.mask)?t.mask.map(e=>{const{expose:n,...i}=zo(e),s=Pi({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...i});return n&&(this.exposeMask=s),s}):[])}_appendCharRaw(t,e){e===void 0&&(e={});const n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,this.currentMaskFlags(e))),n}_applyDispatch(t,e,n){t===void 0&&(t=""),e===void 0&&(e={}),n===void 0&&(n="");const i=e.tail&&e._beforeTailState!=null?e._beforeTailState._value:this.value,s=this.rawInputValue,a=e.tail&&e._beforeTailState!=null?e._beforeTailState._rawInputValue:s,u=s.slice(a.length),h=this.currentMask,d=new vt,f=h==null?void 0:h.state;return this.currentMask=this.doDispatch(t,{...e},n),this.currentMask&&(this.currentMask!==h?(this.currentMask.reset(),a&&(this.currentMask.append(a,{raw:!0}),d.tailShift=this.currentMask.value.length-i.length),u&&(d.tailShift+=this.currentMask.append(u,{raw:!0,tail:!0}).tailShift)):f&&(this.currentMask.state=f)),d}_appendPlaceholder(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}_appendEager(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}appendTail(t){const e=new vt;return t&&e.aggregate(this._applyDispatch("",{},t)),e.aggregate(this.currentMask?this.currentMask.appendTail(t):super.appendTail(t))}currentMaskFlags(t){var e,n;return{...t,_beforeTailState:((e=t._beforeTailState)==null?void 0:e.currentMaskRef)===this.currentMask&&((n=t._beforeTailState)==null?void 0:n.currentMask)||t._beforeTailState}}doDispatch(t,e,n){return e===void 0&&(e={}),n===void 0&&(n=""),this.dispatch(t,this,e,n)}doValidate(t){return super.doValidate(t)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(t)))}doPrepare(t,e){e===void 0&&(e={});let[n,i]=super.doPrepare(t,e);if(this.currentMask){let s;[n,s]=super.doPrepare(n,this.currentMaskFlags(e)),i=i.aggregate(s)}return[n,i]}doPrepareChar(t,e){e===void 0&&(e={});let[n,i]=super.doPrepareChar(t,e);if(this.currentMask){let s;[n,s]=super.doPrepareChar(n,this.currentMaskFlags(e)),i=i.aggregate(s)}return[n,i]}reset(){var t;(t=this.currentMask)==null||t.reset(),this.compiledMasks.forEach(e=>e.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(t){this.exposeMask?(this.exposeMask.value=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=t}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(t){this.exposeMask?(this.exposeMask.unmaskedValue=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=t}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(t){if(this.exposeMask){this.exposeMask.typedValue=t,this.currentMask=this.exposeMask,this._applyDispatch();return}let e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var t;return!!((t=this.currentMask)!=null&&t.isComplete)}get isFilled(){var t;return!!((t=this.currentMask)!=null&&t.isFilled)}remove(t,e){const n=new vt;return this.currentMask&&n.aggregate(this.currentMask.remove(t,e)).aggregate(this._applyDispatch()),n}get state(){var t;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(e=>e.state),currentMaskRef:this.currentMask,currentMask:(t=this.currentMask)==null?void 0:t.state}}set state(t){const{compiledMasks:e,currentMaskRef:n,currentMask:i,...s}=t;e&&this.compiledMasks.forEach((a,u)=>a.state=e[u]),n!=null&&(this.currentMask=n,this.currentMask.state=i),super.state=s}extractInput(t,e,n){return this.currentMask?this.currentMask.extractInput(t,e,n):""}extractTail(t,e){return this.currentMask?this.currentMask.extractTail(t,e):super.extractTail(t,e)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(t,e){return this.currentMask?this.currentMask.nearestInputPos(t,e):super.nearestInputPos(t,e)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(t){this._overwrite=t}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(t){this._eager=t}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(t){this._skipInvalid=t}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(t){this._autofix=t}maskEquals(t){return Array.isArray(t)?this.compiledMasks.every((e,n)=>{if(!t[n])return;const{mask:i,...s}=t[n];return bl(e,s)&&e.maskEquals(i)}):super.maskEquals(t)}typedValueEquals(t){var e;return!!((e=this.currentMask)!=null&&e.typedValueEquals(t))}}nu.DEFAULTS={...ke.DEFAULTS,dispatch:(r,t,e,n)=>{if(!t.compiledMasks.length)return;const i=t.rawInputValue,s=t.compiledMasks.map((a,u)=>{const h=t.currentMask===a,d=h?a.displayValue.length:a.nearestInputPos(a.displayValue.length,J.FORCE_LEFT);return a.rawInputValue!==i?(a.reset(),a.append(i,{raw:!0})):h||a.remove(d),a.append(r,t.currentMaskFlags(e)),a.appendTail(n),{index:u,weight:a.rawInputValue.length,totalInputPositions:a.totalInputPositions(0,Math.max(d,a.nearestInputPos(a.displayValue.length,J.FORCE_LEFT)))}});return s.sort((a,u)=>u.weight-a.weight||u.totalInputPositions-a.totalInputPositions),t.compiledMasks[s[0].index]}};ut.MaskedDynamic=nu;class iu extends Fe{constructor(t){super({...iu.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){const{enum:e,...n}=t;if(e){const i=e.map(u=>u.length),s=Math.min(...i),a=Math.max(...i)-s;n.mask="*".repeat(s),a&&(n.mask+="["+"*".repeat(a)+"]"),this.enum=e}super._update(n)}_appendCharRaw(t,e){e===void 0&&(e={});const n=Math.min(this.nearestInputPos(0,J.FORCE_RIGHT),this.value.length),i=this.enum.filter(s=>this.matchValue(s,this.unmaskedValue+t,n));if(i.length){i.length===1&&this._forEachBlocksInRange(0,this.value.length,(a,u)=>{const h=i[0][u];u>=this.value.length||h===a.value||(a.reset(),a._appendChar(h,e))});const s=super._appendCharRaw(i[0][this.value.length],e);return i.length===1&&i[0].slice(this.unmaskedValue.length).split("").forEach(a=>s.aggregate(super._appendCharRaw(a))),s}return new vt({skip:!this.isComplete})}extractTail(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),new ii("",t)}remove(t,e){if(t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),t===e)return new vt;const n=Math.min(super.nearestInputPos(0,J.FORCE_RIGHT),this.value.length);let i;for(i=t;i>=0&&!(this.enum.filter(u=>this.matchValue(u,this.value.slice(n,i),n)).length>1);--i);const s=super.remove(i,e);return s.tailShift+=i-t,s}get isComplete(){return this.enum.indexOf(this.value)>=0}}iu.DEFAULTS={...Fe.DEFAULTS,matchValue:(r,t,e)=>r.indexOf(t,e)===e};ut.MaskedEnum=iu;class g8 extends ke{updateOptions(t){super.updateOptions(t)}_update(t){super._update({...t,validate:t.mask})}}ut.MaskedFunction=g8;var Np;class fn extends ke{constructor(t){super({...fn.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),this._updateRegExps()}_updateRegExps(){const t="^"+(this.allowNegative?"[+|\\-]?":""),e="\\d*",n=(this.scale?"("+Dh(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(t+e+n),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Dh).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Dh(this.thousandsSeparator),"g")}_removeThousandsSeparators(t){return t.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(t){const e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}doPrepareChar(t,e){e===void 0&&(e={});const[n,i]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(e.input&&e.raw||!e.input&&!e.raw)?t.replace(this._mapToRadixRegExp,this.radix):t),e);return t&&!n&&(i.skip=!0),n&&!this.allowPositive&&!this.value&&n!=="-"&&i.aggregate(this._appendChar("-")),[n,i]}_separatorsCount(t,e){e===void 0&&(e=!1);let n=0;for(let i=0;i<t;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++n,e&&(t+=this.thousandsSeparator.length));return n}_separatorsCountFromSlice(t){return t===void 0&&(t=this._value),this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),[t,e]=this._adjustRangeWithSeparators(t,e),this._removeThousandsSeparators(super.extractInput(t,e,n))}_appendCharRaw(t,e){e===void 0&&(e={});const n=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(n);this._value=this._removeThousandsSeparators(this.value);const s=this._value;this._value+=t;const a=this.number;let u=!isNaN(a),h=!1;if(u){let _;this.min!=null&&this.min<0&&this.number<this.min&&(_=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(_=this.max),_!=null&&(this.autofix?(this._value=this.format(_,this).replace(fn.UNMASKED_RADIX,this.radix),h||(h=s===this._value&&!e.tail)):u=!1),u&&(u=!!this._value.match(this._numberRegExp))}let d;u?d=new vt({inserted:this._value.slice(s.length),rawInserted:h?"":t,skip:h}):(this._value=s,d=new vt),this._value=this._insertThousandsSeparators(this._value);const f=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,g=this._separatorsCountFromSlice(f);return d.tailShift+=(g-i)*this.thousandsSeparator.length,d}_findSeparatorAround(t){if(this.thousandsSeparator){const e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}_adjustRangeWithSeparators(t,e){const n=this._findSeparatorAround(t);n>=0&&(t=n);const i=this._findSeparatorAround(e);return i>=0&&(e=i+this.thousandsSeparator.length),[t,e]}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),[t,e]=this._adjustRangeWithSeparators(t,e);const n=this.value.slice(0,t),i=this.value.slice(e),s=this._separatorsCount(n.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(n+i));const a=this._separatorsCountFromSlice(n);return new vt({tailShift:(a-s)*this.thousandsSeparator.length})}nearestInputPos(t,e){if(!this.thousandsSeparator)return t;switch(e){case J.NONE:case J.LEFT:case J.FORCE_LEFT:{const n=this._findSeparatorAround(t-1);if(n>=0){const i=n+this.thousandsSeparator.length;if(t<i||this.value.length<=i||e===J.FORCE_LEFT)return n}break}case J.RIGHT:case J.FORCE_RIGHT:{const n=this._findSeparatorAround(t);if(n>=0)return n+this.thousandsSeparator.length}}return t}doCommit(){if(this.value){const t=this.number;let e=t;this.min!=null&&(e=Math.max(e,this.min)),this.max!=null&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=this.format(e,this));let n=this.value;this.normalizeZeros&&(n=this._normalizeZeros(n)),this.padFractionalZeros&&this.scale>0&&(n=this._padFractionalZeros(n)),this._value=n}super.doCommit()}_normalizeZeros(t){const e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(n,i,s,a)=>i+a),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}_padFractionalZeros(t){if(!t)return t;const e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}doSkipInvalid(t,e,n){e===void 0&&(e={});const i=this.scale===0&&t!==this.thousandsSeparator&&(t===this.radix||t===fn.UNMASKED_RADIX||this.mapToRadix.includes(t));return super.doSkipInvalid(t,e,n)&&!i}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,fn.UNMASKED_RADIX)}set unmaskedValue(t){super.unmaskedValue=t}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(t){this.rawInputValue=this.format(t,this).replace(fn.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(t){this.typedValue=t}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(t){return(super.typedValueEquals(t)||fn.EMPTY_VALUES.includes(t)&&fn.EMPTY_VALUES.includes(this.typedValue))&&!(t===0&&this.value==="")}}Np=fn;fn.UNMASKED_RADIX=".";fn.EMPTY_VALUES=[...ke.EMPTY_VALUES,0];fn.DEFAULTS={...ke.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Np.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:r=>r.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};ut.MaskedNumber=fn;const dc={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Gp(r,t,e){t===void 0&&(t=dc.MASKED),e===void 0&&(e=dc.MASKED);const n=Pi(r);return i=>n.runIsolated(s=>(s[t]=i,s[e]))}function p8(r,t,e,n){return Gp(t,e,n)(r)}ut.PIPE_TYPE=dc;ut.createPipe=Gp;ut.pipe=p8;class _8 extends Fe{get repeatFrom(){var t;return(t=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?t:0}get repeatTo(){var t;return(t=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?t:1/0}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){var e,n,i;const{repeat:s,...a}=zo(t);this._blockOpts=Object.assign({},this._blockOpts,a);const u=Pi(this._blockOpts);this.repeat=(e=(n=s??u.repeat)!=null?n:this.repeat)!=null?e:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((i=this._blocks)==null?void 0:i.length)||0,this.repeatFrom)),blocks:{m:u},eager:u.eager,overwrite:u.overwrite,skipInvalid:u.skipInvalid,lazy:u.lazy,placeholderChar:u.placeholderChar,displayChar:u.displayChar})}_allocateBlock(t){if(t<this._blocks.length)return this._blocks[t];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(Pi(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(t,e){e===void 0&&(e={});const n=new vt;for(let h=(i=(s=this._mapPosToBlock(this.displayValue.length))==null?void 0:s.index)!=null?i:Math.max(this._blocks.length-1,0),d,f;d=(a=this._blocks[h])!=null?a:f=!f&&this._allocateBlock(h);++h){var i,s,a,u;const g=d._appendChar(t,{...e,_beforeTailState:(u=e._beforeTailState)==null||(u=u._blocks)==null?void 0:u[h]});if(g.skip&&f){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(n.aggregate(g),g.consumed)break}return n}_trimEmptyTail(t,e){var n,i;t===void 0&&(t=0);const s=Math.max(((n=this._mapPosToBlock(t))==null?void 0:n.index)||0,this.repeatFrom,0);let a;e!=null&&(a=(i=this._mapPosToBlock(e))==null?void 0:i.index),a==null&&(a=this._blocks.length-1);let u=0;for(let h=a;s<=h&&!this._blocks[h].unmaskedValue;--h,++u);u&&(this._blocks.splice(a-u+1,u),this.mask=this.mask.slice(u))}reset(){super.reset(),this._trimEmptyTail()}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=super.remove(t,e);return this._trimEmptyTail(t,e),n}totalInputPositions(t,e){return t===void 0&&(t=0),e==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(t,e)}get state(){return super.state}set state(t){this._blocks.length=t._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=t}}ut.RepeatBlock=_8;try{globalThis.IMask=ut}catch{}const m8=document.getElementById("outage-button"),ad=document.getElementById("outage-dialog"),Wo=new bootstrap.Modal("#outage-modal");m8.onclick=()=>{Wo.show()};const y8=`<div class="modal-content">
        <div class="modal-header d-flex justify-content-center align-items-center">
          <svg width="71" height="67" viewBox="0 0 71 67" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M63.4953 16.4089H54.4333V7.43324C54.4308 5.46259 53.6393 3.57335 52.2325 2.17989C50.8256 0.786421 48.9182 0.00248116 46.9286 0H7.50473C5.51513 0.00248116 3.60774 0.786421 2.20088 2.17989C0.794017 3.57335 0.00254139 5.46259 3.6382e-05 7.43324V46.1442C-0.0036216 47.0416 0.268641 47.9188 0.780609 48.6591C1.29258 49.3994 2.01998 49.9678 2.86607 50.2887C3.38614 50.4882 3.93898 50.5907 4.4967 50.5911C5.1213 50.5916 5.73903 50.4621 6.30983 50.2109C6.88063 49.9597 7.39175 49.5925 7.81003 49.133L16.33 39.8503H16.5667V48.8259C16.5692 50.7966 17.3607 52.6858 18.7675 54.0793C20.1744 55.4728 22.0818 56.2567 24.0714 56.2592H54.67L63.19 65.542C63.6083 66.0013 64.1195 66.3684 64.6902 66.6196C65.261 66.8708 65.8787 67.0004 66.5033 67C67.061 66.9994 67.6138 66.8969 68.1339 66.6976C68.9804 66.3773 69.7082 65.8091 70.2202 65.0686C70.7323 64.3281 71.0043 63.4507 70.9999 62.5532V23.8422C70.9974 21.8715 70.206 19.9823 68.7991 18.5888C67.3923 17.1953 65.4849 16.4114 63.4953 16.4089ZM15.2768 35.162C14.9471 35.1619 14.621 35.23 14.3194 35.362C14.0178 35.494 13.7474 35.687 13.5255 35.9285L4.73336 45.509V7.43324C4.73399 6.70542 5.02617 6.00759 5.54577 5.49294C6.06536 4.97829 6.76991 4.68889 7.50473 4.68827H46.9262C47.6615 4.68826 48.3666 4.97739 48.8867 5.49211C49.4068 6.00682 49.6993 6.70502 49.7 7.43324V32.4147C49.6993 33.1425 49.4072 33.8403 48.8876 34.355C48.368 34.8696 47.6634 35.159 46.9286 35.1596H15.2745L15.2768 35.162ZM66.2666 61.9179L57.4745 52.3374C57.2526 52.0959 56.9821 51.9029 56.6806 51.7709C56.379 51.6389 56.0529 51.5708 55.7231 51.5709H24.0714C23.3366 51.5703 22.632 51.2809 22.1124 50.7663C21.5928 50.2516 21.3006 49.5538 21.3 48.8259V39.8503H46.9286C48.9182 39.8478 50.8256 39.0638 52.2325 37.6704C53.6393 36.2769 54.4308 34.3877 54.4333 32.417V21.0972H63.4953C64.2301 21.0978 64.9346 21.3872 65.4542 21.9019C65.9738 22.4165 66.266 23.1143 66.2666 23.8422V61.9179Z"
              fill="#0152A3" />
          </svg>
          <div class="modal-header-text">Kesinti Bildirimi</div>
            <svg id="success-close" class="success-close" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.147 3.174C20.3784 3.17522 23.5093 4.29675 26.0065 6.34753C28.5037 8.3983 30.2126 11.2515 30.8421 14.4209C31.4716 17.5903 30.9828 20.88 29.4588 23.7294C27.9349 26.5789 25.4702 28.8118 22.4845 30.0478C19.4989 31.2838 16.1771 31.4464 13.085 30.5079C9.99298 29.5695 7.32193 27.588 5.52697 24.901C3.732 22.214 2.92417 18.9879 3.24108 15.7721C3.558 12.5563 4.98007 9.54988 7.26501 7.265C8.5598 5.96349 10.0999 4.93176 11.7962 4.22953C13.4924 3.5273 15.3111 3.16854 17.147 3.174ZM17.147 1C13.9534 1 10.8316 1.94701 8.17621 3.72126C5.52085 5.49552 3.45125 8.01733 2.22912 10.9678C1.007 13.9183 0.687232 17.1649 1.31027 20.2971C1.9333 23.4293 3.47116 26.3065 5.72935 28.5647C7.98755 30.8229 10.8647 32.3607 13.9969 32.9837C17.1291 33.6068 20.3757 33.287 23.3262 32.0649C26.2767 30.8428 28.7985 28.7732 30.5727 26.1178C32.347 23.4624 33.294 20.3406 33.294 17.147C33.2943 15.0265 32.8768 12.9267 32.0654 10.9675C31.2541 9.00834 30.0647 7.2282 28.5652 5.72876C27.0658 4.22932 25.2857 3.03995 23.3265 2.22858C21.3673 1.41721 19.2675 0.999737 17.147 1Z" fill="#6D717A" stroke="white"/>
              <path d="M23.2337 21.4003L18.9747 17.1413L23.2337 12.8823C23.4615 12.6371 23.5853 12.3131 23.5789 11.9785C23.5726 11.6439 23.4366 11.3248 23.1997 11.0884C22.9628 10.852 22.6434 10.7167 22.3088 10.7111C21.9742 10.7055 21.6504 10.83 21.4057 11.0583L17.1467 15.3173L12.8877 11.0583C12.6428 10.8303 12.3189 10.7062 11.9843 10.7121C11.6496 10.7181 11.3304 10.8537 11.0937 11.0903C10.8571 11.327 10.7215 11.6462 10.7155 11.9809C10.7095 12.3155 10.8337 12.6394 11.0617 12.8843L15.3207 17.1433L11.0627 21.4003C10.9375 21.5172 10.8377 21.6585 10.7695 21.8156C10.7012 21.9726 10.666 22.1421 10.666 22.3133C10.666 22.4846 10.7012 22.654 10.7695 22.811C10.8377 22.9681 10.9375 23.1095 11.0627 23.2263C11.182 23.3472 11.3242 23.4432 11.4809 23.5087C11.6377 23.5742 11.8058 23.6079 11.9757 23.6079C12.1456 23.6079 12.3137 23.5742 12.4705 23.5087C12.6272 23.4432 12.7694 23.3472 12.8887 23.2263L17.1477 18.9673L21.4057 23.2293C21.649 23.4693 21.977 23.6039 22.3187 23.6039C22.6604 23.6039 22.9884 23.4693 23.2317 23.2293C23.3532 23.1101 23.4497 22.9678 23.5156 22.8109C23.5816 22.6539 23.6156 22.4855 23.6158 22.3152C23.616 22.145 23.5823 21.9764 23.5167 21.8194C23.4511 21.6623 23.3549 21.5198 23.2337 21.4003Z" fill="#6D717A" stroke="white"/>
            </svg>
        </div>
        <div class="modal-body">
          <form id="firstForm" class="d-flex flex-column align-items-center gap-4 gap-md-5">
            <div class="d-flex flex-column w-100">
              <div class="section-header">Kesinti Tipini Seiniz</div>
              <div class="d-flex justify-content-between gap-2 pe-1">
                <label class="container">
                  <input type="radio" name="outagetype" value="5" required>
                  <span class="checkmark">
                    <img class="checkmark-icon-active" width="72" height="72" src="/radio-icons/home  2.png" alt="Mahalle Icon">
                    <img class="checkmark-icon-passive" width="72" height="72" src="/radio-icons/home  3.png" alt="Mahalle Icon">
                    <div class="radio-label">Binada</div>
                    <div class="radio-label">Kesinti</div>
                  </span>
                </label>
                <label class="container">
                  <input type="radio" name="outagetype" value="3">
                  <span class="checkmark">
                    <img class="checkmark-icon-active" width="72" height="72" src="/radio-icons/street  2.png" alt="Mahalle Icon">
                    <img class="checkmark-icon-passive" width="72" height="72" src="/radio-icons/street  3.png" alt="Mahalle Icon">
                    <div class="radio-label">Sokakta</div>
                    <div class="radio-label">Kesinti</div>
                  </span>
                </label>
                <label class="container">
                  <input type="radio" name="outagetype" value="4">
                  <span class="checkmark">
                    <img class="checkmark-icon-active" width="72" height="72" src="/radio-icons/city  2.png" alt="Mahalle Icon">
                    <img class="checkmark-icon-passive"" width="72" height="72" src="/radio-icons/city  3.png" alt="Mahalle Icon">
                    <div class="radio-label">Mahallede</div>
                    <div class="radio-label">Kesinti</div>
                  </span>
                </label>
              </div>
            </div>
            <div class="d-flex flex-column w-100">
              <div class="section-header">Kiisel Bilgiler</div>
             <div class="custom-input-group" style="position: relative;">
  <input minlength="10" maxlength="10" id="tesisat" type="text" placeholder="Tesisat Numaranz" required>
  <label>Tesisat Numaranz</label>
  <span style="position: absolute; bottom: -20px; right: 0; font-size: 10px; color: red;">
    Faturanzn Sa st Kesinde
  </span>
</div>

              <div class="custom-input-group">
                <input id="name" type="text" placeholder="Adnz Soyadnz" required >
                <label>Adnz Soyadnz</label>
              </div>
              <div class="custom-input-group">
                <input id="tc" minlength="11"  maxlength="11" type="text" placeholder="TC Kimlik No">
                <label>TC Kimlik No</label>
              </div>
              <div class="custom-input-group">
                <input type="email"  id="email" placeholder="E-Posta Adresiniz">
                <label>E-Posta Adresiniz</label>
              </div>
              <div class="custom-input-group">
                <input id="tel" type="text" placeholder="Telefon Numaranz"  required>
                <label>Telefon Numaranz </label>
              </div>
            </div>
            <button>
              <div class="button-text">Adres Bilgisi Girin</div>
            </button>
          </form>
        </div>
      </div>`;let Zt={altKategori:"",hizmetno:"",tckn:"",telefon:"",email:"",adSoyad:"",ilcode:"",ilcecode:"",koycode:"",mahallecode:"",sokakcode:"",binano:"",ickapino:"",aciklama:""},Vp,zp,Wp,Ml="";const Ps=()=>{ad.innerHTML=y8,document.getElementById("success-close").onclick=()=>{Wo.hide(),Zt={altKategori:"",hizmetno:"",tckn:"",telefon:"",email:"",adSoyad:"",ilcode:"",ilcecode:"",koycode:"",mahallecode:"",sokakcode:"",binano:"",ickapino:"",aciklama:""},Ps()};const r=ut(document.getElementById("tel"),{mask:"+{9\\0}(000)000 00 00"});r.value=Zt.telefon||"";const t=ut(document.getElementById("tesisat"),{mask:"0000000000"});t.value=Zt.hizmetno||"";const e=ut(document.getElementById("tc"),{mask:"00000000000"});e.value=Zt.tckn||"";const n=document.getElementById("email");n.value=Zt.email;const i=document.getElementById("name");i.oninput=d=>{const f=/[^a-zA-Z\s]+/;i.value=i.value.replace(f,"")},i.value=Zt.adSoyad;const s=d=>d.replace(/\b\w/g,f=>f.toUpperCase()),a=document.getElementById("name");a.oninput=d=>{a.value=s(a.value)};const u=document.querySelector(`input[value="${Zt.altKategori}"]`);u&&(u.checked=!0);const h=document.getElementById("firstForm");h.onsubmit=d=>{d.preventDefault();const f=document.querySelector('input[name="outagetype"]:checked');return Zt.altKategori=f.value,Zt.email=n.value,Zt.telefon=r.unmaskedValue.substring(2),Zt.hizmetno=t.unmaskedValue,Zt.tckn=e.unmaskedValue,Zt.adSoyad=i.value,v8(),!1}};let fc=null;const C8=`
      <div class="modal-content">
        <div class="modal-header d-flex justify-content-center align-items-center">
          <svg width="71" height="67" viewBox="0 0 71 67" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M63.4953 16.4089H54.4333V7.43324C54.4308 5.46259 53.6393 3.57335 52.2325 2.17989C50.8256 0.786421 48.9182 0.00248116 46.9286 0H7.50473C5.51513 0.00248116 3.60774 0.786421 2.20088 2.17989C0.794017 3.57335 0.00254139 5.46259 3.6382e-05 7.43324V46.1442C-0.0036216 47.0416 0.268641 47.9188 0.780609 48.6591C1.29258 49.3994 2.01998 49.9678 2.86607 50.2887C3.38614 50.4882 3.93898 50.5907 4.4967 50.5911C5.1213 50.5916 5.73903 50.4621 6.30983 50.2109C6.88063 49.9597 7.39175 49.5925 7.81003 49.133L16.33 39.8503H16.5667V48.8259C16.5692 50.7966 17.3607 52.6858 18.7675 54.0793C20.1744 55.4728 22.0818 56.2567 24.0714 56.2592H54.67L63.19 65.542C63.6083 66.0013 64.1195 66.3684 64.6902 66.6196C65.261 66.8708 65.8787 67.0004 66.5033 67C67.061 66.9994 67.6138 66.8969 68.1339 66.6976C68.9804 66.3773 69.7082 65.8091 70.2202 65.0686C70.7323 64.3281 71.0043 63.4507 70.9999 62.5532V23.8422C70.9974 21.8715 70.206 19.9823 68.7991 18.5888C67.3923 17.1953 65.4849 16.4114 63.4953 16.4089ZM15.2768 35.162C14.9471 35.1619 14.621 35.23 14.3194 35.362C14.0178 35.494 13.7474 35.687 13.5255 35.9285L4.73336 45.509V7.43324C4.73399 6.70542 5.02617 6.00759 5.54577 5.49294C6.06536 4.97829 6.76991 4.68889 7.50473 4.68827H46.9262C47.6615 4.68826 48.3666 4.97739 48.8867 5.49211C49.4068 6.00682 49.6993 6.70502 49.7 7.43324V32.4147C49.6993 33.1425 49.4072 33.8403 48.8876 34.355C48.368 34.8696 47.6634 35.159 46.9286 35.1596H15.2745L15.2768 35.162ZM66.2666 61.9179L57.4745 52.3374C57.2526 52.0959 56.9821 51.9029 56.6806 51.7709C56.379 51.6389 56.0529 51.5708 55.7231 51.5709H24.0714C23.3366 51.5703 22.632 51.2809 22.1124 50.7663C21.5928 50.2516 21.3006 49.5538 21.3 48.8259V39.8503H46.9286C48.9182 39.8478 50.8256 39.0638 52.2325 37.6704C53.6393 36.2769 54.4308 34.3877 54.4333 32.417V21.0972H63.4953C64.2301 21.0978 64.9346 21.3872 65.4542 21.9019C65.9738 22.4165 66.266 23.1143 66.2666 23.8422V61.9179Z"
              fill="#0152A3" />
          </svg>
          <div class="modal-header-text">Kesinti Bildirimi</div>
            <svg id="success-close" class="success-close" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.147 3.174C20.3784 3.17522 23.5093 4.29675 26.0065 6.34753C28.5037 8.3983 30.2126 11.2515 30.8421 14.4209C31.4716 17.5903 30.9828 20.88 29.4588 23.7294C27.9349 26.5789 25.4702 28.8118 22.4845 30.0478C19.4989 31.2838 16.1771 31.4464 13.085 30.5079C9.99298 29.5695 7.32193 27.588 5.52697 24.901C3.732 22.214 2.92417 18.9879 3.24108 15.7721C3.558 12.5563 4.98007 9.54988 7.26501 7.265C8.5598 5.96349 10.0999 4.93176 11.7962 4.22953C13.4924 3.5273 15.3111 3.16854 17.147 3.174ZM17.147 1C13.9534 1 10.8316 1.94701 8.17621 3.72126C5.52085 5.49552 3.45125 8.01733 2.22912 10.9678C1.007 13.9183 0.687232 17.1649 1.31027 20.2971C1.9333 23.4293 3.47116 26.3065 5.72935 28.5647C7.98755 30.8229 10.8647 32.3607 13.9969 32.9837C17.1291 33.6068 20.3757 33.287 23.3262 32.0649C26.2767 30.8428 28.7985 28.7732 30.5727 26.1178C32.347 23.4624 33.294 20.3406 33.294 17.147C33.2943 15.0265 32.8768 12.9267 32.0654 10.9675C31.2541 9.00834 30.0647 7.2282 28.5652 5.72876C27.0658 4.22932 25.2857 3.03995 23.3265 2.22858C21.3673 1.41721 19.2675 0.999737 17.147 1Z" fill="#6D717A" stroke="white"/>
              <path d="M23.2337 21.4003L18.9747 17.1413L23.2337 12.8823C23.4615 12.6371 23.5853 12.3131 23.5789 11.9785C23.5726 11.6439 23.4366 11.3248 23.1997 11.0884C22.9628 10.852 22.6434 10.7167 22.3088 10.7111C21.9742 10.7055 21.6504 10.83 21.4057 11.0583L17.1467 15.3173L12.8877 11.0583C12.6428 10.8303 12.3189 10.7062 11.9843 10.7121C11.6496 10.7181 11.3304 10.8537 11.0937 11.0903C10.8571 11.327 10.7215 11.6462 10.7155 11.9809C10.7095 12.3155 10.8337 12.6394 11.0617 12.8843L15.3207 17.1433L11.0627 21.4003C10.9375 21.5172 10.8377 21.6585 10.7695 21.8156C10.7012 21.9726 10.666 22.1421 10.666 22.3133C10.666 22.4846 10.7012 22.654 10.7695 22.811C10.8377 22.9681 10.9375 23.1095 11.0627 23.2263C11.182 23.3472 11.3242 23.4432 11.4809 23.5087C11.6377 23.5742 11.8058 23.6079 11.9757 23.6079C12.1456 23.6079 12.3137 23.5742 12.4705 23.5087C12.6272 23.4432 12.7694 23.3472 12.8887 23.2263L17.1477 18.9673L21.4057 23.2293C21.649 23.4693 21.977 23.6039 22.3187 23.6039C22.6604 23.6039 22.9884 23.4693 23.2317 23.2293C23.3532 23.1101 23.4497 22.9678 23.5156 22.8109C23.5816 22.6539 23.6156 22.4855 23.6158 22.3152C23.616 22.145 23.5823 21.9764 23.5167 21.8194C23.4511 21.6623 23.3549 21.5198 23.2337 21.4003Z" fill="#6D717A" stroke="white"/>
            </svg>
        </div>
        <div class="modal-body">
          <form id="secondForm" class="d-flex flex-column align-items-center gap-4">
            <div class="d-flex flex-column w-100">
              <div class="section-header d-flex justify-content-between align-items-center">
                <div>
                  Adres Bilgileri
                </div>
               <!-- <div class="d-flex gap-2">
                <button type="button" id="form-location-button" class="form-location-button">
                  <div class="location-button-text">Konum ile doldur</div>
                  <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M50 25C50 11.1929 38.8071 0 25 0C11.1929 0 0 11.1929 0 25C0 38.8071 11.1929 50 25 50C38.8071 50 50 38.8071 50 25Z"
                      fill="#E0E9FB" />
                    <path
                      d="M24.1331 12.8688V13.7798C21.4566 13.9894 18.9428 15.1476 17.0444 17.046C15.146 18.9444 13.9877 21.4583 13.7781 24.1348H12.8671C12.7509 24.1309 12.635 24.1503 12.5264 24.1921C12.4178 24.2339 12.3188 24.2971 12.2351 24.3779C12.1515 24.4588 12.085 24.5556 12.0395 24.6627C11.9941 24.7698 11.9707 24.885 11.9707 25.0013C11.9707 25.1176 11.9941 25.2328 12.0395 25.3399C12.085 25.447 12.1515 25.5438 12.2351 25.6247C12.3188 25.7055 12.4178 25.7687 12.5264 25.8105C12.635 25.8523 12.7509 25.8718 12.8671 25.8678H13.7781C13.9875 28.5445 15.1456 31.0586 17.0441 32.9572C18.9425 34.8558 21.4564 36.0142 24.1331 36.2238V37.1348C24.1292 37.2511 24.1487 37.3669 24.1904 37.4755C24.2322 37.5841 24.2954 37.6832 24.3763 37.7668C24.4571 37.8505 24.554 37.917 24.6611 37.9624C24.7682 38.0078 24.8833 38.0312 24.9996 38.0312C25.116 38.0312 25.2311 38.0078 25.3382 37.9624C25.4453 37.917 25.5422 37.8505 25.623 37.7668C25.7039 37.6832 25.7671 37.5841 25.8088 37.4755C25.8506 37.3669 25.8701 37.2511 25.8661 37.1348V36.2238C28.5429 36.0145 31.0569 34.8563 32.9555 32.9579C34.8541 31.0595 36.0126 28.5455 36.2221 25.8688H37.1331C37.2494 25.8728 37.3653 25.8533 37.4739 25.8115C37.5824 25.7697 37.6815 25.7065 37.7651 25.6257C37.8488 25.5448 37.9153 25.448 37.9607 25.3409C38.0062 25.2338 38.0296 25.1186 38.0296 25.0023C38.0296 24.886 38.0062 24.7708 37.9607 24.6637C37.9153 24.5566 37.8488 24.4598 37.7651 24.3789C37.6815 24.2981 37.5824 24.2349 37.4739 24.1931C37.3653 24.1513 37.2494 24.1319 37.1331 24.1358H36.2221C36.0128 21.4591 34.8546 18.945 32.9562 17.0464C31.0578 15.1478 28.5439 13.9894 25.8671 13.7798V12.8688C25.8711 12.7525 25.8516 12.6367 25.8098 12.5281C25.7681 12.4195 25.7049 12.3205 25.624 12.2368C25.5432 12.1532 25.4463 12.0866 25.3392 12.0412C25.2321 11.9958 25.117 11.9724 25.0006 11.9724C24.8843 11.9724 24.7692 11.9958 24.6621 12.0412C24.555 12.0866 24.4581 12.1532 24.3773 12.2368C24.2964 12.3205 24.2332 12.4195 24.1915 12.5281C24.1497 12.6367 24.1292 12.7525 24.1331 12.8688ZM34.4891 24.1348H30.2001C30.0839 24.1309 29.968 24.1503 29.8594 24.1921C29.7508 24.2339 29.6518 24.2971 29.5681 24.3779C29.4845 24.4588 29.418 24.5556 29.3725 24.6627C29.3271 24.7698 29.3037 24.885 29.3037 25.0013C29.3037 25.1176 29.3271 25.2328 29.3725 25.3399C29.418 25.447 29.4845 25.5438 29.5681 25.6247C29.6518 25.7055 29.7508 25.7687 29.8594 25.8105C29.968 25.8523 30.0839 25.8718 30.2001 25.8678H34.4891C34.2839 28.0852 33.3096 30.161 31.735 31.7356C30.1603 33.3103 28.0845 34.2846 25.8671 34.4898V30.2018C25.8711 30.0855 25.8516 29.9697 25.8098 29.8611C25.7681 29.7525 25.7049 29.6535 25.624 29.5698C25.5432 29.4862 25.4463 29.4196 25.3392 29.3742C25.2321 29.3288 25.117 29.3054 25.0006 29.3054C24.8843 29.3054 24.7692 29.3288 24.6621 29.3742C24.555 29.4196 24.4581 29.4862 24.3773 29.5698C24.2964 29.6535 24.2332 29.7525 24.1915 29.8611C24.1497 29.9697 24.1302 30.0855 24.1341 30.2018V34.4908C21.9167 34.2856 19.841 33.3113 18.2663 31.7366C16.6917 30.162 15.7174 28.0862 15.5121 25.8688H19.8001C19.9164 25.8728 20.0323 25.8533 20.1409 25.8115C20.2494 25.7697 20.3485 25.7065 20.4321 25.6257C20.5158 25.5448 20.5823 25.448 20.6277 25.3409C20.6732 25.2338 20.6966 25.1186 20.6966 25.0023C20.6966 24.886 20.6732 24.7708 20.6277 24.6637C20.5823 24.5566 20.5158 24.4598 20.4321 24.3789C20.3485 24.2981 20.2494 24.2349 20.1409 24.1931C20.0323 24.1513 19.9164 24.1319 19.8001 24.1358H15.5111C15.7164 21.9184 16.6907 19.8426 18.2653 18.268C19.84 16.6933 21.9157 15.719 24.1331 15.5138V19.8018C24.1292 19.9181 24.1487 20.034 24.1904 20.1425C24.2322 20.2511 24.2954 20.3502 24.3763 20.4338C24.4571 20.5175 24.554 20.584 24.6611 20.6294C24.7682 20.6748 24.8833 20.6982 24.9996 20.6982C25.116 20.6982 25.2311 20.6748 25.3382 20.6294C25.4453 20.584 25.5422 20.5175 25.623 20.4338C25.7039 20.3502 25.7671 20.2511 25.8088 20.1425C25.8506 20.034 25.8701 19.9181 25.8661 19.8018V15.5128C28.0837 15.7178 30.1597 16.692 31.7346 18.2667C33.3094 19.8414 34.2839 21.9173 34.4891 24.1348Z"
                      fill="#3E4146" />
                    <path
                      d="M22 25C22 25.5933 22.1759 26.1734 22.5056 26.6667C22.8352 27.1601 23.3038 27.5446 23.8519 27.7716C24.4001 27.9987 25.0033 28.0581 25.5853 27.9424C26.1672 27.8266 26.7018 27.5409 27.1213 27.1213C27.5409 26.7018 27.8266 26.1672 27.9424 25.5853C28.0581 25.0033 27.9987 24.4001 27.7716 23.8519C27.5446 23.3038 27.1601 22.8352 26.6667 22.5056C26.1734 22.1759 25.5933 22 25 22C24.2044 22 23.4413 22.3161 22.8787 22.8787C22.3161 23.4413 22 24.2043 22 25ZM26 25C26 25.1978 25.9414 25.3911 25.8315 25.5556C25.7216 25.72 25.5654 25.8482 25.3827 25.9239C25.2 25.9996 24.9989 26.0194 24.8049 25.9808C24.6109 25.9422 24.4327 25.847 24.2929 25.7071C24.153 25.5673 24.0578 25.3891 24.0192 25.1951C23.9806 25.0011 24.0004 24.8 24.0761 24.6173C24.1518 24.4346 24.28 24.2784 24.4444 24.1685C24.6089 24.0586 24.8022 24 25 24C25.2652 24 25.5196 24.1054 25.7071 24.2929C25.8946 24.4804 26 24.7348 26 25Z"
                      fill="#3E4146" />
                  </svg>
                </button>
                <svg class="form-speech-button" id="form-speech-button" width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M50 25C50 11.1929 38.8071 0 25 0C11.1929 0 0 11.1929 0 25C0 38.8071 11.1929 50 25 50C38.8071 50 50 38.8071 50 25Z" fill="#E0E9FB"/>
                  <path opacity="0.721" d="M24.9989 28.0366C25.4764 28.037 25.9493 27.943 26.3905 27.7601C26.8316 27.5771 27.2323 27.3088 27.5694 26.9706C27.9065 26.6323 28.1735 26.2308 28.355 25.7891C28.5364 25.3474 28.6288 24.8741 28.6269 24.3966L28.6389 17.1166C28.6389 16.6386 28.5447 16.1652 28.3618 15.7236C28.1789 15.282 27.9107 14.8807 27.5727 14.5427C27.2347 14.2047 26.8335 13.9366 26.3918 13.7536C25.9502 13.5707 25.4769 13.4766 24.9989 13.4766C24.5208 13.4766 24.0475 13.5707 23.6059 13.7536C23.1643 13.9366 22.763 14.2047 22.425 14.5427C22.087 14.8807 21.8189 15.282 21.6359 15.7236C21.453 16.1652 21.3589 16.6386 21.3589 17.1166V24.3966C21.3582 24.8748 21.4519 25.3484 21.6346 25.7903C21.8173 26.2322 22.0854 26.6338 22.4235 26.9719C22.7617 27.31 23.1632 27.5781 23.6051 27.7608C24.047 27.9435 24.5207 28.0372 24.9989 28.0366ZM31.4299 24.3966C31.4153 25.2256 31.2372 26.0435 30.9059 26.8036C30.5746 27.5636 30.0965 28.2508 29.499 28.8257C28.9016 29.4005 28.1965 29.8518 27.4243 30.1537C26.652 30.4555 25.8278 30.6019 24.9989 30.5846C24.17 30.6018 23.3459 30.4553 22.5738 30.1534C21.8017 29.8515 21.0967 29.4002 20.4994 28.8253C19.902 28.2504 19.424 27.5633 19.0927 26.8033C18.7614 26.0434 18.5834 25.2255 18.5689 24.3966H16.5059C16.5616 26.3962 17.3231 28.3117 18.6554 29.8039C19.9878 31.2961 21.8052 32.2687 23.7859 32.5496V36.5296H26.2129V32.5496C28.1951 32.2723 30.0146 31.3007 31.3477 29.8078C32.6807 28.3149 33.4409 26.3974 33.4929 24.3966H31.4299Z" fill="black"/>
                </svg>
                </div> -->
              </div>
              <div class="custom-input-group">
                <select minlength="10" maxlength="10" id="city-select" type="text" placeholder="ehir" required>
                  <option value="">ehir Seiniz</option>
                </select>
                <label>ehir</label>
              </div>
              <div class="custom-input-group">
                <select minlength="10" maxlength="10" id="district-select" type="text" placeholder="le" required>
                <option value="">le Seiniz</option>
                </select>
                <label>le</label>
              </div>
              <div class="custom-input-group">
                <select minlength="10" maxlength="10" id="neigh-select" type="text" placeholder="Mahalle" required>
                <option value="">Mahalle Seiniz</option>
                </select>
                <label>Mahalle</label>
              </div>
              <div class="custom-input-group">
                <select minlength="10" maxlength="10" id="street-select" type="text" placeholder="Cadde/Sokak" required>
                <option value="">Cadde/Sokak Seiniz</option>
                </select>
                <label>Cadde/Sokak</label>
              </div>
              <div class="d-flex gap-1">
                <div class="custom-input-group">
                  <input id="building" type="text" placeholder="Bina No"></textarea>
                  <label>Bina No</label>
                </div>
                <div class="custom-input-group">
                  <input id="door" type="text" placeholder="Kap No"></textarea>
                  <label>Kap No</label>
                </div>
              </div>
              <div class="custom-input-group">
                <textarea id="adresDesc" type="text" placeholder="Adres Tarifi"></textarea>
                <label>Adres Tarifi</label>
              </div>
              <div class="custom-input-group">
                <textarea id="description-iptal" type="text" placeholder="Aklama Ekleyiniz" required></textarea>
                <label>Aklama Ekleyiniz</label>
              </div>
              <div class="custom-input-group">
                <input id="captcha-image" type="text" value="" disabled placeholder="Gvenlik Sorusu"/>
                <label>Gvenlik Sorusu</label>
                <button id="refresh-button" class="refresh-button" type="button">
                 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff"><path d="M480-160q-134 0-227-93t-93-227q0-134 93-227t227-93q69 0 132 28.5T720-690v-110h80v280H520v-80h168q-32-56-87.5-88T480-720q-100 0-170 70t-70 170q0 100 70 170t170 70q77 0 139-44t87-116h84q-28 106-114 173t-196 67Z"/></svg>
                </button>
              </div>
              <div class="custom-input-group">
                <input id="captcha-text" type="text" placeholder="Gvenlik Cevab" required/>
                <label>Gvenlik Cevab</label>
              </div>
            </div>
            <div>
              <svg id="return-svg" style="cursor: pointer;" width="64" height="64" viewBox="0 0 64 64" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <rect x="1" y="1" width="62" height="62" rx="31" fill="#E0E9FB" stroke="#E0E9FB" stroke-width="2" />
                <path
                  d="M29.4881 31.218L34.9491 25.761C35.1424 25.5673 35.2509 25.3047 35.2506 25.031C35.2503 24.7573 35.1413 24.4949 34.9476 24.3015C34.8516 24.2058 34.7378 24.1299 34.6125 24.0782C34.4873 24.0264 34.353 23.9999 34.2175 24C33.9438 24.0003 33.6814 24.1093 33.4881 24.303L27.3001 30.488C27.1132 30.6757 27.0058 30.9282 27.0002 31.193C26.9946 31.4578 27.0913 31.7146 27.2701 31.91L33.4841 38.136C33.6789 38.3218 33.9386 38.424 34.2078 38.421C34.477 38.4179 34.7343 38.3099 34.9249 38.1198C35.1155 37.9297 35.2243 37.6727 35.228 37.4035C35.2318 37.1344 35.1303 36.8744 34.9451 36.679L29.4881 31.218Z"
                  fill="#0152A3" />
              </svg>
              <button class="save-button">
                <div class="button-text">Kayd Olutur</div>
              </button>
            </div>
          </form>
        </div>
      </div>`,v8=async()=>{ad.innerHTML=C8;const r=document.getElementById("city-select"),t=document.getElementById("district-select"),e=document.getElementById("neigh-select"),n=document.getElementById("street-select"),i=document.getElementById("secondForm"),s=document.getElementById("captcha-image"),a=document.getElementById("captcha-text"),u=document.getElementById("refresh-button");s&&a&&u?(Up(s),u.onclick=()=>{q0(s,a)}):console.error("Captcha elementleri bulunamad"),r.onchange=d=>{S8(d)},t.onchange=d=>{I8(d)},e.onchange=d=>{R8(d)},n.onchange=d=>{T8(d)},A8();const h=document.getElementById("return-svg");h&&(h.onclick=()=>{Ps()}),i&&(i.onsubmit=async d=>{var g,_,m,v,x,w;d.preventDefault();const f=fc.split("").filter(S=>S!==" ").join("");if(a.value!==f){Le(`Gvenlik sorusunu yanl girdiniz.
Ltfen tekrar deneyiniz.`,ue.ERROR),q0(s,a);return}try{Zt.ilcode=(g=i.elements["city-select"])==null?void 0:g.value,Zt.ilcecode=(_=i.elements["district-select"])==null?void 0:_.value,Zt.mahallecode=(m=i.elements["neigh-select"])==null?void 0:m.value,Zt.sokakcode=(v=i.elements["street-select"])==null?void 0:v.value,Zt.binano=(x=i.elements.building)==null?void 0:x.value,Zt.ickapino=(w=i.elements.door)==null?void 0:w.value;const S=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/KESINTIBILDIRIM",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Zt)}).then(R=>R.json());S.success?(Ml=S.message,w8(Zt,Ml),x8()):Le(S.message||"Kaydetme srasnda hata olutu sonra tekrar deneyiniz.",ue.ERROR)}catch(S){console.error(S),Le("Kaydetme srasnda hata olutu sonra tekrar deneyiniz.",ue.ERROR)}}),document.getElementById("success-close").onclick=()=>{Wo.hide(),Zt={altKategori:"",hizmetno:"",tckn:"",telefon:"",email:"",adSoyad:"",ilcode:"",ilcecode:"",koycode:"",mahallecode:"",sokakcode:"",binano:"",ickapino:"",aciklama:""},Ps()}},E8=`<div class="modal-content success">
<div class="modal-header d-flex justify-content-center align-items-center">
  <svg width="71" height="67" viewBox="0 0 71 67" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M63.4953 16.4089H54.4333V7.43324C54.4308 5.46259 53.6393 3.57335 52.2325 2.17989C50.8256 0.786421 48.9182 0.00248116 46.9286 0H7.50473C5.51513 0.00248116 3.60774 0.786421 2.20088 2.17989C0.794017 3.57335 0.00254139 5.46259 3.6382e-05 7.43324V46.1442C-0.0036216 47.0416 0.268641 47.9188 0.780609 48.6591C1.29258 49.3994 2.01998 49.9678 2.86607 50.2887C3.38614 50.4882 3.93898 50.5907 4.4967 50.5911C5.1213 50.5916 5.73903 50.4621 6.30983 50.2109C6.88063 49.9597 7.39175 49.5925 7.81003 49.133L16.33 39.8503H16.5667V48.8259C16.5692 50.7966 17.3607 52.6858 18.7675 54.0793C20.1744 55.4728 22.0818 56.2567 24.0714 56.2592H54.67L63.19 65.542C63.6083 66.0013 64.1195 66.3684 64.6902 66.6196C65.261 66.8708 65.8787 67.0004 66.5033 67C67.061 66.9994 67.6138 66.8969 68.1339 66.6976C68.9804 66.3773 69.7082 65.8091 70.2202 65.0686C70.7323 64.3281 71.0043 63.4507 70.9999 62.5532V23.8422C70.9974 21.8715 70.206 19.9823 68.7991 18.5888C67.3923 17.1953 65.4849 16.4114 63.4953 16.4089ZM15.2768 35.162C14.9471 35.1619 14.621 35.23 14.3194 35.362C14.0178 35.494 13.7474 35.687 13.5255 35.9285L4.73336 45.509V7.43324C4.73399 6.70542 5.02617 6.00759 5.54577 5.49294C6.06536 4.97829 6.76991 4.68889 7.50473 4.68827H46.9262C47.6615 4.68826 48.3666 4.97739 48.8867 5.49211C49.4068 6.00682 49.6993 6.70502 49.7 7.43324V32.4147C49.6993 33.1425 49.4072 33.8403 48.8876 34.355C48.368 34.8696 47.6634 35.159 46.9286 35.1596H15.2745L15.2768 35.162ZM66.2666 61.9179L57.4745 52.3374C57.2526 52.0959 56.9821 51.9029 56.6806 51.7709C56.379 51.6389 56.0529 51.5708 55.7231 51.5709H24.0714C23.3366 51.5703 22.632 51.2809 22.1124 50.7663C21.5928 50.2516 21.3006 49.5538 21.3 48.8259V39.8503H46.9286C48.9182 39.8478 50.8256 39.0638 52.2325 37.6704C53.6393 36.2769 54.4308 34.3877 54.4333 32.417V21.0972H63.4953C64.2301 21.0978 64.9346 21.3872 65.4542 21.9019C65.9738 22.4165 66.266 23.1143 66.2666 23.8422V61.9179Z"
      fill="#0152A3" />
  </svg>
  <div class="modal-header-text">Kesinti Bildirimi</div>
  <svg id="success-close" class="success-close" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.147 3.174C20.3784 3.17522 23.5093 4.29675 26.0065 6.34753C28.5037 8.3983 30.2126 11.2515 30.8421 14.4209C31.4716 17.5903 30.9828 20.88 29.4588 23.7294C27.9349 26.5789 25.4702 28.8118 22.4845 30.0478C19.4989 31.2838 16.1771 31.4464 13.085 30.5079C9.99298 29.5695 7.32193 27.588 5.52697 24.901C3.732 22.214 2.92417 18.9879 3.24108 15.7721C3.558 12.5563 4.98007 9.54988 7.26501 7.265C8.5598 5.96349 10.0999 4.93176 11.7962 4.22953C13.4924 3.5273 15.3111 3.16854 17.147 3.174ZM17.147 1C13.9534 1 10.8316 1.94701 8.17621 3.72126C5.52085 5.49552 3.45125 8.01733 2.22912 10.9678C1.007 13.9183 0.687232 17.1649 1.31027 20.2971C1.9333 23.4293 3.47116 26.3065 5.72935 28.5647C7.98755 30.8229 10.8647 32.3607 13.9969 32.9837C17.1291 33.6068 20.3757 33.287 23.3262 32.0649C26.2767 30.8428 28.7985 28.7732 30.5727 26.1178C32.347 23.4624 33.294 20.3406 33.294 17.147C33.2943 15.0265 32.8768 12.9267 32.0654 10.9675C31.2541 9.00834 30.0647 7.2282 28.5652 5.72876C27.0658 4.22932 25.2857 3.03995 23.3265 2.22858C21.3673 1.41721 19.2675 0.999737 17.147 1Z" fill="#6D717A" stroke="white"/>
    <path d="M23.2337 21.4003L18.9747 17.1413L23.2337 12.8823C23.4615 12.6371 23.5853 12.3131 23.5789 11.9785C23.5726 11.6439 23.4366 11.3248 23.1997 11.0884C22.9628 10.852 22.6434 10.7167 22.3088 10.7111C21.9742 10.7055 21.6504 10.83 21.4057 11.0583L17.1467 15.3173L12.8877 11.0583C12.6428 10.8303 12.3189 10.7062 11.9843 10.7121C11.6496 10.7181 11.3304 10.8537 11.0937 11.0903C10.8571 11.327 10.7215 11.6462 10.7155 11.9809C10.7095 12.3155 10.8337 12.6394 11.0617 12.8843L15.3207 17.1433L11.0627 21.4003C10.9375 21.5172 10.8377 21.6585 10.7695 21.8156C10.7012 21.9726 10.666 22.1421 10.666 22.3133C10.666 22.4846 10.7012 22.654 10.7695 22.811C10.8377 22.9681 10.9375 23.1095 11.0627 23.2263C11.182 23.3472 11.3242 23.4432 11.4809 23.5087C11.6377 23.5742 11.8058 23.6079 11.9757 23.6079C12.1456 23.6079 12.3137 23.5742 12.4705 23.5087C12.6272 23.4432 12.7694 23.3472 12.8887 23.2263L17.1477 18.9673L21.4057 23.2293C21.649 23.4693 21.977 23.6039 22.3187 23.6039C22.6604 23.6039 22.9884 23.4693 23.2317 23.2293C23.3532 23.1101 23.4497 22.9678 23.5156 22.8109C23.5816 22.6539 23.6156 22.4855 23.6158 22.3152C23.616 22.145 23.5823 21.9764 23.5167 21.8194C23.4511 21.6623 23.3549 21.5198 23.2337 21.4003Z" fill="#6D717A" stroke="white"/>
    </svg>
    
</div>
<div class="modal-success">
  <svg class="success-icon" width="344" height="219" viewBox="0 0 344 219" fill="none"
    xmlns="http://www.w3.org/2000/svg">
    <path
      d="M200.541 109.284C200.544 103.599 202.27 98.048 205.492 93.3633C208.713 88.6786 213.278 85.08 218.586 83.0422C215.837 71.5617 211.282 60.5906 205.091 50.5391C201.486 52.1322 197.588 52.9601 193.646 52.9705C188.963 52.9771 184.353 51.8117 180.236 49.5807C176.119 47.3497 172.625 44.1239 170.074 40.1972C167.522 36.2706 165.994 31.7679 165.627 27.0993C165.261 22.4308 166.069 17.7449 167.977 13.4684C157.946 7.28774 146.995 2.74151 135.535 0C133.501 5.31089 129.904 9.87971 125.219 13.1027C120.533 16.3258 114.98 18.0513 109.293 18.0513C103.606 18.0513 98.0529 16.3258 93.3674 13.1027C88.6819 9.87971 85.0846 5.31089 83.0508 0C71.5709 2.74644 60.6 7.29838 50.5478 13.4858C52.4522 17.7614 53.257 22.4455 52.889 27.1116C52.5209 31.7777 50.9917 36.2777 48.4406 40.202C45.8894 44.1262 42.3973 47.3501 38.2822 49.5802C34.167 51.8103 29.5594 52.9758 24.8788 52.9705C20.9325 52.9825 17.0296 52.1474 13.4337 50.5217C7.29312 60.6197 2.76103 71.6115 0 83.1029C5.30326 85.1391 9.8654 88.7339 13.0855 93.4138C16.3057 98.0936 18.0328 103.639 18.0393 109.32C18.0459 115.001 16.3317 120.55 13.1224 125.237C9.91311 129.925 5.35931 133.53 0.0607856 135.579C2.80695 147.058 7.3589 158.029 13.5466 168.082C18.7317 165.779 24.4929 165.101 30.071 166.137C35.649 167.173 40.7822 169.876 44.794 173.887C48.8058 177.899 51.508 183.032 52.5444 188.61C53.5808 194.189 52.9029 199.95 50.5999 205.135C60.6571 211.312 71.6264 215.864 83.1029 218.621C85.1392 213.328 88.7314 208.777 93.4059 205.567C98.0805 202.357 103.618 200.639 109.289 200.639C114.959 200.639 120.497 202.357 125.171 205.567C129.846 208.777 133.438 213.328 135.474 218.621C146.954 215.874 157.925 211.322 167.977 205.135C165.689 199.95 165.023 194.194 166.065 188.624C167.107 183.053 169.809 177.928 173.816 173.92C177.823 169.913 182.949 167.211 188.519 166.169C194.09 165.127 199.846 165.794 205.031 168.082C211.212 158.025 215.766 147.056 218.525 135.579C213.231 133.512 208.683 129.898 205.475 125.207C202.266 120.516 200.547 114.967 200.541 109.284Z"
      fill="#1A69FF" />
    <path d="M120.534 37.5156V99.4738H155.043L100.927 181.04V119.082H66.3828L120.534 37.5156Z" fill="white" />
    <g filter="url(#filter0_b_0_1)">
      <path
        d="M344 108C344 167.647 295.647 216 236 216C176.353 216 128 167.647 128 108C128 48.3532 176.353 0 236 0C295.647 0 344 48.3532 344 108Z"
        fill="#30DA9D" fill-opacity="0.27" />
    </g>
    <path
      d="M281.998 82.2324C285.741 85.927 285.781 91.9566 282.086 95.6999L237.201 141.176C233.543 144.882 227.587 144.963 223.829 141.357L200.236 118.715C196.441 115.074 196.317 109.045 199.959 105.25C203.6 101.456 209.629 101.331 213.423 104.973L230.242 121.113L268.531 82.3205C272.225 78.5772 278.255 78.5378 281.998 82.2324Z"
      fill="white" />
    <defs>
      <filter id="filter0_b_0_1" x="98" y="-30" width="276" height="276" filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feGaussianBlur in="BackgroundImageFix" stdDeviation="15" />
        <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_0_1" />
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_0_1" result="shape" />
      </filter>
    </defs>
  </svg>
  <div class="success-text-container green">
    <div id="basvuru-no">${Ml} nolu kesinti talebiniz </div>
    <div>baaryla oluturulmutur</div>
  </div>
  <div class="success-text-container">
    <div>ekibimiz en ksa srede </div>
    <div>almalar balatacaktr</div>
  </div>
  <button id="success-button" class="success-button">Haritaya Dn</button>
</div>
</div>`,x8=async()=>{ad.innerHTML=E8;const r=document.getElementById("basvuru-no");r.innerText=Ml+" nolu kesinti talebiniz",document.getElementById("success-close").onclick=()=>{Wo.hide(),Zt={altKategori:"",hizmetno:"",tckn:"",telefon:"",email:"",adSoyad:"",ilcode:"",ilcecode:"",koycode:"",mahallecode:"",sokakcode:"",binano:"",ickapino:"",aciklama:""},Ps()},document.getElementById("success-button").onclick=()=>{Wo.hide(),Ps()}},w8=(r,t)=>{let e;switch(r.altKategori){case"5":e="Binada Elektrik Yok";break;case"3":e="Sokakta Elektrik Yok";break;case"4":e="Mahallede Elektrik Yok";break}const n={district:Vp,neighbourhood:zp,street:Wp,date:moment().format("DD.MM.YYYY HH:mm"),category:e,desc:r.aciklama,basvuruNo:t},i=localStorage.getItem("localOutages");if(i){const s=JSON.parse(i);s.push(n);const a=JSON.stringify(s);localStorage.setItem("localOutages",a),ac(a)}else localStorage.setItem("localOutages",JSON.stringify([n])),ac(JSON.stringify([n]))},S8=r=>{const t=document.getElementById("district-select");t.innerHTML="",t.value="";const e=document.createElement("option");e.value="",e.innerText="le Seiniz",t.appendChild(e);const n=document.getElementById("neigh-select");n.innerHTML="",n.value="";const i=document.createElement("option");i.value="",i.innerText="Mahalle Seiniz",n.appendChild(i);const s=document.getElementById("street-select");s.innerHTML="",s.value="";const a=document.createElement("option");a.value="",a.innerText="Cadde/Sokak Seiniz",s.appendChild(a),r.target.value&&b8(r.target.value)},I8=r=>{var s;const t=document.getElementById("neigh-select");t.innerHTML="",t.value="";const e=document.createElement("option");e.value="",e.innerText="Mahalle Seiniz",t.appendChild(e);const n=document.getElementById("street-select");n.innerHTML="",n.value="";const i=document.createElement("option");i.value="",i.innerText="Cadde/Sokak Seiniz",n.appendChild(i),r.target.value&&(Vp=(s=r.target.options[r.target.selectedIndex])==null?void 0:s.text,L8(r.target.value))},R8=r=>{var n;const t=document.getElementById("street-select");t.innerHTML="",t.value="";const e=document.createElement("option");e.value="",e.innerText="Cadde/Sokak Seiniz",t.appendChild(e),r.target.value&&(zp=(n=r.target.options[r.target.selectedIndex])==null?void 0:n.text,k8(r.target.value))},T8=r=>{var t;r.target.value&&(Wp=(t=r.target.options[r.target.selectedIndex])==null?void 0:t.text)},A8=async()=>{try{const r=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/ILLER").then(n=>n.json()),t=document.getElementById("city-select");t.innerHTML="";const e=document.createElement("option");e.value="",e.innerText="ehir Seiniz",t.appendChild(e);for(const n of r){const i=document.createElement("option");i.value=n.code,i.innerText=n.text,t.appendChild(i)}}catch(r){console.error(r),Le("l listesi getirilirken hata olutu.")}},b8=async r=>{if(r){const t=document.getElementById("district-select"),e=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/ILCELER?ilcode="+r).then(n=>n.json());for(const n of e){const i=document.createElement("option");i.value=n.code,i.innerText=n.text,t.appendChild(i)}}},L8=async r=>{try{const e=(await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/KOYLER?ilcecode="+r).then(n=>n.json()))[0].code;e&&(M8(e),Zt.koycode=e)}catch(t){console.error(t)}},M8=async r=>{try{const t=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/MAHALLELER?koycode="+r).then(i=>i.json()),e=document.getElementById("neigh-select");e.innerHTML="";const n=document.createElement("option");n.value="",n.innerText="Mahalle Seiniz",e.appendChild(n);for(const i of t){const s=document.createElement("option");s.value=i.code,s.innerText=i.text,e.appendChild(s)}}catch(t){console.error(t)}},k8=async r=>{const t=await fetch("https://kesintiapi.ckenerji.com.tr/BEDAS/SOKAKLAR?mahallecode="+r).then(n=>n.json()),e=document.getElementById("street-select");for(const n of t){const i=document.createElement("option");i.value=n.code,i.innerText=n.text,e.appendChild(i)}},Up=r=>{fc=Math.random().toString(36).substring(2,6).split("").map(i=>Math.random()>.5?i.toUpperCase():i).join("   "),r.value=fc},q0=(r,t)=>{Up(r),t.value=""};Ps();
